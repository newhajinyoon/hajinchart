/*! jQuery Address v1.6 | (c) 2009, 2013 Rostislav Hristov | jquery.org/license */
(function(c){c.address=function(){var s=function(a){a=c.extend(c.Event(a),function(){for(var b={},f=c.address.parameterNames(),m=0,p=f.length;m<p;m++)b[f[m]]=c.address.parameter(f[m]);return{value:c.address.value(),path:c.address.path(),pathNames:c.address.pathNames(),parameterNames:f,parameters:b,queryString:c.address.queryString()}}.call(c.address));c(c.address).trigger(a);return a},g=function(a){return Array.prototype.slice.call(a)},k=function(){c().bind.apply(c(c.address),Array.prototype.slice.call(arguments));
return c.address},da=function(){c().unbind.apply(c(c.address),Array.prototype.slice.call(arguments));return c.address},G=function(){return A.pushState&&d.state!==h},T=function(){return("/"+n.pathname.replace(new RegExp(d.state),"")+n.search+(H()?"#"+H():"")).replace(S,"/")},H=function(){var a=n.href.indexOf("#");return a!=-1?n.href.substr(a+1):""},q=function(){return G()?T():H()},U=function(){return"javascript"},M=function(a){a=a.toString();return(d.strict&&a.substr(0,1)!="/"?"/":"")+a},t=function(a,
b){return parseInt(a.css(b),10)},C=function(){if(!I){var a=q();if(decodeURI(e)!=decodeURI(a))if(v&&x<7)n.reload();else{v&&!J&&d.history&&u(N,50);e=a;B(o)}}},B=function(a){u(ea,10);return s(V).isDefaultPrevented()||s(a?W:X).isDefaultPrevented()},ea=function(){if(d.tracker!=="null"&&d.tracker!==D){var a=c.isFunction(d.tracker)?d.tracker:i[d.tracker],b=(n.pathname+n.search+(c.address&&!G()?c.address.value():"")).replace(/\/\//,"/").replace(/^\/$/,"");if(c.isFunction(a))a(b);else if(c.isFunction(i.urchinTracker))i.urchinTracker(b);
else if(i.pageTracker!==h&&c.isFunction(i.pageTracker._trackPageview))i.pageTracker._trackPageview(b);else i._gaq!==h&&c.isFunction(i._gaq.push)&&i._gaq.push(["_trackPageview",decodeURI(b)])}},N=function(){var a=U()+":"+o+";document.open();document.writeln('<html><head><title>"+l.title.replace(/\'/g,"\\'")+"</title><script>var "+y+' = "'+encodeURIComponent(q()).replace(/\'/g,"\\'")+(l.domain!=n.hostname?'";document.domain="'+l.domain:"")+"\";<\/script></head></html>');document.close();";if(x<7)j.src=
a;else j.contentWindow.location.replace(a)},Z=function(){if(E&&Y!=-1){var a,b,f=E.substr(Y+1).split("&");for(a=0;a<f.length;a++){b=f[a].split("=");if(/^(autoUpdate|history|strict|wrap)$/.test(b[0]))d[b[0]]=isNaN(b[1])?/^(true|yes)$/i.test(b[1]):parseInt(b[1],10)!==0;if(/^(state|tracker)$/.test(b[0]))d[b[0]]=b[1]}E=D}e=q()},aa=function(){if(!$){$=r;Z();c('a[rel*="address:"]').address();if(d.wrap){var a=c("body");c("body > *").wrapAll('<div style="padding:'+(t(a,"marginTop")+t(a,"paddingTop"))+"px "+
(t(a,"marginRight")+t(a,"paddingRight"))+"px "+(t(a,"marginBottom")+t(a,"paddingBottom"))+"px "+(t(a,"marginLeft")+t(a,"paddingLeft"))+'px;" />').parent().wrap('<div id="'+y+'" style="height:100%;overflow:auto;position:relative;'+(K&&!window.statusbar.visible?"resize:both;":"")+'" />');c("html, body").css({height:"100%",margin:0,padding:0,overflow:"hidden"});K&&c('<style type="text/css" />').appendTo("head").text("#"+y+"::-webkit-resizer { background-color: #fff; }")}if(v&&!J){a=l.getElementsByTagName("frameset")[0];
j=l.createElement((a?"":"i")+"frame");j.src=U()+":"+o;if(a){a.insertAdjacentElement("beforeEnd",j);a[a.cols?"cols":"rows"]+=",0";j.noResize=r;j.frameBorder=j.frameSpacing=0}else{j.style.display="none";j.style.width=j.style.height=0;j.tabIndex=-1;l.body.insertAdjacentElement("afterBegin",j)}u(function(){c(j).bind("load",function(){var b=j.contentWindow;e=b[y]!==h?b[y]:"";if(e!=q()){B(o);n.hash=e}});j.contentWindow[y]===h&&N()},50)}u(function(){s("init");B(o)},1);if(!G())if(v&&x>7||!v&&J)if(i.addEventListener)i.addEventListener(F,
C,o);else i.attachEvent&&i.attachEvent("on"+F,C);else fa(C,50);"state"in window.history&&c(window).trigger("popstate")}},ga=function(a){a=a.toLowerCase();a=/(chrome)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||a.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a)||[];return{browser:a[1]||"",version:a[2]||"0"}},h,D=null,y="jQueryAddress",F="hashchange",V="change",W="internalChange",X="externalChange",
r=true,o=false,d={autoUpdate:r,history:r,strict:r,wrap:o},z=function(){var a={},b=ga(navigator.userAgent);if(b.browser){a[b.browser]=true;a.version=b.version}if(a.chrome)a.webkit=true;else if(a.webkit)a.safari=true;return a}(),x=parseFloat(z.version),K=z.webkit||z.safari,v=!c.support.opacity,i=function(){try{return top.document!==h&&top.document.title!==h?top:window}catch(a){return window}}(),l=i.document,A=i.history,n=i.location,fa=setInterval,u=setTimeout,S=/\/{2,9}/g;z=navigator.userAgent;var J=
"on"+F in i,j,E=c("script:last").attr("src"),Y=E?E.indexOf("?"):-1,O=l.title,I=o,$=o,ba=r,L=o,e=q();if(v){x=parseFloat(z.substr(z.indexOf("MSIE")+4));if(l.documentMode&&l.documentMode!=x)x=l.documentMode!=8?7:8;var ca=l.onpropertychange;l.onpropertychange=function(){ca&&ca.call(l);if(l.title!=O&&l.title.indexOf("#"+q())!=-1)l.title=O}}if(A.navigationMode)A.navigationMode="compatible";if(document.readyState=="complete")var ha=setInterval(function(){if(c.address){aa();clearInterval(ha)}},50);else{Z();
c(aa)}c(window).bind("popstate",function(){if(decodeURI(e)!=decodeURI(q())){e=q();B(o)}}).bind("unload",function(){if(i.removeEventListener)i.removeEventListener(F,C,o);else i.detachEvent&&i.detachEvent("on"+F,C)});return{bind:function(){return k.apply(this,g(arguments))},unbind:function(){return da.apply(this,g(arguments))},init:function(){return k.apply(this,["init"].concat(g(arguments)))},change:function(){return k.apply(this,[V].concat(g(arguments)))},internalChange:function(){return k.apply(this,
[W].concat(g(arguments)))},externalChange:function(){return k.apply(this,[X].concat(g(arguments)))},baseURL:function(){var a=n.href;if(a.indexOf("#")!=-1)a=a.substr(0,a.indexOf("#"));if(/\/$/.test(a))a=a.substr(0,a.length-1);return a},autoUpdate:function(a){if(a!==h){d.autoUpdate=a;return this}return d.autoUpdate},history:function(a){if(a!==h){d.history=a;return this}return d.history},state:function(a){if(a!==h){d.state=a;var b=T();if(d.state!==h)if(A.pushState)b.substr(0,3)=="/#/"&&n.replace(d.state.replace(/^\/$/,
"")+b.substr(2));else b!="/"&&b.replace(/^\/#/,"")!=H()&&u(function(){n.replace(d.state.replace(/^\/$/,"")+"/#"+b)},1);return this}return d.state},strict:function(a){if(a!==h){d.strict=a;return this}return d.strict},tracker:function(a){if(a!==h){d.tracker=a;return this}return d.tracker},wrap:function(a){if(a!==h){d.wrap=a;return this}return d.wrap},update:function(){L=r;this.value(e);L=o;return this},title:function(a){if(a!==h){u(function(){O=l.title=a;if(ba&&j&&j.contentWindow&&j.contentWindow.document){j.contentWindow.document.title=
a;ba=o}},50);return this}return l.title},value:function(a){if(a!==h){a=M(a);if(a=="/")a="";if(e==a&&!L)return;e=a;if(d.autoUpdate||L){if(B(r))return this;if(G())A[d.history?"pushState":"replaceState"]({},"",d.state.replace(/\/$/,"")+(e===""?"/":e));else{I=r;if(K)if(d.history)n.hash="#"+e;else n.replace("#"+e);else if(e!=q())if(d.history)n.hash="#"+e;else n.replace("#"+e);v&&!J&&d.history&&u(N,50);if(K)u(function(){I=o},1);else I=o}}return this}return M(e)},path:function(a){if(a!==h){var b=this.queryString(),
f=this.hash();this.value(a+(b?"?"+b:"")+(f?"#"+f:""));return this}return M(e).split("#")[0].split("?")[0]},pathNames:function(){var a=this.path(),b=a.replace(S,"/").split("/");if(a.substr(0,1)=="/"||a.length===0)b.splice(0,1);a.substr(a.length-1,1)=="/"&&b.splice(b.length-1,1);return b},queryString:function(a){if(a!==h){var b=this.hash();this.value(this.path()+(a?"?"+a:"")+(b?"#"+b:""));return this}a=e.split("?");return a.slice(1,a.length).join("?").split("#")[0]},parameter:function(a,b,f){var m,
p;if(b!==h){var P=this.parameterNames();p=[];b=b===h||b===D?"":b.toString();for(m=0;m<P.length;m++){var Q=P[m],w=this.parameter(Q);if(typeof w=="string")w=[w];if(Q==a)w=b===D||b===""?[]:f?w.concat([b]):[b];for(var R=0;R<w.length;R++)p.push(Q+"="+w[R])}c.inArray(a,P)==-1&&b!==D&&b!==""&&p.push(a+"="+b);this.queryString(p.join("&"));return this}if(b=this.queryString()){f=[];p=b.split("&");for(m=0;m<p.length;m++){b=p[m].split("=");b[0]==a&&f.push(b.slice(1).join("="))}if(f.length!==0)return f.length!=
1?f:f[0]}},parameterNames:function(){var a=this.queryString(),b=[];if(a&&a.indexOf("=")!=-1){a=a.split("&");for(var f=0;f<a.length;f++){var m=a[f].split("=")[0];c.inArray(m,b)==-1&&b.push(m)}}return b},hash:function(a){if(a!==h){this.value(e.split("#")[0]+(a?"#"+a:""));return this}a=e.split("#");return a.slice(1,a.length).join("#")}}}();c.fn.address=function(s){this.data("address")||this.on("click",function(g){if(g.shiftKey||g.ctrlKey||g.metaKey||g.which==2)return true;var k=g.currentTarget;if(c(k).is("a")){g.preventDefault();
g=s?s.call(k):/address:/.test(c(k).attr("rel"))?c(k).attr("rel").split("address:")[1].split(" ")[0]:c.address.state()!==undefined&&!/^\/?$/.test(c.address.state())?c(k).attr("href").replace(new RegExp("^(.*"+c.address.state()+"|\\.)"),""):c(k).attr("href").replace(/^(#\!?|\.)/,"");c.address.value(g)}}).on("submit",function(g){var k=g.currentTarget;if(c(k).is("form")){g.preventDefault();g=c(k).attr("action");k=s?s.call(k):(g.indexOf("?")!=-1?g.replace(/&$/,""):g+"?")+c(k).serialize();c.address.value(k)}}).data("address",
true);return this}})(jQuery);


/*!
	Autosize v1.18.4 - 2014-01-11
	Automatically adjust textarea height based on user input.
	(c) 2014 Jack Moore - http://www.jacklmoore.com/autosize
	license: http://www.opensource.org/licenses/mit-license.php
	DO NOT REMOVE !
*/
!function(a){var b,c={className:"autosizejs",append:"",callback:!1,resizeDelay:10,placeholder:!0},d='<textarea tabindex="-1" style="position:absolute; top:-999px; left:0; right:auto; bottom:auto; border:0; padding: 0; -moz-box-sizing:content-box; -webkit-box-sizing:content-box; box-sizing:content-box; word-wrap:break-word; height:0 !important; min-height:0 !important; overflow:hidden; transition:none; -webkit-transition:none; -moz-transition:none;"/>',e=["fontFamily","fontSize","fontWeight","fontStyle","letterSpacing","textTransform","wordSpacing","textIndent"],f=a(d).data("autosize",!0)[0];f.style.lineHeight="99px","99px"===a(f).css("lineHeight")&&e.push("lineHeight"),f.style.lineHeight="",a.fn.autosize=function(d){return this.length?(d=a.extend({},c,d||{}),f.parentNode!==document.body&&a(document.body).append(f),this.each(function(){function c(){var b,c=window.getComputedStyle?window.getComputedStyle(m,null):!1;c?(b=m.getBoundingClientRect().width,0===b&&(b=parseInt(c.width,10)),a.each(["paddingLeft","paddingRight","borderLeftWidth","borderRightWidth"],function(a,d){b-=parseInt(c[d],10)})):b=Math.max(n.width(),0),f.style.width=b+"px"}function g(){var g={};if(b=m,f.className=d.className,j=parseInt(n.css("maxHeight"),10),a.each(e,function(a,b){g[b]=n.css(b)}),a(f).css(g),c(),window.chrome){var h=m.style.width;m.style.width="0px";{m.offsetWidth}m.style.width=h}}function h(){var e,h;b!==m?g():c(),f.value=!m.value&&d.placeholder?(a(m).attr("placeholder")||"")+d.append:m.value+d.append,f.style.overflowY=m.style.overflowY,h=parseInt(m.style.height,10),f.scrollTop=0,f.scrollTop=9e4,e=f.scrollTop,j&&e>j?(m.style.overflowY="scroll",e=j):(m.style.overflowY="hidden",k>e&&(e=k)),e+=o,h!==e&&(m.style.height=e+"px",p&&d.callback.call(m,m))}function i(){clearTimeout(l),l=setTimeout(function(){var a=n.width();a!==r&&(r=a,h())},parseInt(d.resizeDelay,10))}var j,k,l,m=this,n=a(m),o=0,p=a.isFunction(d.callback),q={height:m.style.height,overflow:m.style.overflow,overflowY:m.style.overflowY,wordWrap:m.style.wordWrap,resize:m.style.resize},r=n.width();n.data("autosize")||(n.data("autosize",!0),("border-box"===n.css("box-sizing")||"border-box"===n.css("-moz-box-sizing")||"border-box"===n.css("-webkit-box-sizing"))&&(o=n.outerHeight()-n.height()),k=Math.max(parseInt(n.css("minHeight"),10)-o||0,n.height()),n.css({overflow:"hidden",overflowY:"hidden",wordWrap:"break-word",resize:"none"===n.css("resize")||"vertical"===n.css("resize")?"none":"horizontal"}),"onpropertychange"in m?"oninput"in m?n.on("input.autosize keyup.autosize",h):n.on("propertychange.autosize",function(){"value"===event.propertyName&&h()}):n.on("input.autosize",h),d.resizeDelay!==!1&&a(window).on("resize.autosize",i),n.on("autosize.resize",h),n.on("autosize.resizeIncludeStyle",function(){b=null,h()}),n.on("autosize.destroy",function(){b=null,clearTimeout(l),a(window).off("resize",i),n.off("autosize").off(".autosize").css(q).removeData("autosize")}),h())})):this}}(window.jQuery||window.$);

/* melonweb_cmtpgn_pc_api.min.20221012 */
(function(window,$){var MELON=window.MELON||(window.MELON={});MELON.CMTPGN=MELON.CMTPGN||{};MELON.CMTPGN.Config=MELON.CMTPGN.Config||{};MELON.CMTPGN.Global=MELON.CMTPGN.Global||{};MELON.CMTPGN.Sqwidget=MELON.CMTPGN.Sqwidget||{};MELON.CMTPGN.Api=MELON.CMTPGN.Api||{};MELON.CMTPGN.Util=MELON.CMTPGN.Util||{};MELON.CMTPGN.Msg=MELON.CMTPGN.Msg||{};var __config=MELON.CMTPGN.Config;var __global=MELON.CMTPGN.Global;var __sqwidget=MELON.CMTPGN.Sqwidget;var __api=MELON.CMTPGN.Api;var __util=MELON.CMTPGN.Util;var __msg=MELON.CMTPGN.Msg;MELON.CMTPGN.Util.log=(function(){if(window.location&&((window.location.toString()).indexOf("/cmt/plugin/test/")!==-1)&&(window.location.search.indexOf("debugMode=1")!==-1)){var console=window.console,air=window.air&&window.air.Introspector,debug=console&&console.debug,log=console&&console.log,method;if(debug){try{debug();return debug;}catch(e){method=function(){debug.apply(console,arguments);};}}else{if(log){if(typeof log.apply==="function"){method=function(){log.apply(console,arguments);};}else{method=function(){var args=arguments,len=arguments.length,indent="",i;for(i=0;i<len;i++){log(indent+args[i]);indent="---- ";}};}}else{if(air&&air.Console&&air.Console.log){method=air.Console.log;}}}if(method){return method;}else{return function(){};}}else{return function(){};}}());MELON.CMTPGN.Util.isCmtpgnHashed=function(){var s=(window.location?window.location.toString():"");__util.log("__util.isCmtpgnHashed() s=["+s+"]");return(s&&s.indexOf("#cmtpgn=")!==-1);};MELON.CMTPGN.Util.makeRefreshHashString=function(){return"cmtpgn=&focus="+new Date().getTime();};MELON.CMTPGN.Util.makeCmtpgnUrlHashString=function(url,mobleFlag,pageNo,sortType,srchType,srchWord){if(mobleFlag===true){if(__util.isEmpty(pageNo)===true){pageNo=__global.C_CMT_DFLT_PAGE_NO;}return"cmtpgn=&pageNo="+pageNo;}else{if(__util.isEmpty(pageNo)===true){pageNo=__global.C_CMT_DFLT_PAGE_NO;}if(__util.isEmpty(sortType)===true){sortType=__global.C_CMT_DFLT_SORT_TYPE;}if(__util.isEmpty(srchType)===true){srchType=__global.C_CMT_DFLT_SRCH_TYPE;}if(__util.isEmpty($.trim(srchWord))===true){srchWord=__global.C_CMT_DFLT_SRCH_WORD;}return"cmtpgn=&pageNo="+pageNo+"&sortType="+sortType+"&srchType="+srchType+"&srchWord="+encodeURIComponent(srchWord);}};MELON.CMTPGN.Util.makeMusicSrchHashString=function(pageNo,musicType,sortType,srchWord){return"cmtpgn=&pageNo="+pageNo+"&musicType="+musicType+"&sortType="+sortType+"&srchWord="+encodeURIComponent(srchWord);};MELON.CMTPGN.Util.getXssFilterText=function(s){if(__util.isEmpty(s)!==true){s=__util.replaceAll(s,"\0","");}return s;};MELON.CMTPGN.Util.getValueFromUrl=function(url,key){url=decodeURIComponent(url);var re=new RegExp("[#?&]"+key+"=([^&]+)(&|$)");var match=url.match(re);return(match?match[1]:"");};MELON.CMTPGN.Util.getValueFromCmtpgnUrl=function(url,key){url=decodeURIComponent(url);var re=new RegExp("cmtpgn?.*[?&]"+key+"=([^&]+)(&|$)");var match=url.match(re);return(match?match[1]:"");};MELON.CMTPGN.Util.getValueFromHash=function(hash,key){hash=decodeURIComponent(hash);var re=new RegExp("[#?&]"+key+"=([^&]+)(&|$)");var match=hash.match(re);return(match?match[1]:"");};MELON.CMTPGN.Util.getNumberOnly=function(s){var match=s.match(/[0-9]+/g);return(match?match[0]:"0");};MELON.CMTPGN.Util.getNumericDsplyFormat=function(n){if(__util.isDefined(n)===true&&__util.isEmpty(n)!==true){if(Number(n)>999999){return __util.addComma("999999")+"+";}else{return __util.addComma(n);}}else{return"0";}};MELON.CMTPGN.Util.getDateDsplyFormat=function(d){if(__util.isDefined(d)===true&&__util.isEmpty(d)!==true){var yyyy=(d.length>=4?d.substring(0,4):"");var mm=(d.length>=6?d.substring(4,6):"");var dd=(d.length>=8?d.substring(6,8):"");if(yyyy!==""&&mm!==""&&dd!==""){return(yyyy+"."+mm+"."+dd);}else{return"";}}else{return"";}};MELON.CMTPGN.Util.getGuideDsplyFormat=function(t){if(__util.isEmpty(t)!==true){var a=t.split("\n");var r="";for(var i=0,s=a.length;i<s;i++){if(__util.isEmpty(a[i])!==true){r+="<p>"+a[i]+"</p>";}}return r;}else{return"";}};MELON.CMTPGN.Util.getHighlightDsplyFormat=function(o,s,h){var r=new RegExp("("+s+")","gi");return o.replace(r,"<"+h+' class="text_search">$1</'+h+">");};MELON.CMTPGN.Util.getHighlightNameFormat=function(o,s){var r=new RegExp("("+s+")","gi");var f=o.replace(r,'<strong class="text_search">$1</strong>');__util.log("getHighlightNameFormat, f=["+f+"]");var m='<strong class="text_search">'+s+"</strong>";var re=new RegExp(m);var match=f.match(re);var t="";if(__util.isEmpty(match)!==true&&match.length>0){__util.log("getHighlightNameFormat, match.length=["+match.length+"], match is",match);for(var i=0;i<match.length;i++){t+='<span class="txt">'+f.substring(0,f.indexOf(m))+"</span>"+m;f=f.substring(f.indexOf(m)+m.length,f.length);}__util.log("getHighlightNameFormat, matched, t=["+t+"], f=["+f+"]");if(__util.isEmpty(f)!==true){t=t+'<span class="txt">'+f+"</span>";}__util.log("getHighlightNameFormat, result, t=["+t+"], remain f=["+f+"]");}else{t=f;}return t;};MELON.CMTPGN.Util.getCmtTextEditFormat=function(s,useHtml){if(__util.isEmpty(s)!==true){s=s.replace(/\s*/,"");s=s.replace(/\s+$/,"");s=__util.getXssFilterText(s);s=s.replace(/\r\n/g,"\n");s=s.replace(/\n/g,"\\n");if(__util.isDefined(useHtml)===true&&useHtml==true){s=$("<div/>").html(s).html();}s=s.replace(/\\n/g,"\n");return s;}else{return"";}};MELON.CMTPGN.Util.getCmtTextDsplyFormat=function(s){if(__util.isEmpty(s)!==true){s=s.replace(/\s*/,"");s=s.replace(/\s+$/,"");s=__util.getXssFilterText(s);return s;}else{return"";}};MELON.CMTPGN.Util.getBreakWordCheckFormat=function(s){return s;};MELON.CMTPGN.Util.getTextSize=function(text){if(__util.isEmpty(text)===true){return 0;}if(__global.C_TEXT_ELLIPSE_BY_BYTE===true){var l=0;for(var i=0,len=text.length;i<len;i++){l+=(text.charCodeAt(i)>255)?2:1;}return l;}else{return text.length;}};MELON.CMTPGN.Util.getTextByte=function(value){var l=0;for(var i=0,len=value.length;i<len;i++){l+=(value.charCodeAt(i)>255)?2:1;}return l;};MELON.CMTPGN.Util.findEllipseCutOffset=function(text,length){if(__util.isEmpty(text)===true){return 0;}if(__global.C_TEXT_ELLIPSE_BY_BYTE===true){var str=text,l=0,len=0,i=0;for(i=0,len=str.length;i<len;i++){l+=(str.charCodeAt(i)>255)?2:1;if(l>length){return i;}}return i;}else{return(text.length>length?length:text.length);}};MELON.CMTPGN.Util.findLineBreakOffset=function(text,lines){var testLineCount=__util.getTextDsplyLines(text);if(testLineCount>lines){while(testLineCount>lines){text=text.substring(0,text.length-1);testLineCount=__util.getTextDsplyLines(text);}}return text.length;};MELON.CMTPGN.Util.getEditAreaRect=function(templateType,textareaType,dummyLevel){var rect={width:0,height:0};switch(templateType){case __global.C_TEMPLATE_TYPE_PC_SUMRY:switch(textareaType){case __global.C_TEXTAREA_TYPE_LARGE:switch(dummyLevel){case __global.C_TEXT_DUMMY_LEVEL_WRITE:rect.width=796-16;rect.height=35;break;case __global.C_TEXT_DUMMY_LEVEL_MODIFY:rect.width=636-16;rect.height=35;break;default:rect.width=636+16;rect.height=0;break;}break;case __global.C_TEXTAREA_TYPE_MEDIUM:switch(dummyLevel){case __global.C_TEXT_DUMMY_LEVEL_WRITE:rect.width=510;rect.height=35;break;case __global.C_TEXT_DUMMY_LEVEL_MODIFY:rect.width=337;rect.height=35;break;default:rect.width=433+16;rect.height=0;break;}break;case __global.C_TEXTAREA_TYPE_SMALL:switch(dummyLevel){case __global.C_TEXT_DUMMY_LEVEL_WRITE:rect.width=370-16;rect.height=61;break;case __global.C_TEXT_DUMMY_LEVEL_MODIFY:rect.width=370-16;rect.height=50;break;default:rect.width=370-32;rect.height=0;break;}break;default:break;}break;case __global.C_TEMPLATE_TYPE_PC_LIST:switch(textareaType){case __global.C_TEXTAREA_TYPE_LARGE:switch(dummyLevel){case __global.C_TEXT_DUMMY_LEVEL_WRITE:rect.width=796-16;rect.height=35;break;case __global.C_TEXT_DUMMY_LEVEL_MODIFY:rect.width=796-16;rect.height=35;break;default:break;}break;case __global.C_TEXTAREA_TYPE_MEDIUM:switch(dummyLevel){case __global.C_TEXT_DUMMY_LEVEL_WRITE:rect.width=609-16;rect.height=35;break;case __global.C_TEXT_DUMMY_LEVEL_MODIFY:rect.width=609-16;rect.height=35;break;default:break;}break;case __global.C_TEXTAREA_TYPE_SMALL:switch(dummyLevel){case __global.C_TEXT_DUMMY_LEVEL_WRITE:rect.width=370-16;rect.height=61;break;case __global.C_TEXT_DUMMY_LEVEL_MODIFY:rect.width=370-16;rect.height=50;break;default:break;}break;default:break;}break;case __global.C_TEMPLATE_TYPE_MOBLE_WRITE:switch(dummyLevel){case __global.C_TEXT_DUMMY_LEVEL_WRITE:rect.width=370-16;rect.height=61;break;case __global.C_TEXT_DUMMY_LEVEL_MODIFY:rect.width=370-16;rect.height=50;break;default:break;}break;case __global.C_TEMPLATE_TYPE_MOBLE_LIST:switch(textareaType){case __global.C_TEXTAREA_TYPE_LARGE:switch(dummyLevel){case __global.C_TEXT_DUMMY_LEVEL_WRITE:rect.width=796-16;rect.height=35;break;case __global.C_TEXT_DUMMY_LEVEL_MODIFY:rect.width=796-16;rect.height=35;break;default:break;}break;case __global.C_TEXTAREA_TYPE_MEDIUM:switch(dummyLevel){case __global.C_TEXT_DUMMY_LEVEL_WRITE:rect.width=609-16;rect.height=35;break;case __global.C_TEXT_DUMMY_LEVEL_MODIFY:rect.width=609-16;rect.height=35;break;default:break;}break;case __global.C_TEXTAREA_TYPE_SMALL:switch(dummyLevel){case __global.C_TEXT_DUMMY_LEVEL_WRITE:rect.width=370-16;rect.height=61;break;case __global.C_TEXT_DUMMY_LEVEL_MODIFY:rect.width=370-16;rect.height=50;break;default:break;}break;default:rect.width=260-16;rect.height=35;break;}break;default:break;}__util.log("__util.getEditAreaRect using templateType=["+templateType+"], textareaType=["+textareaType+"], dummyLevel=["+dummyLevel+"], RECT.width=["+rect.width+"], RECT.height=["+rect.height+"]");return rect;};MELON.CMTPGN.Util.getAdcmtInputWidth=function(templateType,textareaType){var width=0;switch(templateType){case __global.C_TEMPLATE_TYPE_PC_SUMRY:switch(textareaType){case __global.C_TEXTAREA_TYPE_LARGE:width=540;break;case __global.C_TEXTAREA_TYPE_MEDIUM:width=269;break;case __global.C_TEXTAREA_TYPE_SMALL:width=240;break;default:break;}break;case __global.C_TEMPLATE_TYPE_PC_LIST:switch(textareaType){case __global.C_TEXTAREA_TYPE_LARGE:width=705;break;case __global.C_TEXTAREA_TYPE_MEDIUM:width=425;break;case __global.C_TEXTAREA_TYPE_SMALL:width=325;break;default:break;}break;default:break;}__util.log("__util.getAdcmtInputWidth using templateType=["+templateType+"], textareaType=["+textareaType+"], width=["+width+"]");return width;};MELON.CMTPGN.Util.getAtachMultipleArtistDsplyMaxWidth=function(templateType,textareaType,atachType){var width=0;switch(templateType){case __global.C_TEMPLATE_TYPE_PC_SUMRY:switch(textareaType){case __global.C_TEXTAREA_TYPE_LARGE:switch(atachType){case __global.C_ATACH_TYPE_MUSIC_SONG:width=270;break;case __global.C_ATACH_TYPE_MUSIC_ALBUM:width=270;break;case __global.C_ATACH_TYPE_VIDEO:width=280;break;}break;case __global.C_TEXTAREA_TYPE_MEDIUM:switch(atachType){case __global.C_ATACH_TYPE_MUSIC_SONG:width=140;break;case __global.C_ATACH_TYPE_MUSIC_ALBUM:width=140;break;case __global.C_ATACH_TYPE_VIDEO:width=140;break;}break;case __global.C_TEXTAREA_TYPE_SMALL:switch(atachType){case __global.C_ATACH_TYPE_MUSIC_SONG:width=95;break;case __global.C_ATACH_TYPE_MUSIC_ALBUM:width=200;break;case __global.C_ATACH_TYPE_VIDEO:width=200;break;}break;default:break;}break;case __global.C_TEMPLATE_TYPE_PC_LIST:switch(textareaType){case __global.C_TEXTAREA_TYPE_LARGE:switch(atachType){case __global.C_ATACH_TYPE_MUSIC_SONG:width=270;break;case __global.C_ATACH_TYPE_MUSIC_ALBUM:width=580;break;case __global.C_ATACH_TYPE_VIDEO:width=500;break;}break;case __global.C_TEXTAREA_TYPE_MEDIUM:switch(atachType){case __global.C_ATACH_TYPE_MUSIC_SONG:width=210;break;case __global.C_ATACH_TYPE_MUSIC_ALBUM:width=420;break;case __global.C_ATACH_TYPE_VIDEO:width=380;break;}break;case __global.C_TEXTAREA_TYPE_SMALL:switch(atachType){case __global.C_ATACH_TYPE_MUSIC_SONG:width=95;break;case __global.C_ATACH_TYPE_MUSIC_ALBUM:width=200;break;case __global.C_ATACH_TYPE_VIDEO:width=200;break;}break;default:break;}break;default:break;}__util.log("__util.getAtachMultipleArtistDsplyMaxWidth using templateType=["+templateType+"], textareaType=["+textareaType+"], atachType=["+atachType+"], width=["+width+"]");return width;};MELON.CMTPGN.Util.setDummyTextAreaRect=function(templateType,textareaType,dummyLevel){var textareaRect=__util.getEditAreaRect(templateType,textareaType,dummyLevel);var $dummyArea=$("#"+__config.C_CMT_DUMMY_TEXTAREA_NAME);if(Number($dummyArea.width())!==textareaRect.width){$dummyArea.width(textareaRect.width);}};MELON.CMTPGN.Util.getTextDsplyLines=function(text){var $dummyArea=$("#"+__config.C_CMT_DUMMY_TEXTAREA_NAME);$dummyArea.val(text);var lineHeight=parseInt($dummyArea.css("lineHeight"),10);if(isNaN(lineHeight)){lineHeight=10.5;}var scrollHeight=document.getElementById(__config.C_CMT_DUMMY_TEXTAREA_NAME).scrollHeight;var textLines=Math.floor(document.getElementById(__config.C_CMT_DUMMY_TEXTAREA_NAME).scrollHeight/lineHeight);$dummyArea.val("");return textLines;};MELON.CMTPGN.Util.getCmtSumryDsplyInfo=function(templateType,textareaType,cmtCont){if(__util.isEmpty(cmtCont)===true){return{dsplyText:"",expandBtn:false};}cmtCont=__util.getCmtTextEditFormat(cmtCont,true);__util.setDummyTextAreaRect(templateType,textareaType,__global.C_TEXT_DUMMY_LEVEL_DSPLY);var physicalLineTexts=cmtCont.split("\n");var testLineTexts=[];var testLineSize=(physicalLineTexts.length>__global.C_CMT_TEXT_DSPLY_LINES?physicalLineTexts.length:__global.C_CMT_TEXT_DSPLY_LINES);var testText="";for(var i=0,physicalLineSize=physicalLineTexts.length;i<testLineSize;i++){testText=physicalLineTexts[i];__util.log("__util.getCmtSumryDsplyInfo testText["+(i)+"]=["+testText+"]");if(__util.isEmpty(testText)===true){testLineTexts.push("\n");}else{testLineTexts.push(testText+"\n");}}var logicalText=testLineTexts.join("");var offsetLength=__util.findLineBreakOffset(logicalText,__global.C_CMT_TEXT_DSPLY_LINES);var offsetText=logicalText.substring(0,offsetLength);__util.log("__util.getCmtSumryDsplyInfo fullText=["+cmtCont+"]");__util.log("__util.getCmtSumryDsplyInfo logicalText=["+logicalText+"]");__util.log("__util.getCmtSumryDsplyInfo offsetText=["+offsetText+"]");__util.log("__util.getCmtSumryDsplyInfo fullLength=["+cmtCont.length+"], logicalLength=["+logicalText.length+"], offsetLength=["+offsetLength+"]");var ellipseText,expandFlag;if(cmtCont.length<=logicalText.length&&cmtCont.length<=offsetText.length){ellipseText=cmtCont.split("\n").join("<br />");expandFlag=false;__util.log("__util.getCmtSumryDsplyInfo USING origText");}else{ellipseText=offsetText.substring(0,offsetText.length).split("\n").join("<br />");expandFlag=true;__util.log("__util.getCmtSumryDsplyInfo USING ellipseText");}if(expandFlag===true){ellipseText=ellipseText+__global.C_TEXT_ELLIPSE_TEXT_TAIL;}return{expandBtn:expandFlag,dsplyText:ellipseText};};MELON.CMTPGN.Util.getCmtSumryDsplyText=function(cmtCont){var textSize=__util.getTextSize(cmtCont);var ellipseCutBase=160;var ellipseCutOffset=__util.findEllipseCutOffset(cmtCont,ellipseCutBase);__util.log("__util.getCmtSumryDsplyText textSize=["+textSize+"], ellipseCutOffset=["+ellipseCutOffset+"], ellipseCutBase=["+ellipseCutBase+"]");if(textSize>ellipseCutBase){return cmtCont.substring(0,ellipseCutOffset)+__global.C_TEXT_ELLIPSE_TEXT_TAIL;}else{return cmtCont;}};MELON.CMTPGN.Util.getCmtSumryTitleText=function(cmtCont){if(__util.isEmpty(cmtCont)===true){return"";}cmtCont=__util.getCmtTextEditFormat(cmtCont,true);var texts=cmtCont.split("\n");if(__util.isDefined(texts.length)&&texts.length>0){return texts[0];}else{return cmtCont;}};MELON.CMTPGN.Util.adjustMultipleArtistDsply=function($target){var $multiartists=$target.find(".d_cmtpgn_multiartist_ellipsis_tester");setTimeout(function(){$multiartists.each(function(index){if($(this).closest(".ellipsis").is("div")){__util.log("adjustMultipleArtistDsply() d_cmtpgn_multiartist_ellipsis_tester IN, html=["+($(this).html())+"], width=["+($(this).width())+"], p-width=["+($(this).closest("div").width())+"], target=["+($(this).closest("div").next().is(".d_cmtpgn_multiple_artist"))+"]");if($(this).width()>$(this).closest("div").width()){$(this).closest("div").next(".d_cmtpgn_multiple_artist").css("display","inline");}}else{__util.log("adjustMultipleArtistEdit() d_cmtpgn_multiartist_ellipsis_tester IN, html=["+($(this).html())+"], width=["+($(this).width())+"], p-width=["+($(this).parent().width())+"], target=["+($(this).parent().next().is(".d_cmtpgn_multiple_artist"))+"]");if($(this).width()>$(this).parent().width()){$(this).parent().next(".d_cmtpgn_multiple_artist").css("display","inline");}}});},0);};MELON.CMTPGN.Util.adjustCmtAtachText=function($target){__util.adjustMultipleArtistDsply($target);$target.find(".d_cmtpgn_multiline_ellipsis").multilineEllipsis(__global.C_ATACH_TITLE_DSPLY_LINES);};MELON.CMTPGN.Util.setSpamTimer=function(time){__util.log("@__util.setSpamTimer() executed. time=["+time+"]");if(Number(time)>0){__util.setCookie(__global.C_TIMER_COOKIE_NAME,new Date().getTime());__util.log("__util.setSpamTimer() setted. C_TIMER_COOKIE_NAME=["+__global.C_TIMER_COOKIE_NAME+"]=["+__util.getCookie(__global.C_TIMER_COOKIE_NAME)+"]");}__util.log("@__util.setSpamTimer() executed done.");};MELON.CMTPGN.Util.checkSpamTimer=function(time){__util.log("@__util.checkSpamTimer() executed. time=["+time+"]");if(Number(time)>0){var duration=(Number(time)*60*1000);var timer=__util.getCookie(__global.C_TIMER_COOKIE_NAME);var current=new Date().getTime();__util.log("__util.checkSpamTimer() checked. timer=["+__global.C_TIMER_COOKIE_NAME+"]=["+timer+"] vs current=["+current+"]");if(timer&&duration>0){var diff=current-timer;var remain=duration-diff;__util.log("__util.checkSpamTimer() alerted. 재등록시간 제한=["+duration+" ms] vs 잔여=["+remain+" ms, "+(Math.round(remain/(60*1000)))+" min]");if(remain>0){alert(__util.format(__msg.MW003,time));return false;}}}__util.log("@__util.checkSpamTimer() executed done.");return true;};MELON.CMTPGN.Util.getImageUploadName=function(sourceFileName){__util.log("@__util.getImageUploadName() executed.");var now=new Date();var h=now.getHours(),hh=h<10?"0"+h:h,m=now.getMinutes(),mm=m<10?"0"+m:m,s=now.getSeconds(),ss=s<10?"0"+s:s,ms=now.getMilliseconds(),mss=ms<10?"000"+ms:(ms<100?"00"+ms:(ms<1000?"0"+ms:ms));var fileNameFormat="hhmmss_ms";var targetFileName=fileNameFormat.replace(/hh/g,hh).replace(/mm/g,mm).replace(/ss/g,ss).replace(/ms/g,mss)+"."+sourceFileName.substr(sourceFileName.lastIndexOf(".")+1);__util.log("@__util.getImageUploadName() executed done. targetFileName=["+targetFileName+"]");return targetFileName;};MELON.CMTPGN.Util.getImageUploadPath=function(memberKey){__util.log("@__util.getImageUploadPath() executed. memberKey=["+memberKey+"]");var now=new Date();var yyyy=now.getFullYear(),M=now.getMonth()+1,MM=M<10?"0"+M:M,d=now.getDate(),dd=d<10?"0"+d:d;var datePathFormat="yyyyMMdd";var datePath=datePathFormat.replace(/yyyy/g,yyyy).replace(/MM/g,MM).replace(/dd/g,dd);__util.log("__util.getImageUploadPath() executed. datePath=["+datePath+"]");var memberPath="";if(memberKey.length>5){memberPath=memberKey.substring(memberKey.length-5);}else{if(memberKey.length>4){memberPath="0"+memberKey.substring(memberKey.length-4);}else{if(memberKey.length>3){memberPath="00"+memberKey.substring(memberKey.length-3);}else{if(memberKey.length>2){memberPath="000"+memberKey.substring(memberKey.length-2);}else{if(memberKey.length>1){memberPath="0000"+memberKey.substring(memberKey.length-1);}else{memberPath="00000";}}}}}__util.log("__util.getImageUploadPath() executed. memberPath=["+memberPath+"]");var memberPrePath=memberPath.substring(0,3),memberPostPath=memberPath.substring(3,5);__util.log("__util.getImageUploadPath() executed. memberPrePath=["+memberPrePath+"], memberPrePath=["+memberPostPath+"]");var targetFilePath="/"+datePath+"/"+memberPrePath+"/"+memberPostPath;__util.log("__util.getImageUploadPath() executed done. targetFilePath=["+targetFilePath+"]");return targetFilePath;};MELON.CMTPGN.Util.isDefined=function(value){return typeof value!=="undefined";};MELON.CMTPGN.Util.isArray=Array.isArray||function(value){return value&&!!value.push;};MELON.CMTPGN.Util.isEmpty=function(value,input){if(__util.isDefined(input)===true&&__util.isDefined(MELON.WEBSVC.tmpInput)===true&&!("placeholder" in MELON.WEBSVC.tmpInput)){return(value===undefined)||(value===null)||(value==="")||(__util.isArray(value)&&value.length===0)||($(input).attr("placeholder")===$(input).val());}else{return(value===undefined)||(value===null)||(value==="")||(__util.isArray(value)&&value.length===0);}};MELON.CMTPGN.Util.isString=function(value){return typeof value==="string";};MELON.CMTPGN.Util.isBoolean=function(value){return typeof value==="boolean";};MELON.CMTPGN.Util.isElement=function(value){return value?value.nodeType===1:false;};MELON.CMTPGN.Util.isTextNode=function(value){return value?value.nodeName==="#text":false;};MELON.CMTPGN.Util.addComma=function(value){value+="";var x=value.split("."),x1=x[0],x2=x.length>1?"."+x[1]:"",re=/(\d+)(\d{3})/;while(re.test(x1)){x1=x1.replace(re,"$1,$2");}return x1+x2;};MELON.CMTPGN.Util.replaceAll=function(value,find,rep){if(find.constructor===RegExp){return value.replace(new RegExp(find.toString().replace(/^\/|\/$/gi,""),"gi"),rep);}return value.split(find).join(rep);};MELON.CMTPGN.Util.toArray=function(value){return Array.prototype.slice.apply(value,Array.prototype.slice.call(arguments,1));};MELON.CMTPGN.Util.format=function(format){var args=__util.toArray(arguments).slice(1);return format.replace(/\{([0-9]+)\}/g,function(m,i){return args[i];});};MELON.CMTPGN.Util.setCookie=function(name,value,options){options=options||(options={});var curCookie=name+"="+window.escape(value)+((options.expires)?"; expires="+options.expires.toGMTString():"")+((options.path)?"; path="+options.path:"")+((options.domain)?"; domain="+options.domain:"")+((options.secure)?"; secure":"");window.document.cookie=curCookie;};MELON.CMTPGN.Util.getCookie=function(name){var j,g,h,f;j=";"+window.document.cookie.replace(/ /g,"")+";";g=";"+name+"=";h=j.indexOf(g);if(h!==-1){h+=g.length;f=j.indexOf(";",h);return window.unescape(j.substr(h,f-h));}return"";};MELON.CMTPGN.Util.removeCookie=function(name){window.document.cookie=name+"=;expires=Fri, 31 Dec 1987 23:59:59 GMT;";};MELON.CMTPGN.Util.parseUrl=function(s){if(__util.isDefined(s)&&s.length>2&&s[0]==="/"&&s[1]==="/"){s=window.location.protocol+s;}else{if(__util.isDefined(s)){s=s;}else{s=window.location.href;}}var o={strictMode:false,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/\/?)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}};var m=o.parser[o.strictMode?"strict":"loose"].exec(s),uri={},i=14;while(i--){uri[o.key[i]]=m[i]||"";}var retArr={};if(uri.protocol!==""){retArr.scheme=uri.protocol;}if(uri.host!==""){retArr.host=uri.host;}if(uri.port!==""){retArr.port=uri.port;}if(uri.user!==""){retArr.user=uri.user;}if(uri.password!==""){retArr.pass=uri.password;}if(uri.path!==""){retArr.path=uri.path;}if(uri.query!==""){retArr.query=uri.query;}if(uri.anchor!==""){retArr.fragment=uri.anchor;}return retArr;};MELON.CMTPGN.Util.parseQuery=function(query){if(!query){return{};}if(query.length>0&&query.indexOf("?")>0){query=query.substr(query.indexOf("?")+1);}var params=(query+"").split("&");var obj={};var params_length=0,tmp="",x=0;params_length=params.length;for(x=0;x<params_length;x++){tmp=params[x].split("=");obj[window.unescape(tmp[0])]=window.unescape(tmp[1]).replace(/[+]/g," ");}return obj;};MELON.CMTPGN.Util.popupCoords=function(w,h){var wLeft=window.screenLeft?window.screenLeft:window.screenX,wTop=window.screenTop?window.screenTop:window.screenY,wWidth=window.outerWidth?window.outerWidth:window.document.documentElement.clientWidth,wHeight=window.outerHeight?window.outerHeight:window.document.documentElement.clientHeight;return{left:wLeft+(wWidth/2)-(w/2),top:wTop+(wHeight/2)-(h/2)-25};};MELON.CMTPGN.Util.openPopup=function(url,name,width,height,opts){opts=$.extend({menubar:"no",toolbar:"no",resizable:"yes",scrollbars:"yes"},opts);width=width||600;height=height||400;var winCoords=__util.popupCoords(width,height);window.open(url,name,"app_,menubar="+opts.menubar+",toolbar="+opts.toolbar+",resizable="+opts.resizable+",scrollbars="+opts.scrollbars+",location=yes,height="+height+",width="+width+",top="+winCoords.top+",left="+winCoords.left);};MELON.CMTPGN.Util.buildResourcePath=function(host,path,item,ext){host=$.trim(host);path=$.trim(path);item=$.trim(item);ext=$.trim(ext);__util.log("buildResourcePath in host=["+host+"], path=["+path+"], item=["+item+"], ext=["+ext+"]");function isAbsolute(s){return(s.search(/^[a-z]+:\/\//)===0)||(s.search(/^\//)===0);}if(isAbsolute(item)!==true){item="/"+item;}if(ext.length>0&&item.lastIndexOf("."+ext)!==(item.length-ext.length-1)){item+="."+ext;}if(isAbsolute(path)!==true){path="/"+path;}if(host.length>0&&!host.match(/\/$/)){host=__util.removeUrlSheme(host);}__util.log("buildResourcePath out host+path+item+ext=["+host+path+item+"]");return host+path+item;};MELON.CMTPGN.Util.removeUrlSheme=function(url){if(url!==null&&__util.isDefined(url)){url=(url.search(/^[a-z]+:\/\//)===0)?url.replace(/^[a-z]+:/,""):url;}return url;};MELON.CMTPGN.Util.resetUriSchemeFromLocation=function(url){if(url!==null&&__util.isDefined(url)){if(url.search(/^[a-z]+:\/\//)===0){url=url.replace(/^[a-z]+:/,window.location.protocol);}else{if(url.search(/^\/\//)===0){url=window.location.protocol+url;}}}return url;};MELON.CMTPGN.Util.validUrl=function(str){return(str=$.trim(str))?(/^https?:\/\/([\w\-]+\.)+/).test(str):false;};MELON.CMTPGN.Util.textLength=function(str){return(str||"").length;};__global.C_REQUEST_HANDLER=[];__global.C_STATUS_SUCCESS="0";__global.C_STATUS_FAIL="1";__global.C_STATUS_TIMEOUT="999";__global.C_ERROR_CODE_SUCCESS="200";__global.C_ERROR_CODE_INVALID_REQUEST="400";__global.C_ERROR_CODE_NEED_LOGIN="401";__global.C_ERROR_CODE_NO_AUTHORITY="403";__global.C_ERROR_CODE_NOT_FOUND="404";__global.C_ERROR_CODE_INVALID_TOKEN="405";__global.C_ERROR_CODE_INTERNAL_ERROR="500";__global.C_EMPTY_KEY=-1;__global.C_TEMPLATE_TYPE_PC_SUMRY="pc-summary-type";__global.C_TEMPLATE_TYPE_PC_LIST="pc-list-type";__global.C_TEMPLATE_TYPE_MOBLE_LIST="mobile-list-page";__global.C_TEMPLATE_TYPE_MOBLE_VIEW="mobile-view-page";__global.C_TEMPLATE_TYPE_MOBLE_WRITE="mobile-write-page";__global.C_PAGE_TYPE_GENERIC="generic-page";__global.C_PAGE_TYPE_SONG="song-page";__global.C_PAGE_TYPE_PHOTO="photo-page";__global.C_PAGE_TYPE_GUESTBOOK="guestbook-page";__global.C_TEXTAREA_TYPE_LARGE="large-size";__global.C_TEXTAREA_TYPE_MEDIUM="medium-size";__global.C_TEXTAREA_TYPE_SMALL="small-size";__global.C_TABLE_HEADER_TYPE_MAX="max";__global.C_TABLE_HEADER_TYPE_MID="mid";__global.C_TABLE_HEADER_TYPE_MIN="min";__global.C_TABLE_COLSPAN_SIZE_MAP=[];__global.C_TABLE_COLSPAN_SIZE_MAP.max=7;__global.C_TABLE_COLSPAN_SIZE_MAP.mid=6;__global.C_TABLE_COLSPAN_SIZE_MAP.min=5;__global.C_TEXT_DUMMY_LEVEL_WRITE=1;__global.C_TEXT_DUMMY_LEVEL_MODIFY=2;__global.C_TEXT_DUMMY_LEVEL_DSPLY=3;__global.C_TIMER_COOKIE_NAME="TIMERCOOKIE";__global.C_ATACH_ALLOW_EXT_LIST=["png","jpg","jpeg","gif"];__global.C_SITE_URL_TITLE_MAP=[];__global.C_SITE_URL_TITLE_MAP["www.youtube.com"]="YouTube";__global.C_SITE_URL_TITLE_MAP["m.youtube.com"]="YouTube";__global.C_SITE_URL_TITLE_MAP["youtube.com"]="YouTube";__global.C_SITE_URL_TITLE_MAP["youtu.be"]="YouTube";__global.C_SITE_NAME_MAP=[];__global.C_SITE_NAME_MAP.facebook="페이스북";__global.C_SITE_NAME_MAP.twitter="트위터";__global.C_SITE_NAME_MAP.cyworld="싸이월드";__global.C_SITE_NAME_MAP.nateon="네이트온";__global.C_SITE_NAME_MAP.youtube="유튜브";__global.C_CHNL_SNS_PAGE_MAP=[];__global.C_CHNL_SNS_PAGE_MAP["101"]="art";__global.C_CHNL_SNS_PAGE_MAP["102"]="alb";__global.C_CHNL_SNS_PAGE_MAP["103"]="son";__global.C_CHNL_SNS_PAGE_MAP["104"]="mvd";__global.C_CHNL_SNS_PAGE_MAP["105"]="pht";__global.C_CHNL_SNS_PAGE_MAP["302"]="oab";__global.C_CHNL_SNS_PAGE_MAP["303"]="oab";__global.C_CHNL_SNS_PAGE_MAP["304"]="ply";__global.C_CHNL_SNS_PAGE_MAP["305"]="apl";__global.C_CHNL_SNS_PAGE_MAP["501"]="mus";__global.C_CMT_INITIAL_TOTAL_CNT=-1;__global.C_CMT_INITIAL_VALID_CNT=-1;__global.C_CMT_INITIAL_START_SEQ=-1;__global.C_CMT_INITIAL_PAGE_SIZE=-1;__global.C_CMT_SORT_TYPE_RECENT=0;__global.C_CMT_SORT_TYPE_RECM=1;__global.C_CMT_SORT_TYPE_ADCMT=2;__global.C_CMT_SRCH_TYPE_NONE=0;__global.C_CMT_SRCH_TYPE_MEMBER=1;__global.C_CMT_SRCH_TYPE_CONTS=2;__global.C_CMT_MIN_SRCH_WORD=1;__global.C_CMT_MAX_SRCH_WORD=100;__global.C_CMT_DFLT_PAGE_NO=1;__global.C_CMT_DFLT_SORT_TYPE=__global.C_CMT_SORT_TYPE_RECENT;__global.C_CMT_DFLT_SRCH_TYPE=__global.C_CMT_SRCH_TYPE_CONTS;__global.C_CMT_DFLT_SRCH_WORD="";__global.C_ALBUM_DFLT_SRCH_IMG="//cdnimg.melon.co.kr/resource/image/web/default/noAlbum_500_160727.jpg/melon/resize/50";__global.C_ARTIST_DFLT_SRCH_IMG="//cdnimg.melon.co.kr/resource/image/web/default/noArtist_300_160727.jpg/melon/resize/50";__global.C_VIDEO_DFLT_SRCH_IMG="//cdnimg.melon.co.kr/resource/image/web/default/noMovie_16x9_640_160727.jpg/melon/resize/100";__global.C_ALBUM_DFLT_DSPLY_IMG="//cdnimg.melon.co.kr/resource/image/web/default/noAlbum_500_160727.jpg/melon/resize/100";__global.C_ARTIST_DFLT_DSPLY_IMG="//cdnimg.melon.co.kr/resource/image/web/default/noArtist_300_160727.jpg/melon/resize/100";__global.C_VIDEO_DFLT_DSPLY_IMG="//cdnimg.melon.co.kr/resource/image/web/default/noMovie_16x9_640_160727.jpg/melon/resize/200";__global.C_PHOTO_DFLT_DSPLY_IMG="//cdnimg.melon.co.kr/resource/image/web/default/noAlbum_500_160727.jpg/melon/resize/200";__global.C_MYPAGE_DFLT_DSPLY_IMG="//cdnimg.melon.co.kr/resource/image/cmt/web/common/noArtist02_300.jpg/melon/resize/120";__global.C_MOBILE_VIDEO_DFLT_SRCH_IMG="//cdnimg.melon.co.kr/resource/image/cds/comment/mobile2/thumb_music_default_03.jpg";__global.C_MOBILE_VIDEO_DFLT_DSPLY_IMG="//cdnimg.melon.co.kr/resource/image/cds/comment/mobile2/thumb_music_default_03.jpg";__global.C_MOBILE_ALBUM_DFLT_SRCH_IMG="//cdnimg.melon.co.kr/resource/image/cds/comment/mobile2/thumb_music_default.jpg";__global.C_MOBILE_ALBUM_DFLT_DSPLY_IMG="//cdnimg.melon.co.kr/resource/image/cds/comment/mobile2/thumb_music_default.jpg";__global.C_MOBILE_ARTIST_DFLT_SRCH_IMG="//cdnimg.melon.co.kr/resource/image/cds/comment/mobile2/thumb_default_02.jpg";__global.C_MOBILE_ARTIST_DFLT_DSPLY_IMG="//cdnimg.melon.co.kr/resource/image/cds/comment/mobile2/thumb_default_02.jpg";__global.C_CMT_TEXT_DSPLY_LINES=21;__global.C_ATACH_TITLE_DSPLY_LINES=2;__global.C_ATACH_SUBTITLE_DSPLY_LINES=1;__global.C_TEXT_ELLIPSE_BY_BYTE=true;__global.C_TEXT_ELLIPSE_TEXT_TAIL=" ..";__global.C_ATACH_TYPE_TEXT="text";__global.C_ATACH_TYPE_MUSIC="music";__global.C_ATACH_TYPE_MUSIC_SONG="music_song";__global.C_ATACH_TYPE_MUSIC_ALBUM="music_album";__global.C_ATACH_TYPE_MUSIC_ARTIST="music_artist";__global.C_ATACH_TYPE_IMAGE="image";__global.C_ATACH_TYPE_VIDEO="video";__global.C_ATACH_TYPE_LINK="link";__global.C_ATACH_TYPE_LINK_VIDEO="link_video";__global.C_ATACH_TYPE_LINK_GENRL="link_genrl";__global.C_ATACH_MELON_SRCH_TYPE_SONG="song";__global.C_ATACH_MELON_SRCH_TYPE_ALBUM="album";__global.C_ATACH_MELON_SRCH_TYPE_ARTIST="artist";__global.C_ATACH_MELON_SRCH_TYPE_VIDEO="video";__global.C_ATACH_MELON_SORT_TYPE_RATE=0;__global.C_ATACH_MELON_SORT_TYPE_POPULAR=1;__global.C_ATACH_MELON_SORT_TYPE_RECENT=2;__global.C_ATACH_MELON_SORT_TYPE_NAME=3;__global.C_ATACH_MELON_SRCH_TYPE_SONG_INITIAL_SORT_TYPE=__global.C_ATACH_MELON_SORT_TYPE_RATE;__global.C_ATACH_MELON_SRCH_TYPE_ALBUM_INITIAL_SORT_TYPE=__global.C_ATACH_MELON_SORT_TYPE_RECENT;__global.C_ATACH_MELON_SRCH_TYPE_ARTIST_INITIAL_SORT_TYPE=__global.C_ATACH_MELON_SORT_TYPE_RATE;__global.C_ATACH_MELON_SRCH_TYPE_VIDEO_INITIAL_SORT_TYPE=__global.C_ATACH_MELON_SORT_TYPE_RATE;__global.C_ATACH_MELON_DSPLY_SUGGEST_SIZE=10;__global.C_ATACH_MELON_DSPLY_SUGGEST_AR_SIZE=3;__global.C_ATACH_MELON_DSPLY_SUGGEST_SO_SIZE=3;__global.C_ATACH_MELON_DSPLY_SUGGEST_AL_SIZE=2;__global.C_ATACH_MELON_DSPLY_PAGE_SIZE=5;__global.C_ATACH_MELON_DSPLY_GROUP_SIZE=5;__global.C_ATACH_MELON_DFLT_PAGE_NO=1;__global.C_ATACH_MELON_MIN_SRCH_WORD=1;__global.C_ATACH_MELON_MAX_SRCH_WORD=100;__global.C_MELON_LANDING_TYPE_SONG_PAGE="song-page-landing";__global.C_MELON_LANDING_TYPE_ALBUM_PAGE="album-page-landing";__global.C_MELON_LANDING_TYPE_ARTIST_PAGE="artist-page-landing";__global.C_MELON_LANDING_TYPE_VIDEO_PAGE="video-page-landing";__global.C_API_NAME_PGN_LOAD="pgn.load";__global.C_API_NAME_CMT_LIST="cmt.list";__global.C_API_NAME_CMT_INFORM="cmt.inform";__global.C_API_NAME_CMT_REG="cmt.reg";__global.C_API_NAME_CMT_UPDT="cmt.updt";__global.C_API_NAME_CMT_DEL="cmt.del";__global.C_API_NAME_CMT_VIEW="cmt.view";__global.C_API_NAME_ADCMT_LIST="adcmt.list";__global.C_API_NAME_ADCMT_REG="adcmt.reg";__global.C_API_NAME_ADCMT_DEL="adcmt.del";__global.C_API_NAME_RECM_REG="recm.reg";__global.C_API_NAME_RECM_CANCEL="recm.cancel";__global.C_API_NAME_REPRT_REG="reprt.reg";__global.C_API_NAME_ATACH_MELON_SRCH="atach.melon.srch";__global.C_API_NAME_ATACH_MELON_SRCH_SUGGEST="atach.melon.srch.suggest";__global.C_API_NAME_ATACH_MELON_SRCH_SUGGEST_CONTS="atach.melon.srch.suggestConts";__global.C_API_NAME_ATACH_LINK_VIDEO_OEMBED="atach.link.video.oembed";__global.C_API_NAME_ATACH_IMAGE_CDN_AUTH="atach.image.cdn.auth";var serverInfo=__util.parseUrl();__config.C_CMTPGN_VER="";__config.C_IS_LOCAL=(serverInfo.host.indexOf("local.cmt.melon.com")>-1?true:false);__config.C_IS_SECURE=(serverInfo.scheme==="https"?true:false);__config.F_GET_SCHEME=function(){return __config.C_IS_SECURE?"https://":"http://";};__config.C_CHARSET="utf-8";__config.C_AUTOMATIC=true;__config.C_MELON_HOST=__config.F_GET_SCHEME()+"www.melon.com";__config.C_CDN_UPLOAD_HOST=__config.F_GET_SCHEME()+"cmtimgup.melon.com";__config.C_CDN_DOWNLOAD_HOST=__config.F_GET_SCHEME()+"cmtimg.melon.co.kr";var phase=serverInfo.host.indexOf("-")>0?serverInfo.host.substring(0,serverInfo.host.indexOf("-")):"";var phaseHost=phase?phase+"-cmt.melon.com":"cmt.melon.com";__config.C_CMT_HOST=__config.F_GET_SCHEME()+(__config.C_IS_LOCAL?"local.cmt.melon.com":phaseHost)+(__config.C_IS_LOCAL?(__config.C_IS_SECURE?":8443":":8080"):"");__config.C_MEMBER_HOST="https://member.melon.com";__config.C_BASE_PATH="/cmt";__config.C_PLUGIN_PATH="/plugin";__config.C_PLUGIN_VERSION_PATH=(__util.isEmpty(__config.C_CMTPGN_VER)?"":"/"+__config.C_CMTPGN_VER);__config.C_TEMPLATE_PATH=__config.C_PLUGIN_VERSION_PATH+"/template";__config.C_HTML_PATH=__config.C_PLUGIN_VERSION_PATH+"/html";__config.C_API_PATH="/api";__config.C_API_V2_PATH="/v2";__config.C_API_VERSION_PATH=(__util.isEmpty(__config.C_CMTPGN_VER)?"":"/"+__config.C_CMTPGN_VER);__config.C_API_PREFIX=__config.C_API_VERSION_PATH+"/api_";__config.C_TUNNEL_HTML="melonweb_cmtpgn_tunnel.html";__config.C_TUNNEL_HTML_URL=__util.buildResourcePath(__config.C_CMT_HOST,__config.C_BASE_PATH+__config.C_PLUGIN_PATH+__config.C_TEMPLATE_PATH,__config.C_TUNNEL_HTML);__config.C_REPRT_HTML="melonweb_cmtpgn_popup_reprt.html";__config.C_REPRT_HTML_URL=__util.buildResourcePath(__config.C_CMT_HOST,__config.C_BASE_PATH+__config.C_PLUGIN_PATH+__config.C_HTML_PATH,__config.C_REPRT_HTML);__config.C_YOUTUBE_HTML="melonweb_cmtpgn_popup_youtube.html";__config.C_YOUTUBE_HTML_URL=__util.buildResourcePath(__config.C_CMT_HOST,__config.C_BASE_PATH+__config.C_PLUGIN_PATH+__config.C_HTML_PATH,__config.C_YOUTUBE_HTML);__config.C_M_IMAGE_VIEW_HTML="melonweb_cmtpgn_m_image_view.html";__config.C_M_IMAGE_VIEW_HTML_URL=__util.buildResourcePath(__config.C_CMT_HOST,__config.C_BASE_PATH+__config.C_PLUGIN_PATH+__config.C_HTML_PATH,__config.C_M_IMAGE_VIEW_HTML);__config.C_CDN_THUMBNAIL_POSTFIX="/melon/resize/192x192/";__config.C_CDN_ORIGINAL_POSTFIX="/melon/resize/496x496/";__config.C_CDN_AUTH_URL=__config.C_CDN_UPLOAD_HOST+"/auth/authhs_jsonp.php";__config.F_CDN_AUTH_URL=function(){return __util.resetUriSchemeFromLocation(__config.C_CDN_UPLOAD_HOST)+"/auth/authhs_jsonp.php";};__config.C_CDN_UPLOAD_URL=__config.C_CDN_UPLOAD_HOST+"/hs_upload_jsonp_html.php";__config.F_CDN_UPLOAD_URL=function(){return __util.resetUriSchemeFromLocation(__config.C_CDN_UPLOAD_HOST)+"/hs_upload_jsonp_html.php";};__config.C_MEMBER_LOGOUT_URL=__config.C_MEMBER_HOST+"/muid/web/logout/logout_inform.htm";__config.C_MEMBER_LOGOUT_N_LOGIN_URL=__config.C_MEMBER_LOGOUT_URL+"?returnPage=https://member.melon.com/muid/web/login/login_inform.htm";__config.C_TEMPLATE_FILE_MAP=[];__config.C_TEMPLATE_FILE_MAP[__global.C_TEMPLATE_TYPE_PC_SUMRY]=(__config.C_IS_LOCAL===true?"melonweb_cmtpgn_template_pc_sumry_type.html":"melonweb_cmtpgn_template_pc_sumry_type.js");__config.C_TEMPLATE_FILE_MAP[__global.C_TEMPLATE_TYPE_PC_LIST]=(__config.C_IS_LOCAL===true?"melonweb_cmtpgn_template_pc_list_type.html":"melonweb_cmtpgn_template_pc_list_type.js");__config.C_TEMPLATE_FILE_MAP[__global.C_TEMPLATE_TYPE_MOBLE_LIST]=(__config.C_IS_LOCAL===true?"melonweb_cmtpgn_template_mobile_list.html":"melonweb_cmtpgn_template_mobile_list.js");__config.C_TEMPLATE_FILE_MAP[__global.C_TEMPLATE_TYPE_MOBLE_VIEW]=(__config.C_IS_LOCAL===true?"melonweb_cmtpgn_template_mobile_view.html":"melonweb_cmtpgn_template_mobile_view.js");__config.C_TEMPLATE_FILE_MAP[__global.C_TEMPLATE_TYPE_MOBLE_WRITE]=(__config.C_IS_LOCAL===true?"melonweb_cmtpgn_template_mobile_write.html":"melonweb_cmtpgn_template_mobile_write.js");__config.C_MELON_LANDING_BASE_URL_MAP=[];__config.C_MELON_LANDING_BASE_URL_MAP[__global.C_MELON_LANDING_TYPE_SONG_PAGE]=__config.C_MELON_HOST+"/song/detail.htm?songId=";__config.C_MELON_LANDING_BASE_URL_MAP[__global.C_MELON_LANDING_TYPE_ALBUM_PAGE]=__config.C_MELON_HOST+"/album/detail.htm?albumId=";__config.C_MELON_LANDING_BASE_URL_MAP[__global.C_MELON_LANDING_TYPE_ARTIST_PAGE]=__config.C_MELON_HOST+"/artist/timeline.htm?artistId=";__config.C_MELON_LANDING_BASE_URL_MAP[__global.C_MELON_LANDING_TYPE_VIDEO_PAGE]=__config.C_MELON_HOST+"/video/detail.htm?mvId=";__config.C_LOADING_DELAY=1000*4;__config.C_TIMEOUT_DELAY=1000*12;__config.C_CMT_DUMMY_FORM_NAME="d_cmtpgn_dummy_form";__config.C_CMT_DUMMY_TEXTAREA_NAME="d_cmtpgn_dummy_textarea";__config.C_POC_CONTS_DOWNLOAD_AVAIL_COUNT=200;__config.C_POC_CONTS_TYPE_SONG_CODE="3C0001";__config.C_POC_CONTS_TYPE_ALBUM_CODE="3B0001";__config.C_POC_BUY_TYPE_ME_CODE=0;__config.C_POC_BUY_TYPE_ALBUM_SONG_CODE="1";__config.C_ALBUM_VA_REP_ARTIST_ID=2727;__msg.MW000="로그인 후 작성하실 수 있습니다.";__msg.MW001="로그인 후 작성하실 수 있습니다. 로그인 하시겠습니까?";__msg.MW002="글을 작성할 수 없습니다.\n서비스 운영정책이나 서비스 이용약관의 위반활동이 감지되었습니다.\n위반활동이 반복되는 경우\n가중처리될 수 있으니\n이점 유의하여 주시기 바랍니다.";__msg.MW003="죄송합니다.\n도배글 등을 방지하기 위해 {0}분간 사용이 제한됩니다.\n잠시 후 다시 시도해주시기 바랍니다.";__msg.MW004="죄송합니다.\n도배글 등을 방지하기 위해 붙여넣기를 하실 수 없습니다.";__msg.MW005="입력하신 글자 수가 초과되었습니다.";__msg.MW006="작성하신 글 중 {0} 은(는) 금칙어 입니다. 수정 후 등록해주세요.";__msg.MW007="{0}자 이상의 글을 작성해주세요.";__msg.MW008="등록이 완료되었습니다.";__msg.MW009="좋아요 반영되었습니다.";__msg.MW010="좋아요를 취소 하시겠습니까?";__msg.MW011="로그인 후 사용하실 수 있습니다. 로그인 하시겠습니까?";__msg.MW042="삭제하시겠습니까?\n다른 회원님들께서 작성하신 댓글도 함께 삭제됩니다.";__msg.MW050="이미지 용량이 너무 큽니다. {0} 이하로 등록해주세요.";__msg.MW051="이미지 파일은 {0}만 등록 가능합니다.";__msg.MW064="링크 첨부는 유튜브 영상 링크만 가능합니다.";__msg.MW065="수정을 취소하시겠습니까?";__msg.MW066="삭제하시겠습니까?";__msg.MW067="신고 내용이 접수되었습니다.";__msg.MW112="추천 되었습니다.";__msg.MW113="비추천 되었습니다.";__msg.MW114="이미 추천한 댓글입니다.";__msg.MW115="이미 비추천한 댓글입니다.";__msg.CMTPGN000="접속이 지연되고 있습니다.\n잠시 후 다시 이용해 주시기 바랍니다.\n이용에 불편을 드려 대단히 죄송합니다";__msg.CMTPGN001="첨부 가능한 설정이 아닙니다.";__msg.CMTPGN002="업로드 중 오류가 발생했습니다. 잠시후 이용해주세요.";__msg.CMTPGN003="글번호가 생성되지 않았습니다. 잠시후 이용해주세요.";__msg.CMTPGN004="첨부 실행 정보가 없습니다.";__msg.CMTPGN005="더보기 할 내용이 없습니다.";__msg.CMTPGN006="작성자가 아닙니다.";__msg.CMTPGN007="본인이 작성한 글은 추천 또는 비추천 할 수 없습니다.";__msg.CMTPGN008="본인이 작성한 글은 신고할 수 없습니다.";__msg.CMTPGN009="삭제된 글을 삭제할 수 없습니다.";__msg.CMTPGN010="삭제된 글을 삭제할 수 없습니다.";__msg.CMTPGN011="삭제된 글에는 댓글을 작성할 수 없습니다.";__msg.CMTPGN012="삭제된 글에는 댓글을 작성할 수 없습니다.";__msg.CMTPGN013="삭제된 글을 추천 또는 비추천 할 수 없습니다.";__msg.CMTPGN014="삭제된 글을 추천 또는 비추천 할 수 없습니다.";__msg.CMTPGN015="삭제된 글을 신고할 수 없습니다.";__msg.CMTPGN016="삭제된 글을 신고할 수 없습니다.";__msg.CMTPGN017="영상정보 확인이 안되는 유튜브 링크입니다.";__msg.CMTPGN018="음악 첨부된 {0} 글";__msg.CMTPGN019="사진 첨부된 {0} 글";__msg.CMTPGN020="영상 첨부된 {0} 글";__msg.CMTPGN021="링크 첨부된 {0} 글";__msg.CMTPGN998="접속이 지연되고 있습니다.\n잠시 후 다시 확인해 주시기 바랍니다.\n이용에 불편을 드려 대단히 죄송합니다";__msg.CMTPGN999="접속이 지연되고 있습니다.\n잠시 후 다시 이용해 주시기 바랍니다.\n이용에 불편을 드려 대단히 죄송합니다";__msg.CMTPGN101="검색할 항목을 선택해주세요.";__msg.CMTPGN102="검색어를 입력해주세요.";__msg.CMTPGN103="검색어는 최소 {0}자 이상 입력해주세요.";__msg.CMTPGN104="검색어는 최대 {0}자 이하 입력해주세요.";__msg.CMTPGN105="내용을 입력해주세요.";__msg.CMTPGN106="{0}자 이상, {1}자 이하의 글로 작성해주세요.";__msg.CMTPGN107="첨부는 최대 {0}개만 가능합니다.";__msg.CMTPGN108="첨부할 이미지파일을 선택해주세요.";__msg.CMTPGN109="http:// 를 포함한 링크주소를 입력하세요.";__msg.CMTPGN110="첨부가능한 링크주소가 아닙니다.";__msg.CMTPGN111="첨부제한된 링크주소 입니다.";__msg.CMTPGN112="신고사유를 선택해주세요.";__msg.CMTPGN113="기타사유를 입력해주세요.";__msg.CMTPGN114="이미 요청을 처리중 입니다. 잠시만 기다려 주세요.";__msg.CMTPGN115="글수정은 한개씩 가능합니다. 수정중인 글을 완료후 수정해주세요.";__msg.CMTPGN116="읽기만 가능한 페이지입니다.";__msg.CMTPGN117="댓글 작성이 제한된 콘텐츠 입니다.";__msg.CMTPGN301="등록하시겠습니까?";__msg.CMTPGN302="등록되었습니다.";__msg.CMTPGN303="수정하시겠습니까?";__msg.CMTPGN304="수정되었습니다.";__msg.CMTPGN305="저장하시겠습니까?";__msg.CMTPGN306="저장되었습니다.";__msg.CMTPGN307="삭제하시겠습니까?\n다른 회원님들께서 작성하신 답글도 함께 삭제됩니다.";__msg.CMTPGN308="삭제되었습니다.";__msg.CMTPGN309="신고하시겠습니까?";__msg.CMTPGN310="신고되었습니다.";__msg.CMTPGN501="Facebook 계정연결이 필요합니다.\n계정 연결 후 다시 시도해주세요.";__msg.CMTPGN502="Facebook 계정연결 유효기간이 만료되었습니다. \n연결된 Facebook 계정을 해제 후\n다시 연결하여 시도해주세요.";__msg.CMTPGN503="Twitter 계정연결이 필요합니다.\n계정 연결 후 다시 시도해주세요.";__msg.CMTPGN504="Twitter 계정연결 유효기간이 만료되었습니다.\n연결된 Twitter 계정을 해제 후\n다시 연결하여 시도해주세요.";__msg.CMTPGN505="죄송합니다.\n잠시 후 다시 시도해주세요.";__msg.CMTPGN506="동시쓰기 처리중 오류가 발생했습니다.";__msg.CMTPGN601="앨범페이지로 이동하시겠습니까?";__msg.CMTPGN602="이 곡은 권리사의 요청으로 앨범단위 구매만 가능합니다. 앨범페이지로 이동하시겠습니까?";__msg.CMTPGN603="이 앨범에는 권리사의 요청으로 앨범단위 구매만 가능한 곡이 포함되어 있습니다. 앨범페이지로 이동하시겠습니까?";__msg.CMTPGN604="이 앨범은 할인이 적용됩니다. 앨범페이지로 이동하시겠습니까?";__msg.CMTPGN605="앨범 수록곡이 200곡 초과 일 시 앨범다운은 200곡까지만 가능합니다. 앨범페이지로 이동하시겠습니까?";__msg.CDN02="업로드한 파일이 HTML 폼에서 지정한 MAX_FILE_SIZE 지시어보다 큽니다.";__msg.CDN03="파일이 일부분만 전송되었습니다.";__msg.CDN04="파일이 전송되지 않았습니다.";__msg.CDN06="서버의 임시 폴더가 없습니다.";__msg.CDN07="디스크에 파일 쓰기를 실패했습니다.";__msg.CDN08="확장에 의해 파일 업로드가 중지되었습니다.";__msg.CDN09="업로드 도중 에러가 발생 되었습니다.";__msg.CDN91="이미지 용량이 너무 큽니다. 10MB 이하로 등록해주세요.";__msg.CDN94="업로드 인증이 실패했습니다.";__msg.CDN95="인증키가 없습니다.";__msg.CDN96="overWrite 파라메터가 없습니다.";__msg.CDN98="uploadFile 파라메터가 없습니다.";__msg.CDN99="POST Method 로 전송되지 않았습니다.";function _serializeData(data){__util.log("_serializeData() executed. data is",data);var _data={};$.each(data,function(key,value){__util.log("_serializeData() key=["+(key)+"], value=["+(value)+"], typeof(value)=["+typeof(value)+"]");if(__util.isArray(value)===true){$.each(value,function(innerKey,innerValue){__util.log("_serializeData() innerKey=["+(innerKey)+"], innerValue=["+(innerValue)+"], typeof(innerValue)=["+typeof(innerValue)+"]");_data[key+"["+innerKey+"]"]=innerValue;});}else{if(__util.isDefined(value)===true){_data[key]=value;}}});__util.log("_serializeData() executed done. _data is",_data);return _data;}function _callApi(api,url,data,type,callback,backdata){__util.log("@_callApi() executed. reqId=["+(backdata?backdata.reqId:"N/A")+"], api=["+api+"], url=["+url+"], type=["+type+"]");if(__util.isDefined(backdata)!==true){backdata={};}$.extend(backdata,{reqId:api+"."+new Date().getTime(),reqMethod:type,reqTime:new Date().getTime()});__global.C_REQUEST_HANDLER[backdata.reqId]=backdata;__util.log("@_callApi() executed. reqId=["+backdata.reqId+"], api=["+api+"], url=["+url+"], type=["+type+"], data is",data);__util.log("@_callApi() executed. reqId=["+backdata.reqId+"], api=["+api+"], url=["+url+"], type=["+type+"], backdata is",backdata);var _backdata=__global.C_REQUEST_HANDLER[backdata.reqId],_callback=callback;if(__util.isDefined(_backdata.loader)===true&&__config.C_LOADING_DELAY>-1){window.setTimeout(function(){__util.log("_callApi() loading handler executed. reqId=["+backdata.reqId+"], loading handler execution=["+(__util.isEmpty(__global.C_REQUEST_HANDLER[_backdata.reqId])!==true?"DO-LOADING":"DO-NOTHING")+"], editingCmtSeq=["+__util.isDefined(_backdata.editingCmtSeq)+"]");if(__util.isEmpty(__global.C_REQUEST_HANDLER[backdata.reqId])!==true){if(__util.isDefined(_backdata.editingCmtSeq)){_backdata.loader(_backdata.editingCmtSeq);}else{_backdata.loader();}}},__config.C_LOADING_DELAY);}window.setTimeout(function(){__util.log("_callApi() timeout handler executed. reqId=["+backdata.reqId+"], timeout handler execution=["+(__util.isEmpty(__global.C_REQUEST_HANDLER[backdata.reqId])!==true?"DO-FALLBACK":"DO-NOTHING")+"]");if(__util.isEmpty(__global.C_REQUEST_HANDLER[_backdata.reqId])!==true){__global.C_REQUEST_HANDLER[_backdata.reqId]=null;if(_callback){var fallback={};fallback.STATUS=__global.C_STATUS_TIMEOUT;fallback.backdata=_backdata;_callback(fallback);}}},__config.C_TIMEOUT_DELAY);var _data=_serializeData(data);$.executeApi({api:api,url:url,type:type,data:$.extend({_method:type},_data),callback:callback,backdata:backdata,success:function(res){var abandon=false;if(__util.isEmpty(__global.C_REQUEST_HANDLER[backdata.reqId])!==true){__util.log("_callApi() success. reqId=["+backdata.reqId+"], request handler is exists. CALLBACK & FLUSH.");var resTime=new Date().getTime();var reqTime=(__global.C_REQUEST_HANDLER[backdata.reqId]).reqTime;__global.C_REQUEST_HANDLER[backdata.reqId]=null;__util.log("_callApi() success. reqId=["+backdata.reqId+"] execution time=["+resTime+" - "+reqTime+"]=["+(resTime-reqTime)+" ms]");}else{__util.log("_callApi() success. reqId=["+backdata.reqId+"], request handler is empty. ABANDON.");abandon=true;}__util.log("_callApi() success. reqId=["+backdata.reqId+"], abandon=["+abandon+"]");if(__util.isDefined(res)!==true){res={};res.STATUS=__global.C_STATUS_FAIL;res.ERRORCODE=__global.C_ERROR_CODE_INTERNAL_ERROR;}res.backdata=backdata;if(abandon!==true&&callback){if(api===__global.C_API_NAME_ATACH_IMAGE_CDN_AUTH){res.STATUS=__global.C_STATUS_SUCCESS;}callback(res);}}});}__util.log("melon_cmtpgn_api.js LOADED.");var C_API_PREPATCH_URL=__config.C_CMT_HOST+__config.C_BASE_PATH+__config.C_API_PATH+__config.C_API_PREFIX;var C_API_PREPATCH_V2URL=__config.C_CMT_HOST+__config.C_BASE_PATH+__config.C_API_PATH+__config.C_API_V2_PATH+__config.C_API_PREFIX;MELON.CMTPGN.Api.pgn={};MELON.CMTPGN.Api.cmt={};MELON.CMTPGN.Api.adcmt={};MELON.CMTPGN.Api.recm={};MELON.CMTPGN.Api.reprt={};MELON.CMTPGN.Api.atach={};MELON.CMTPGN.Api.atach.melon={};MELON.CMTPGN.Api.atach.image={};MELON.CMTPGN.Api.atach.image.cdn={};MELON.CMTPGN.Api.atach.link={};MELON.CMTPGN.Api.atach.link.video={};MELON.CMTPGN.Api.pgn.load=function(data,callback,backdata){var url=C_API_PREPATCH_URL+"loadPgn.json";var type="GET";return _callApi(__global.C_API_NAME_PGN_LOAD,url,data,type,callback,backdata);};MELON.CMTPGN.Api.cmt.list=function(data,callback,backdata){var url=C_API_PREPATCH_URL+"listCmt.json";var type="GET";return _callApi(__global.C_API_NAME_CMT_LIST,url,data,type,callback,backdata);};MELON.CMTPGN.Api.cmt.inform=function(data,callback,backdata){var url=C_API_PREPATCH_URL+"informCmt.json";var type="GET";return _callApi(__global.C_API_NAME_CMT_INFORM,url,data,type,callback,backdata);};MELON.CMTPGN.Api.cmt.reg=function(data,callback,backdata){var url=C_API_PREPATCH_URL+"insertCmt.json";var type="POST";return _callApi(__global.C_API_NAME_CMT_REG,url,data,type,callback,backdata);};MELON.CMTPGN.Api.cmt.updt=function(data,callback,backdata){var url=C_API_PREPATCH_URL+"updateCmt.json";var type="POST";return _callApi(__global.C_API_NAME_CMT_UPDT,url,data,type,callback,backdata);};MELON.CMTPGN.Api.cmt.del=function(data,callback,backdata){var url=C_API_PREPATCH_URL+"deleteCmt.json";var type="POST";return _callApi(__global.C_API_NAME_CMT_DEL,url,data,type,callback,backdata);};MELON.CMTPGN.Api.cmt.view=function(data,callback,backdata){var url=C_API_PREPATCH_URL+"storeCmtView.json";var type="POST";return _callApi(__global.C_API_NAME_CMT_VIEW,url,data,type,callback,backdata);};MELON.CMTPGN.Api.adcmt.list=function(data,callback,backdata){var url=C_API_PREPATCH_URL+"listAdcmt.json";var type="GET";return _callApi(__global.C_API_NAME_ADCMT_LIST,url,data,type,callback,backdata);};MELON.CMTPGN.Api.adcmt.reg=function(data,callback,backdata){var url=C_API_PREPATCH_URL+"insertAdcmt.json";var type="POST";return _callApi(__global.C_API_NAME_ADCMT_REG,url,data,type,callback,backdata);};MELON.CMTPGN.Api.adcmt.del=function(data,callback,backdata){var url=C_API_PREPATCH_URL+"deleteAdcmt.json";var type="POST";return _callApi(__global.C_API_NAME_ADCMT_DEL,url,data,type,callback,backdata);};MELON.CMTPGN.Api.recm.reg=function(data,callback,backdata){var url=C_API_PREPATCH_V2URL+"insertRecm.json";var type="POST";return _callApi(__global.C_API_NAME_RECM_REG,url,data,type,callback,backdata);};MELON.CMTPGN.Api.recm.cancel=function(data,callback,backdata){var url=C_API_PREPATCH_URL+"cancelRecm.json";var type="POST";return _callApi(__global.C_API_NAME_RECM_CANCEL,url,data,type,callback,backdata);};MELON.CMTPGN.Api.reprt.checkBreakMember=function(data,callback,backdata){var url=C_API_PREPATCH_URL+"checkBreakMember.json";var type="POST";return _callApi(__global.C_API_NAME_REPRT_REG,url,data,type,callback,backdata);};MELON.CMTPGN.Api.reprt.reg=function(data,callback,backdata){var url=C_API_PREPATCH_URL+"insertReprt.json";var type="POST";return _callApi(__global.C_API_NAME_REPRT_REG,url,data,type,callback,backdata);};MELON.CMTPGN.Api.atach.melon.srch=function(data,callback,backdata){var url=C_API_PREPATCH_URL+"listMusic.json";var type="GET";return _callApi(__global.C_API_NAME_ATACH_MELON_SRCH,url,data,type,callback,backdata);};MELON.CMTPGN.Api.atach.melon.suggest=function(data,callback,backdata){var url=C_API_PREPATCH_URL+"listMusicKeyword.json";var type="GET";return _callApi(__global.C_API_NAME_ATACH_MELON_SRCH_SUGGEST,url,data,type,callback,backdata);};MELON.CMTPGN.Api.atach.melon.suggestConts=function(data,callback,backdata){var url=C_API_PREPATCH_URL+"listMusicKeywordConts.json";var type="GET";return _callApi(__global.C_API_NAME_ATACH_MELON_SRCH_SUGGEST_CONTS,url,data,type,callback,backdata);};MELON.CMTPGN.Api.atach.image.cdn.auth=function(data,callback,backdata){var url=__config.F_CDN_AUTH_URL();var type="GET";return _callApi(__global.C_API_NAME_ATACH_IMAGE_CDN_AUTH,url,data,type,callback,backdata);};MELON.CMTPGN.Api.atach.link.video.oembed=function(data,callback,backdata){var url=C_API_PREPATCH_URL+"informOembed.json";var type="GET";_callApi(__global.C_API_NAME_ATACH_LINK_VIDEO_OEMBED,url,data,type,callback,backdata);};$.extend({executeApi:function(settings){__util.log("executeApi() settings is",settings);var _config={api:undefined,url:undefined,data:undefined,callback:undefined,backdata:undefined,type:"POST",success:function(data){},error:function(textStatus){}};var _isSupportXHR=function(){var bSupportFormData=!!window.FormData;var bSupportXHR=!!window.XMLHttpRequest;return(bSupportFormData&&bSupportXHR);};var _ajaxXHR=function(){$.ajax({async:true,api:_config.api,url:_config.url,data:_config.data,callback:_config.callback,backdata:_config.backdata,type:_config.type,success:_config.success,error:_config.error});};var _ajaxJSONP=function(){$.ajax({async:true,dataType:"jsonp",type:"GET",api:_config.api,url:_config.url,data:_config.data,callback:_config.callback,backdata:_config.backdata,success:_config.success,error:_config.error});};var _ajaxIFRAME=function(){var isNewFrame=false;var iframeObj=$("#d_cmtpgn_tunnel_frame");if(iframeObj.length===0){iframeObj=$('<iframe id="d_cmtpgn_tunnel_frame" name="d_cmtpgn_tunnel_frame" src="javascript:false;" style="width:0; height:0; border:0;"></iframe>');iframeObj.appendTo($("body"));isNewFrame=true;}__util.log("executeApi() _ajaxIFRAME, isNewFrame=["+isNewFrame+"]");try{if(isNewFrame===true){__util.log("executeApi() isNewFrame == true, binding New");iframeObj.bind("load",function(){iframeObj[0].contentWindow.sendBack({api:_config.api,type:_config.type,url:_config.url,data:_config.data,backdata:_config.backdata,success:_config.success,error:_config.error});});iframeObj.attr("src",__config.C_TUNNEL_HTML_URL);}else{__util.log("executeApi() isNewFrame == true, exists ONE");iframeObj[0].contentWindow.sendBack({api:_config.api,type:_config.type,url:_config.url,data:_config.data,backdata:_config.backdata,success:_config.success,error:_config.error});}}catch(e){_config.error(e);}};if(settings){$.extend(_config,settings);}if(false){__util.log("executeApi() using _ajaxXHR() REQUESTING=["+settings.url+"]");_ajaxXHR();}else{if(_config.type!==null&&_config.type.toUpperCase()==="GET"){__util.log("executeApi() using _ajaxJSONP() REQUESTING=["+settings.url+"]");_ajaxJSONP();}else{__util.log("executeApi() using _ajaxIFRAME() REQUESTING=["+settings.url+"]");_ajaxIFRAME();}}}});$.fn.multilineEllipsis=function(baseLines){return this.each(function(){var $el=$(this),text=$el.text();var width=$el.width(),height=$el.height(),lineHeight=(parseInt($el.css("line-height"),10)||16);__util.log("multilineEllipsis() text=["+text+"], width=["+width+"], height=["+height+"], lineHeight=["+lineHeight+"], lines=["+Math.round(height/lineHeight)+"]");var lines=Math.round(height/lineHeight);if(lines>baseLines){while(lines>baseLines){$el.text($el.text().substring(0,$el.text().length-1));lines=Math.round($el.height()/lineHeight);}var ellipsisText=$el.text(),ellipsisByteLength=__util.getTextByte(ellipsisText);__util.log("multilineEllipsis() breaking-text=["+ellipsisText+"], length=["+ellipsisText.length+"], byte=["+ellipsisByteLength+"]");ellipsisByteLength=(ellipsisByteLength>10?ellipsisByteLength-10:ellipsisByteLength);var ellipsisOffset=__util.findEllipseCutOffset(ellipsisText,ellipsisByteLength);$el.text(ellipsisText.substring(0,ellipsisOffset)+__global.C_TEXT_ELLIPSE_TEXT_TAIL);__util.log("multilineEllipsis() ellipsis-text=["+$el.text()+"], length=["+$el.text().length+"], byte=["+__util.getTextByte($el.text())+"]");}});};$.fn.singlelineEllipsis=function(){return this.each(function(){var $el=$(this),text=$el.text();var width=$el.width(),height=$el.height(),lineHeight=(parseInt($el.css("line-height"),10)||16);__util.log("singlelineEllipsis() text=["+text+"], width=["+width+"], height=["+height+"], lineHeight=["+lineHeight+"], lines=["+Math.round(height/lineHeight)+"]");var lines=Math.round(height/lineHeight);if(lines>1){while(lines>1){$el.text($el.text().substring(0,$el.text().length-1));lines=Math.round($el.height()/lineHeight);}var ellipsisText=$el.text(),ellipsisByteLength=__util.getTextByte(ellipsisText);__util.log("singlelineEllipsis() breaking-text=["+ellipsisText+"], length=["+ellipsisText.length+"], byte=["+ellipsisByteLength+"]");ellipsisByteLength=(ellipsisByteLength>10?ellipsisByteLength-10:ellipsisByteLength);var ellipsisOffset=__util.findEllipseCutOffset(ellipsisText,ellipsisByteLength);$el.text(ellipsisText.substring(0,ellipsisOffset)+__global.C_TEXT_ELLIPSE_TEXT_TAIL);__util.log("singlelineEllipsis() ellipsis-text=["+$el.text()+"], length=["+$el.text().length+"], byte=["+__util.getTextByte($el.text())+"]");}});};if(__util.isDefined(MELON.WEBSVC)===true){MELON.WEBSVC.define("CMTPGN.CmtTextCounter",function(){var browser=MELON.WEBSVC.browser,byteLength=MELON.WEBSVC.string.byteLength,charsByByte=MELON.WEBSVC.string.charsByByte;var CmtTextCounter=MELON.WEBSVC.Class({name:"CmtTextCounter",$extend:MELON.PBPGN.View,$statics:{ON_TEXTCOUNT_CHANGE:"textcounterchange"},defaults:{countType:"char",limit:100,limitClassName:""},initialize:function(el,options){this.supr(el,options);var me=this;me.currentLength=0;me.placeholder="placeholder" in MELON.WEBSVC.tmpInput?"":me.$el.attr("placeholder");if(MELON.WEBSVC.browser.isGecko){me._forceKeyup();}me.on("keydown keypress keyup cut paste blur",function(e){var keyIn=(e.which)?e.which:e.keyCode;var isOver=me._checkLimit();var nextOver=me._checkNext();if(e.type==="keydown"||e.type==="keypress"){if(nextOver){if(keyIn===13){me._truncateValue();me.trigger("textcounterchange",[me.currentLength]);e.preventDefault();return false;}}}else{if(e.type==="keyup"){if(isOver){alert("입력하신 글자 수가 초과되었습니다.");this.focus();}}}if(e.type!="blur"){me.trigger("textcounterchange",[me.currentLength]);}});me._checkLimit();me.trigger("textcounterchange",[me.currentLength]);},textLength:function(str){var me=this;if(me.options.countType==="byte"){return byteLength(str);}return(str||"").length;},_checkLimit:function(){var me=this,o=me.options,isOver=false;var allText="";if(__util.isEmpty(o.limitClassName)!==true){$(me.$el[0]).parent().find(o.limitClassName).each(function(index){allText+=$($(this)[0]).val();});}else{allText=$(me.$el[0]).val();}me.currentLength=me.textLength(allText);if(me.currentLength>o.limit){me._truncateValue();isOver=true;}return isOver;},_checkNext:function(){var me=this,o=me.options,isOver=false;var allText="";if(__util.isEmpty(o.limitClassName)!==true){$(me.$el[0]).parent().find(o.limitClassName).each(function(index){allText+=$($(this)[0]).val();});}else{allText=$(me.$el[0]).val();}me.currentLength=me.textLength(allText);if(me.currentLength>=o.limit){isOver=true;}return isOver;},_truncateValue:function(){var me=this,$el=me.$el,o=me.options,limit=me.options.limit,value=browser.isOldIE&&$el[0].value===me.placeholder?"":$($el[0]).val(),chars=0,gap=0;if(limit===0){$($el[0]).val(me.placeholder);me.currentLength=limit;}else{if(limit<me.currentLength){if(__util.isEmpty(o.limitClassName)===true){chars=(me.options.countType==="byte"?charsByByte(value,limit):limit);$el[0].blur();$($el[0]).val(value.substring(0,chars));$el[0].focus();me.currentLength=limit;}else{var prevChars=0;var $prevAll=$el.prevAll(o.limitClassName);$prevAll.each(function(index){if($(this).css("display")!=="none"){prevChars+=me.textLength($($(this)[0]).val());}});var currentChars=me.textLength($($el[0]).val());var nextChars=0;var $nextAll=$el.nextAll(o.limitClassName);$nextAll.each(function(index){if($(this).css("display")!=="none"){nextChars+=me.textLength($($(this)[0]).val());}});gap=prevChars+currentChars+nextChars-limit;$el[0].blur();$($el[0]).val(value.substring(0,(currentChars-gap)));$el[0].focus();me.currentLength=prevChars+currentChars+nextChars-gap;}}}},_forceKeyup:function(){var me=this,$el=me.$el,el=$el[0],prevValue,win=window,doc=document,fireEvent=(function(){if(doc.createEvent){return function(){var e;if(win.KeyEvent){e=doc.createEvent("KeyEvents");e.initKeyEvent("keyup",true,true,win,false,false,false,false,65,0);}else{e=doc.createEvent("UIEvents");e.initUIEvent("keyup",true,true,win,1);e.keyCode=65;}el.dispatchEvent(e);};}else{return function(){var e=doc.createEventObject();e.keyCode=65;el.fireEvent("onkeyup",e);};}})();me.timer=null;me.on("focus",function(){if(me.timer){return;}me.timer=setInterval(function(){if(prevValue!==el.value){prevValue=el.value;fireEvent();}},60);}).on("blur",function(){if(me.timer){clearInterval(me.timer);me.timer=null;}});},destroy:function(){var me=this;me.timer&&clearInterval(me.timer);me.supr();}});MELON.WEBSVC.bindjQuery(CmtTextCounter,"cmtTextCounter");return CmtTextCounter;});MELON.WEBSVC.define("CMTPGN.CmtTextControl",function(){var CmtTextControl=MELON.WEBSVC.Class({name:"CmtTextControl",$extend:MELON.PBPGN.View,$statics:{ON_INIT:"init",ON_CHANGE:"textcontrolchange"},defaults:{countType:"char",limit:100,limitTarget:"",limitClassName:"",allowPaste:false},initialize:function(el,options){var me=this;if(me.supr(el,options)===false){return;}me._initTextControl();me.trigger(CmtTextControl.ON_INIT);},_initTextControl:function(){var me=this,o=me.options;if(!o.allowPaste){me.on("paste",function(e){e.preventDefault();alert("죄송합니다. \n도배글 등을 방지하기 위해 붙여넣기를 하실 수 없습니다.");});}me.textCounter=me.subviews.counter=new MELON.CMTPGN.CmtTextCounter(me.$el,{countType:o.countType,limit:o.limit,limitClassName:o.limitClassName,on:{textcounterchange:(function(){var $limitTarget=$(me.options.limitTarget);return function(e,len){$limitTarget.html(len);};}())}});},destroy:function(){var me=this;me.supr();}});MELON.WEBSVC.bindjQuery(CmtTextControl,"cmtTextControl");return CmtTextControl;});MELON.WEBSVC.define("CMTPGN.CmtMelonKeywordSuggest",function(){var browser=MELON.WEBSVC.browser;var CmtMelonKeywordSuggest=MELON.WEBSVC.Class({name:"CmtMelonKeywordSuggest",$extend:MELON.PBPGN.View,defaults:{min:__global.C_ATACH_MELON_MIN_SRCH_WORD,max:__global.C_ATACH_MELON_MAX_SRCH_WORD,cnt:__global.C_ATACH_MELON_DSPLY_SUGGEST_SIZE,arCnt:__global.C_ATACH_MELON_DSPLY_SUGGEST_AR_SIZE,soCnt:__global.C_ATACH_MELON_DSPLY_SUGGEST_SO_SIZE,alCnt:__global.C_ATACH_MELON_DSPLY_SUGGEST_AL_SIZE,api:__api.atach.melon.suggest,backdata:undefined,callback:undefined,execution:"button"},initialize:function(el,options){this.supr(el,options);var me=this,$el=me.$el;me.placeholder=$el.attr("placeholder");me.timerId=null;if(MELON.WEBSVC.browser.isGecko){me._forceKeyup();}me.on("keydown",function(e){var $target,$items,count;var keyIn=(e.which)?e.which:e.keyCode;switch(keyIn){case 13:e.stopPropagation();e.preventDefault();$($el[0]).parent().find(me.options.execution).trigger("click");break;case 27:if($($el[0]).parent().find(".d_cmtpgn_atach_suggest_keyword").css("display")==="block"){e.stopPropagation();e.preventDefault();$($el[0]).parent().find(".d_cmtpgn_atach_suggest_keyword").hide();}break;case 38:e.stopPropagation();e.preventDefault();$($el[0]).parent().find(".d_cmtpgn_atach_suggest_keyword").hide();break;case 40:e.stopPropagation();e.preventDefault();$target=$($el[0]).parent().find(".d_cmtpgn_atach_suggest_keyword"),$items=$target.find("li"),count=$items.length;__util.log("CmtMelonKeywordSuggest INPUT go DOWN. CNT=["+count+"]");if(count>0){__util.log("CmtMelonKeywordSuggest INPUT go DOWN. DSPLY=["+($target.css("display"))+"]");if($target.css("display")==="block"){if($items.attr("class")=="cate"){$items.eq(1).children().focus();}else{$items.eq(0).children().focus();}}else{$target.show();}}break;default:break;}});me.on("keyup",function(e){var keyIn=(e.which)?e.which:e.keyCode;switch(keyIn){case 13:break;case 27:break;case 38:break;case 40:break;default:var data={};var value=browser.isOldIE&&(!$el||$el[0].value===me.placeholder)?"":$el[0].value,o=me.options;if(__util.isEmpty($.trim(value))!==true&&value.length>=o.min){data.srchWord=value;if($el.attr("class").indexOf("d_cmtpgn_atach_music_srch_input")>0){data.dsplyCnt=0;data.arDsplyCnt=o.arCnt;data.soDsplyCnt=o.soCnt;data.alDsplyCnt=o.alCnt;__api.atach.melon.suggestConts(data,o.callback,o.backdata);}else{data.dsplyCnt=o.cnt;__api.atach.melon.suggest(data,o.callback,o.backdata);}}else{data.STATUS=__global.C_STATUS_SUCCESS;data.backdata=o.backdata;o.callback(data);}break;}});},_forceKeyup:function(){var me=this,$el=me.$el,el=$el[0],prevValue,win=window,doc=window.document,fireEvent=(function(){if(doc.createEvent){return function(){var e;if(win.KeyEvent){e=doc.createEvent("KeyEvents");e.initKeyEvent("keyup",true,true,win,false,false,false,false,65,0);}else{e=doc.createEvent("UIEvents");e.initUIEvent("keyup",true,true,win,1);e.keyCode=65;}el.dispatchEvent(e);};}else{return function(){var e=doc.createEventObject();e.keyCode=65;el.fireEvent("onkeyup",e);};}})();me.timer=null;me.on("focus",function(){if(me.timer){return;}me.timer=window.setInterval(function(){if(prevValue!==el.value){prevValue=el.value;fireEvent();}},60);}).on("blur",function(){if(me.timer){window.clearInterval(me.timer);me.timer=null;me.timerId="";}});},destroy:function(){var me=this;if(me.timer&&window.clearInterval(me.timer)){me.supr();}}});MELON.WEBSVC.bindjQuery(CmtMelonKeywordSuggest,"cmtMelonKeywordSuggest");return CmtMelonKeywordSuggest;});}}(window,jQuery));


/* melonweb_cmtpgn_sqwidget.min.20220215 */
/*
* Sqwidget
*   github.com/premasagar/sqwidget
*/
(function(window,$){var self=window,document=window.document,tim,ready,splitdoc,Template,Widget;function getScript(srcs,callback,options){function single(src,callback,options){var charset=options.charset;var keep=options.keep;var target=options.target;var document=target.document;var head=document.getElementsByTagName("head")[0];var script=document.createElement("script");var loaded;script.type="text/javascript";script.charset=charset;script.onload=script.onreadystatechange=function(){var state=this.readyState;if(!loaded&&(!state||state==="complete"||state==="loaded")){script.onload=script.onreadystatechange=null;if(!keep){head.removeChild(script);}loaded=true;callback.call(target);}};script.async=true;script.src=src;head.appendChild(script);}function multiple(srcs,callback,options){var length=srcs.length,loaded=0,checkIfComplete,i;checkIfComplete=function(){if(++loaded===length){callback.call(options.target);}};for(i=0;i<length;i++){single(srcs[i],checkIfComplete,options);}}var window=self,method=(typeof srcs==="string")?single:multiple;options=options||{};if(!options.charset){options.charset="utf-8";}if(!options.target){options.target=window;}callback=callback||function(){};return method.call(window,srcs,callback,options);}splitdoc=(function(){function trim(str){return str.replace(/^[\0\t\n\v\f\r\s]+|[\0\t\n\v\f\r\s]+$/g,"");}function Splitdoc(raw,options){var html=(typeof raw!=="undefined"&&raw!==null)?String(raw):"";var doctypeDefault=options&&typeof options.doctype!=="undefined"?options.doctype:"<!doctype html>";var charsetDefault=options&&typeof options.charset!=="undefined"?options.charset:"utf-8";var charsetMetaDefault=options&&typeof options.charsetmeta!=="undefined"?options.charsetmeta:"<meta charset='"+charsetDefault+"'>";var titleDefault=options&&typeof options.title!=="undefined"?options.title:"";var bodyDefault=options&&typeof options.body!=="undefined"?options.body:"";var doctypeRegex=/<!doctype html[^>]*>/i;var htmlAttrRegex=/<html([^>]*)>/i;var headRegex=/<head([^>]*)>([\w\W]*?)<\/head>/i;var charsetRegex=/<meta charset=['"]?([\w\-]+)['"]?\s*\/?>|<meta http-equiv=["']Content-Type["'] content=["']text\/html;\s*charset=([\w\-]+)["']\s*\/?>/;var titleRegex=/<title([^>]*)>([\w\W]*?)<\/title>/i;var bodyRegex=/<body([^>]*)>([\w\W]*?)<\/body>/i;var doctypeMatch=html.match(doctypeRegex);var htmlAttrMatch=html.match(htmlAttrRegex);var headMatch=html.match(headRegex);var bodyMatch=html.match(bodyRegex);var doctype=doctypeMatch?doctypeMatch[0]:doctypeDefault;var htmlAttr=htmlAttrMatch?htmlAttrMatch[1]:"";var headAttr=headMatch?headMatch[1]:"";var headContents=headMatch?trim(headMatch[2]):"";var charsetMatch=headContents.match(charsetRegex);var charsetTag=charsetMatch?trim(charsetMatch[0]):charsetMetaDefault;var charset=charsetMatch?(charsetMatch[1]||charsetMatch[2]):charsetDefault;var titleMatch=headContents.match(titleRegex);var title=trim(titleMatch?titleMatch[2]:titleDefault);var bodyAttr=bodyMatch?bodyMatch[1]:"";var bodyContents=trim(bodyMatch?bodyMatch[2]:doctypeMatch||headMatch?bodyDefault||"":html);if(!titleMatch){headContents="<title>"+titleDefault+"</title>"+headContents;}if(!charsetMatch){headContents=charsetTag+headContents;}this.doctype=doctype;this.htmlAttr=htmlAttr;this.headAttr=headAttr;this.headContents=headContents;this.charset=charset;this.title=title;this.bodyAttr=bodyAttr;this.bodyContents=bodyContents;}Splitdoc.prototype={head:function(){return"<head"+this.headAttr+">"+this.headContents+"</head>";},body:function(){return"<body"+this.bodyAttr+">"+this.bodyContents+"</body>";},html:function(){return"<html"+this.htmlAttr+">"+this.head()+this.body()+"</html>";},toString:function(){return this.doctype+this.html();}};return function(html,options){return new Splitdoc(html,options);};}());ready=(function(window){var doc=window.document;var docEl=doc.documentElement;var addEventListener=doc.addEventListener;var attachEvent=doc.attachEvent;var readyFns=[];var ready;var bound;var dcl="DOMContentLoaded";var orsc="onreadystatechange";var atTopLevel;function fireReady(){var i=0,l=readyFns.length;if(ready){return;}ready=true;for(;i<l;i+=1){readyFns[i]();}}function scrollCheck(){if(ready){return;}try{docEl.doScroll("left");}catch(e){window.setTimeout(scrollCheck,1);return;}fireReady();}function DOMContentLoaded(){if(addEventListener){doc.removeEventListener(dcl,DOMContentLoaded,false);fireReady();}else{if(attachEvent&&doc.readyState==="complete"){doc.detachEvent(orsc,DOMContentLoaded);fireReady();}}}function onReady(fn){readyFns.push(fn);if(ready){return fn();}if(bound){return;}bound=true;if(addEventListener){doc.addEventListener(dcl,DOMContentLoaded,false);window.addEventListener("load",fireReady,false);}else{if(attachEvent){doc.attachEvent(orsc,DOMContentLoaded);window.attachEvent("onload",fireReady);try{atTopLevel=!window.frameElement;}catch(e){}if(docEl.doScroll&&atTopLevel){scrollCheck();}}}}return onReady;}(window));tim=(function(){var starts="{{";var ends="}}";var path="[a-z0-9_][\\.a-z0-9_]*";var pattern=new RegExp(starts+"("+path+")"+ends,"gi");var undef;return function(template,data){return template.replace(pattern,function(tag,ref){var path=ref.split(".");var len=path.length;var lookup=data;var i=0;for(;i<len;i++){lookup=lookup[path[i]];if(lookup===undef){return"";}if(i===len-1){return lookup;}}});};}());var MELON=window.MELON||(window.MELON={});MELON.CMTPGN=MELON.CMTPGN||{};MELON.CMTPGN.Config=MELON.CMTPGN.Config||{};MELON.CMTPGN.Global=MELON.CMTPGN.Global||{};MELON.CMTPGN.Sqwidget=MELON.CMTPGN.Sqwidget||{};MELON.CMTPGN.Api=MELON.CMTPGN.Api||{};MELON.CMTPGN.Util=MELON.CMTPGN.Util||{};MELON.CMTPGN.Msg=MELON.CMTPGN.Msg||{};var __config=MELON.CMTPGN.Config;var __global=MELON.CMTPGN.Global;var __sqwidget=MELON.CMTPGN.Sqwidget;var __api=MELON.CMTPGN.Api;var __util=MELON.CMTPGN.Util;var __msg=MELON.CMTPGN.Msg;MELON.CMTPGN.Sqwidget=window.MELON.CMTPGN.Sqwidget={version:"0.3.1",widgets:[],settings:{automatic:__config.C_AUTOMATIC,charset:__config.C_CHARSET,cmtHost:__config.C_CMT_HOST,basePath:__config.C_BASE_PATH,pluginPath:__config.C_PLUGIN_PATH,templatePath:__config.C_TEMPLATE_PATH,tunnelHtml:__config.C_TUNNEL_HTML,templateFileMap:__config.C_TEMPLATE_FILE_MAP},dependencyRegister:{},widgetTemplates:{},widgetTemplatesByType:{},globalConfig:function(dict){var key;if(dict){for(key in dict){if(dict.hasOwnProperty(key)&&typeof this.settings[key]!=="undefined"){this.settings[key]=dict[key];}}}return this.settings;},getConfig:function(key){return MELON.CMTPGN.Sqwidget.settings[key];},thisDomScript:function(){var scripts=document.getElementsByTagName("script");return scripts[scripts.length-1];},getScript:function(srcs,callback,options){var i,length;if(MELON.CMTPGN.Sqwidget.getConfig("cache")){if(typeof srcs==="string"){srcs=[srcs];}length=srcs.length;for(i=0;i<length;i+=1){srcs[i]=MELON.CMTPGN.Sqwidget.cacheUrl(srcs[i],0);}}getScript(srcs,callback,options);},templateText:function(jsonData){var myTemplate;if(jsonData&&jsonData.type){myTemplate=this.widgetTemplatesByType[jsonData.type];if(myTemplate){myTemplate.templateText(jsonData.template);}}},hasMinVersion:function(testVersion,minVersion){return testVersion>=minVersion;},jQueryIsLoaded:function(minVersion){if(!$){var jQ=window.jQuery;if(jQ&&jQ.fn&&jQ.fn.jquery&&this.hasMinVersion(jQ.fn.jquery,minVersion||this.settings.jQuery.minVersion)){$=jQ;}}return $;},onjQueryReady:function(callback){callback($);},ready:function(callback){this.onjQueryReady(function(){MELON.CMTPGN.Sqwidget.domReady(callback);});},domReady:function(callback){jQuery().ready(callback);},widgetsInDom:function(){var regexWhitespaceAtEnd=/^[\0\t\n\v\f\r\s]+|[\0\t\n\v\f\r\s]+$/g;var regexWidgetType=/^.*\/([\w]+)(?:\.[^\/]+)?$|^([\w]+)(?:\..*)?$/;var widgets=[];var divs=document.getElementsByTagName("div");var length=divs.length;var div;var dataSqwidgetSettings;var dataSqwidget;var widgetType;var i;function trim(str){return str.replace(regexWhitespaceAtEnd,"");}function type(templateUrl){return templateUrl.replace(regexWidgetType,"$1$2");}function settings(str){if(!str){return{};}function reverse(s){return s.split("").reverse().join("");}var keyvalPairs=reverse(str).split(/;(?!\\)/),i=keyvalPairs.length,widgetSettings={},keyval,pos;for(;i;i-=1){keyval=reverse(keyvalPairs[i-1]);keyval=keyval.replace("\\;",";");pos=keyval.indexOf(":");if(pos!==-1){widgetSettings[trim(keyval.slice(0,pos))]=trim(keyval.slice(pos+1));}}return widgetSettings;}for(i=0;i<length;i+=1){div=divs[i];dataSqwidget=div.getAttribute("data-sqwidget");dataSqwidgetSettings=div.getAttribute("data-sqwidget-settings");if(dataSqwidget){dataSqwidget=settings(dataSqwidget);dataSqwidgetSettings=settings(dataSqwidgetSettings);__util.log("@sqwidget.js, widgetsInDom, dataSqwidget is ",dataSqwidget);__util.log("@sqwidget.js, widgetsInDom, dataSqwidgetSettings is ",dataSqwidgetSettings);dataSqwidgetSettings.readOnly=$.trim(dataSqwidget.readOnly)||"false";dataSqwidgetSettings.templateType=$.trim(dataSqwidget.templateType)||"";dataSqwidgetSettings.pageType=$.trim(dataSqwidget.pageType)||"";dataSqwidgetSettings.textareaType=$.trim(dataSqwidget.textareaType)||"";dataSqwidgetSettings.mymusicKey=$.trim(dataSqwidget.mymusicKey)||__global.C_EMPTY_KEY;if(__util.isEmpty(dataSqwidget.templateType)!==true&&__util.isEmpty(this.getConfig("templateFileMap"))[dataSqwidget.templateType]!==true){var src=__util.buildResourcePath(this.getConfig("cmtHost"),this.getConfig("basePath")+this.getConfig("pluginPath")+this.getConfig("templatePath"),(this.getConfig("templateFileMap"))[dataSqwidget.templateType]);widgetType=type(src);dataSqwidget.src=src;}switch(dataSqwidgetSettings.templateType){case __global.C_TEMPLATE_TYPE_PC_SUMRY:case __global.C_TEMPLATE_TYPE_PC_LIST:case __global.C_TEMPLATE_TYPE_MOBLE_LIST:case __global.C_TEMPLATE_TYPE_MOBLE6_LIST:case __global.C_TEMPLATE_TYPE_MOBLE_VIEW:case __global.C_TEMPLATE_TYPE_MOBLE6_VIEW:case __global.C_TEMPLATE_TYPE_MOBLE_WRITE:case __global.C_TEMPLATE_TYPE_MOBLE6_WRITE:break;default:alert("CMTPGN: 지원하지 않는 templateType");return;}if(dataSqwidgetSettings.templateType===__global.C_TEMPLATE_TYPE_PC_SUMRY){switch(dataSqwidgetSettings.pageType){case __global.C_PAGE_TYPE_GENERIC:case __global.C_PAGE_TYPE_SONG:case __global.C_PAGE_TYPE_PHOTO:case __global.C_PAGE_TYPE_GUESTBOOK:break;default:alert("CMTPGN: 지원하지 않는 pageType");return;}switch(dataSqwidgetSettings.textareaType){case __global.C_TEXTAREA_TYPE_LARGE:case __global.C_TEXTAREA_TYPE_MEDIUM:case __global.C_TEXTAREA_TYPE_SMALL:break;default:alert("CMTPGN: 지원하지 않는 textareaType");return;}}if(dataSqwidgetSettings.templateType===__global.C_TEMPLATE_TYPE_PC_LIST){switch(dataSqwidgetSettings.pageType){case __global.C_PAGE_TYPE_GENERIC:break;default:alert("CMTPGN: 지원하지 않는 pageType");return;}switch(dataSqwidgetSettings.textareaType){case __global.C_TEXTAREA_TYPE_LARGE:break;default:alert("CMTPGN: 지원하지 않는 textareaType");return;}}__util.log("@sqwidget.js, widgetsInDom, widgetType=["+widgetType+"]");widgets.push(Widget(this,widgetType,div,dataSqwidget,dataSqwidgetSettings));}}return widgets;},getTemplate:function(templateFile,widget){__util.log("@sqwidget.js, getTemplate, templateFile=["+templateFile+"]");var fileName=jQuery.trim(templateFile),t;__util.log("@sqwidget.js, getTemplate, fileName=["+fileName+"]");t=this.widgetTemplates[fileName];if(!t){t=Template(this,fileName,widget);this.widgetTemplates[fileName]=t;}return t;},getTemplateByType:function(templateType){__util.log("@sqwidget.js, getTemplateByType, templateType=["+templateType+"]");return this.widgetTemplatesByType[templateType];},setTemplateType:function(template,type){this.widgetTemplatesByType[type]=template;template.config.type=type;},addDependency:function(widget,dependency){var name=null,minVersion=null,depConfig={},cmtHost=widget.getConfig("cmtHost",this.getConfig("cmtHost")),basePath=widget.getConfig("basePath",this.getConfig("basePath")),pluginPath=widget.getConfig("pluginPath",this.getConfig("pluginPath")),existing,loadPath;if(!dependency){name=null;}else{if(typeof(dependency)==="string"){name=dependency;}else{if(typeof(dependency==="object")){name=dependency[0];if(typeof(dependency[1])==="object"){depConfig=dependency[1];}else{minVersion=dependency[1];}if(typeof(dependency[2])==="object"){depConfig=dependency[2];}}else{name=null;}}}if(name&&name.length>0){existing=this.dependencyRegister[name];if(existing){__util.log("@sqwidget.js, adding dependency (already exists): "+name);existing.clients.push(widget);if(existing.loaded){__util.log("@sqwidget.js, setting plugin (already loaded): "+name);widget.setPlugin(existing.name,existing.module,depConfig);}else{__util.log("@sqwidget.js, waiting for plugin load: "+name);}}}},getDependencyRegister:function(){return this.dependencyRegister;},checkDependencies:function(widgetClient){var c,d;for(d in this.dependencyRegister){if(this.dependencyRegister.hasOwnProperty(d)){if(!(this.dependencyRegister[d].loaded)){for(c=0;c<this.dependencyRegister[d].clients.length;c+=1){if(this.dependencyRegister[d].clients[c]===widgetClient){return false;}}}else{for(c=0;c<this.dependencyRegister[d].clients.length;c+=1){if(this.dependencyRegister[d].clients[c]===widgetClient){if(typeof widgetClient.plugins[this.dependencyRegister[d].name]==="undefined"){return false;}}}}}}return true;},plugin:function(name,module,version){__util.log("@sqwidget.js, plugin=["+name+"]");var dep=this.dependencyRegister[name];if(typeof(dep)==="undefined"){this.dependencyRegister[name]={name:name,module:module,loaded:true,version:version,clients:[],config:{}};}else{dep.name=name;dep.module=module;dep.loaded=true;dep.version=version;jQuery.each(dep.clients,function(i,client){client.setPlugin(name,module,dep.config);});}},runAll:function(){jQuery.each(this.widgetTemplates,function(wt,template){template.runAll();});},clearWidgets:function(){MELON.CMTPGN.Sqwidget.widgets.length=0;jQuery.each(MELON.CMTPGN.Sqwidget.widgetTemplatesByType,function(type,template){if(template.widgets&&template.widgets.length){template.widgets.length=0;}});return this;},startWidgets:function(){var widgets=MELON.CMTPGN.Sqwidget.widgets=MELON.CMTPGN.Sqwidget.widgetsInDom();__util.log("@sqwidget.js, startWidgets, widgets is",widgets);jQuery.each(widgets,function(w,widget){widget.init();});jQuery.each(widgets,function(w,widget){widget.checkRun();});return this;},restartWidgets:function(){var oldWidgets=MELON.CMTPGN.Sqwidget.widgets;if(oldWidgets.length<1){__util.log("@sqwidget.js, restartWidgets, oldWidgets.length < 1, call startWidgets()");this.startWidgets();}else{__util.log("@sqwidget.js, restartWidgets, oldWidgets is",oldWidgets);__util.log("@sqwidget.js, restartWidgets, getting widgetsInDom");var newWidgets=MELON.CMTPGN.Sqwidget.widgetsInDom();for(var i=0;i<oldWidgets.length;i++){__util.log("@sqwidget.js, restartWidgets, truncate old html=["+oldWidgets[i].getId()+"]");jQuery("#"+oldWidgets[i].getId()).html("");oldWidgets[i].reset(newWidgets[i].getDataSqwidget(),newWidgets[i].getSettings());}for(var j=0;j<oldWidgets.length;j++){__util.log("@sqwidget.js, restartWidgets, oldWidgets[j]=["+oldWidgets[j].toString()+"]");oldWidgets[j].checkReRun();}return this;}}};MELON.CMTPGN.Sqwidget.onjQueryReady(function(jQuery){var $=jQuery,namespace="sqwidget";function ns(props,delimiter){delimiter=delimiter||"-";if(!props){__util.log("@MELON.CMTPGN.Sqwidget.onjQueryReady, return namespace=["+namespace+"]");return namespace;}else{if(typeof props==="string"){__util.log("@MELON.CMTPGN.Sqwidget.onjQueryReady, return namespace + delimiter + props=["+namespace+delimiter+props+"]");return namespace+delimiter+props;}else{__util.log("@MELON.CMTPGN.Sqwidget.onjQueryReady, return [namespace].concat(props).join(delimiter)=["+[namespace].concat(props).join(delimiter)+"]");return[namespace].concat(props).join(delimiter);}}}window.MELON.CMTPGN.Sqwidget=MELON.CMTPGN.Sqwidget=$.extend(MELON.CMTPGN.Sqwidget,{widgets:[],isElement:function(obj){return obj&&obj.nodeType===1;},isJQuery:function(obj){return obj&&!!obj.jquery;},isUrl:function(str){return(/^https?:\/\/[\-\w]+\.\w[\-\w]+\S*$/).test(str);},rand:function(maxDigits){var m=Math;return m.floor(m.random()*m.pow(10,maxDigits||4));},cssPresets:{contentonly:{margin:0,padding:0,borderWidth:0}},notifyGlobalWindow:function(origin,eventTypes,namespace){$.each(eventTypes,function(i,type){try{$(origin).bind(type,function(){$(window).trigger(ns(),{type:(namespace||origin.type)+"."+type,origin:this});});}catch(e){__util.log("catch",e);}});},urlParam:function(url,param,value){return url+(!/\?/.test(url)?"?":"&")+param+"="+value;},timeChunk:function(intervalDays){var decimalPlaces,baseline,msInADay,interval,now,chunk;decimalPlaces=6;baseline=new Date(2009,0,1).getTime();msInADay=24*60*60*1000;interval=intervalDays*msInADay;now=new Date().getTime();if(!intervalDays){return now;}else{chunk=now-(now%Math.round(interval));}return Number(((chunk-baseline)/msInADay).toFixed(decimalPlaces))||0;},cacheUrl:function(url,intervalDays){return this.urlParam(url,"cache",this.timeChunk(intervalDays));},preload:function(srcs){$.each($.isArray(srcs)?srcs:[srcs],function(i,src){$("<img src='"+src+"' />");});},prototype:$.extend(function(){},{insert:function(contents,insertPosition,verb){var $context=this.insertPosition=$(insertPosition||this.insertPosition||this.thisDomScript());if(!$context){return false;}if(!contents){return $context;}$context[verb||"after"](contents);return $(contents);},truncate:function(str,numWords,trailer){var newStr=String(str).replace(new RegExp("^((\\W*\\w*\\b){0,"+numWords+"}\\.?).*$","m"),"$1");return newStr+(newStr.length<str.length?(trailer||"\u2026"):"");},repeat:function(str,repeats){return repeats>0?new Array(repeats+1).join(str):"";},leadingZeroes:function(num,totalLength){return this.repeat("0",(totalLength||2)-String(num).length)+num;},atomDate:function(atomDateStr){var d,n,plusminus;atomDateStr=atomDateStr.replace(/z$/i,"+00:00");d=atomDateStr.split(/[\-T:+]/);n=Number;if(d.length!==8){return false;}plusminus=atomDateStr.substr(19,1);return new Date(Date.UTC(n(d[0]),n(d[1]-1),n(d[2]),n(d[3]-n(plusminus+d[6])),n(d[4]-n(plusminus+d[7])),n(d[5])));},loadCss:function(css,cacheTime){cacheTime=cacheTime||this.settings.cssCacheTime;function isCss(str){return(/@|\{/m).test(str);}$("head").append(isCss(css)?"<style type='text/css'>"+css+"</style>":"<link type='text/css' rel='stylesheet' href='"+(cacheTime?this.cacheUrl(css,cacheTime):css)+"' />");}})});});Template=function(s,t,widget){var self={},sqwidget=s,templateType=t,widgets=[],templates={},scripts=[],styles=[],plugins={},templateText="",loaded=false,errors=[],templateConfig={name:"sqwidget_template",version:"1",title:"Generic sqwidget widget",desc:"-",url:"http://github.com/sqwidget",ui:"hostpage",basePath:null,pluginPath:null,templatePath:null,dependencies:{},settings:{}};if(widget){widgets.push(widget);}function parseTemplateFile(template){var templateStr,head=null,body=null,s=splitdoc(template),j,links=[];head=s.headContents;body=s.bodyContents;if(head){templateStr=head;}else{templateStr=template;}if(body!==null){templates["default"]=body;}j=jQuery(templateStr);j.filter("script[type='text/template'][id]").each(function(i,t){t=jQuery(t);templates[t.attr("id")]=jQuery.trim(t.html());});j.filter("script:not([type]), script[type='text/javascript'], script[type='application/javascript']").each(function(i,t){t=jQuery(t);scripts.push(t.html());});j.filter("style").each(function(i,t){t=jQuery(t);styles.push({text:t.html(),media:t.attr("media"),type:t.attr("type"),title:t.attr("title")});});jQuery.each(styles,function(s,style){var ss=jQuery("<style>"+style.text+"</style>");ss.attr({title:style.title,type:style.type,media:style.media});jQuery("head").append(ss);});j.filter("link[rel='stylesheet']").each(function(i,t){t=jQuery(t);var obj={media:t.attr("media"),type:t.attr("type"),title:t.attr("title"),href:t.attr("href"),rel:t.attr("rel")};styles.push(obj);links.push(obj);});jQuery.each(links,function(s,style){if(document.createStyleSheet){document.createStyleSheet(style.href);}else{var ss=jQuery("<link />");ss.attr({rel:style.rel,href:style.href,title:style.title,type:style.type,media:style.media});jQuery("head").append(ss);}});}function initWidgets(){jQuery.each(widgets,function(w,widget){widget.onTemplateLoaded(self);});}function loadTemplate(){function props(a){var r=[],key;for(key in a){if(a.hasOwnProperty(key)){r.push(key+': "'+a[key]+'"');}}return"{"+r.join(" ")+"}";}var type,tn;__util.log("@sqwidget.js, loadTemplate, templateType=["+templateType+"]");try{tn=templateType;if(tn.indexOf("/")===-1){tn="./"+tn;}type=tn.match(/(.*)[\/\\]([^\/\\]+)\.\w+$/)[2];}catch(e){type=templateType;}__util.log("@sqwidget.js, loadTemplate, type=["+type+"]");sqwidget.widgetTemplatesByType[type]=self;templateConfig.type=type;if(templateType.lastIndexOf(".js")===templateType.length-3){MELON.CMTPGN.Sqwidget.getScript(templateType);}else{__util.log("@sqwidget.js, TEMPLATE LOADING using templateType=["+templateType+"]");var tunnelHtml=__util.buildResourcePath(sqwidget.getConfig("cmtHost"),sqwidget.getConfig("basePath")+sqwidget.getConfig("pluginPath")+sqwidget.getConfig("templatePath"),sqwidget.getConfig("tunnelHtml"));__util.log("@sqwidget.js, TEMPLATE LOADING using TUNNEL=["+tunnelHtml+"]");var iframeObj=jQuery('<iframe id="d_cmtpgn_tunnel_frame" name="d_cmtpgn_tunnel_frame" src="'+tunnelHtml+'" style="width:0; height:0; border:0;"></iframe>');iframeObj.bind("load",function(){iframeObj[0].contentWindow.loadTemplate(templateType,function(data,textStatus,request){if(data.length===0||textStatus!=="success"){errors.push("loading of template "+templateType+" failed.");}else{templateText=data;parseTemplateFile(templateText);loaded=true;}if(errors.length===0){initWidgets();}else{__util.log("@sqwidget.js, templating loading error",errors);}});window.setTimeout(function(){iframeObj.remove();},300);});jQuery("body").append(iframeObj);}}self.widgets=widgets;self.templateText=function(t){parseTemplateFile(t);loaded=true;if(errors.length===0){initWidgets();}else{__util.log("@sqwidget.js, templateText error",errors);}};self.register=function(widget){var i;for(i=0;i<widgets.length;i+=1){if(widget===widgets[i]){__util.log("@sqwidget.js, register widget === widgets[i] return;");return;}}widgets.push(widget);};self.reinstall=function(widget){var i;for(i=0;i<widgets.length;i+=1){if(widget===widgets[i]){__util.log("@sqwidget.js, reinstall widget === widgets[i] re-install and return;");__util.log("@sqwidget.js, reinstall widget === widgets[i] old widget is",widgets[i]);__util.log("@sqwidget.js, reinstall widget === widgets[i] new widget is",widget);widgets[i]=widget;return;}}widgets.push(widget);};self.config=function(dict){var key;if(dict){for(key in dict){if(dict.hasOwnProperty(key)&&typeof templateConfig!=="undefined"){templateConfig[key]=dict[key];}}sqwidget.setTemplateType(self,templateConfig.name);}return templateConfig;};self.getConfig=function(key){return templateConfig[key];};self.getSetting=function(key){return templateConfig.settings[key];};self.loadDependencies=function(widget){jQuery.each(templateConfig.dependencies,function(i,dep){sqwidget.addDependency(widget,dep);});};self.getScripts=function(){return scripts;};self.getTemplate=function(name){return templates[name];};self.setPlugin=function(name,module){plugins[name]=module;};self.getStyles=function(){return styles;};self.runAll=function(){jQuery.each(this.widgets,function(wt,template){template.checkRun();});};loadTemplate();return self;};Widget=function(sq,type,div,dataSq,dataSqSet){var widget={},sqwidget=sq,widgetType=type,container=div,dataSqwidget=dataSq,settings=dataSqSet,template=null,plugins={},readyFn=null,errorFn=null,loadingFn=null,readyRun=false,templateLoaded=false,dependenciesRequested=false;function evalScript(script){eval(script.toString());}function allPluginsLoaded(){return(dependenciesRequested&&sqwidget.checkDependencies(widget));}function props(a){var r=[],key;for(key in a){if(a.hasOwnProperty(key)){r.push(key+': "'+a[key]+'"');}}return"{"+r.join(" ")+"}";}widget.plugins=plugins;widget.allPluginsLoaded=allPluginsLoaded;widget.config=function(dict){template.config(dict);};widget.getContainer=function(){return container;};widget.getReadyFn=function(){return readyFn;};widget.getReadyRun=function(){return readyRun;};widget.getId=function(){if(dataSqwidget.hasOwnProperty("id")){return dataSqwidget.id;}else{return container.id;}};widget.onTemplateLoaded=function(t){templateLoaded=true;template=t;widget.runController(template.getScripts());widget.showLoading();template.loadDependencies(widget);dependenciesRequested=true;widget.checkRun();__util.log("@sqwidget.js, widget.onTemplateLoaded",t);};widget.setPlugin=function(name,module,config){__util.log("@sqwidget.js, setting up plugin: "+name+" for widget "+widget.getId()+" config with",config);plugins[name]=module(sqwidget,widget,jQuery,config);if(allPluginsLoaded()){widget.checkRun();}sqwidget.runAll();};widget.checkRun=function(){var widgetWrapper;__util.log("@sqwidget.js, widget.checkRun, widget is",widget);__util.log("@sqwidget.js, widget.checkRun, allPluginsLoaded=["+allPluginsLoaded()+"]");if(allPluginsLoaded()){if(!readyRun){__util.log("@sqwidget.js, widget.checkRun, !readyRun");readyRun=true;if(readyFn){widgetWrapper=jQuery(widget);__util.log("@sqwidget.js, calling widget.ready(): "+container.id);widgetWrapper.trigger("readyStart");readyFn.call(widget);widgetWrapper.trigger("readyEnd");}else{widget.setTemplate("default",{},null);}}else{__util.log("@sqwidget.js, widget.checkRun, readyRun");}}};widget.checkReRun=function(){var widgetWrapper;__util.log("@sqwidget.js, widget.checkReRun, widget is",widget);__util.log("@sqwidget.js, widget.checkReRun, if(readyFn)=["+(readyFn?true:false)+"] is",readyFn);if(readyFn){widgetWrapper=jQuery(widget);__util.log("@sqwidget.js, calling widget.ready(): "+container.id);widgetWrapper.trigger("readyStart");readyFn.call(widget);widgetWrapper.trigger("readyEnd");}else{widget.setTemplate("default",{},null);}};widget.getBodyElement=function(idSuffix){var elId=widget.getId()+"_"+idSuffix,el=jQuery("#"+elId),div;if(el.length){return el;}else{div=jQuery("<div></div>").attr("id",elId).css("display","none");jQuery("body").append(div);return div;}};widget.ui={head:function(content){jQuery("head").append(content);},body:function(content){jQuery(container).empty().append(content);}};widget.ready=function(fn){readyFn=fn;};widget.loading=function(fn){loadingFn=fn;};widget.error=function(fn){errorFn=fn;};widget.getReadyFn=function(){return readyFn;};widget.callReady=function(){return readyFn.call(widget);};widget.init=function(){__util.log("@sqwidget.js, widget.init dataSqwidget is",dataSqwidget);__util.log("@sqwidget.js, widget.init dataSqwidget settings is",settings);var sqTemplate=sqwidget.getTemplate(dataSqwidget.src,widget);__util.log("@sqwidget.js, widget.init sqTemplate is",sqTemplate);template=sqTemplate;sqTemplate.register(widget);};widget.reset=function(newDataSqwidget,newSettings){__util.log("@sqwidget.js, widget.reset dataSqwidget is",dataSqwidget);__util.log("@sqwidget.js, widget.reset newDataSqwidget is",newDataSqwidget);__util.log("@sqwidget.js, widget.reset dataSqwidget settings is",settings);__util.log("@sqwidget.js, widget.reset dataSqwidget newSettings is",newSettings);dataSqwidget=newDataSqwidget;settings=newSettings;__util.log("@sqwidget.js, widget.reset overrided dataSqwidget is",dataSqwidget);__util.log("@sqwidget.js, widget.reset overrided dataSqwidget settings is",settings);__util.log("@sqwidget.js, widget.reset dataSqwidget widget is",widget);var sqTemplate=sqwidget.getTemplate(dataSqwidget.src,widget);__util.log("@sqwidget.js, widget.reset sqTemplate is",sqTemplate);template=sqTemplate;sqTemplate.reinstall(widget);__util.log("@sqwidget.js, widget.reset toString=["+widget.toString()+"]");};widget.getSetting=function(key,defaultValue){return settings[key]||(template&&template.getSetting(key))||defaultValue;};widget.getDataSqwidget=function(){return dataSqwidget;};widget.getSettings=function(){return settings;};widget.getConfig=function(key,defaultValue){return dataSqwidget[key]||template.getConfig(key)||sqwidget.getConfig(key)||defaultValue;};widget.render=function(html,contents,place){var s=widget.renderTemplate(html,contents),p=place||container;jQuery(p).html(s);__util.log("@sqwidget.js, widget.render=["+jQuery(p).parent().html()+"]");};widget.showLoading=function(){var t;if(jQuery(".sqwidget-placeholder",container).length===0){if(loadingFn){loadingFn.call(widget);}else{t=template.getTemplate("loading");if(t){widget.render(t);}}}};widget.renderWithTemplate=function(name,contents){var d=template.getTemplate(name);return widget.renderTemplate(d,contents);};widget.setTemplate=function(type,contents,place){var d=template.getTemplate(type);if(d){widget.render(d,contents,place);}};widget.renderTemplate=tim;widget.runController=function(scripts){jQuery.each(scripts,function(s,script){evalScript(scripts[s]);});};widget.toString=function(){return"type: "+widgetType+" container id: "+div.id+" dataSqwidget: "+props(dataSqwidget)+" dataSqwidgetSettings: "+props(settings);};if(!MELON.CMTPGN.Sqwidget.hasMinVersion(jQuery.fn.jquery,"1.4.1")){widget.addEventListener=widget.removeEventListener=function(){};}return widget;};MELON.CMTPGN.Sqwidget.ready(function(){if(MELON.CMTPGN.Sqwidget.settings.automatic){return MELON.CMTPGN.Sqwidget.startWidgets();}});}(window,jQuery));


/* melonweb_cmtpgn_pc_sumry_type.min.20220922 */
(function(window){var MELON=window.MELON||(window.MELON={});MELON.CMTPGN=MELON.CMTPGN||{};MELON.CMTPGN.Config=MELON.CMTPGN.Config||{};MELON.CMTPGN.Global=MELON.CMTPGN.Global||{};MELON.CMTPGN.Sqwidget=MELON.CMTPGN.Sqwidget||{};MELON.CMTPGN.Api=MELON.CMTPGN.Api||{};MELON.CMTPGN.Util=MELON.CMTPGN.Util||{};MELON.CMTPGN.Msg=MELON.CMTPGN.Msg||{};MELON.CMTPGN.Sqwidget.plugin("melonweb_cmtpgn_pc_sumry_type",function(sqwidget,widget,$){var __config=MELON.CMTPGN.Config;var __global=MELON.CMTPGN.Global;var __sqwidget=MELON.CMTPGN.Sqwidget;var __api=MELON.CMTPGN.Api;var __util=MELON.CMTPGN.Util;var __msg=MELON.CMTPGN.Msg;var __websvc=MELON.WEBSVC;__util.log("@melonweb_cmtpgn_pc_sumry_type.js LOADED.");var _sqwidget=sqwidget;var _widget=widget;var C_EVENT_TYPE_PAGE_MORE="click.event.page.more";var C_EVENT_TYPE_PAGE_TOP="click.event.page.top";var C_EVENT_TYPE_PAGE_SORT="click.event.page.sort";var C_EVENT_TYPE_PAGE_SRCH_TYPE_CHANGE="change.event.page.srch";var C_EVENT_TYPE_PAGE_SRCH="click.event.page.srch";var C_EVENT_TYPE_PAGE_SRCH_EXECUTE="keypress.event.page.srch";var C_EVENT_TYPE_PAGE_SRCH_CANCEL="click.event.page.srch.cancel";var C_EVENT_TYPE_CMT_FOCUSIN="click.event.cmt.input";var C_EVENT_TYPE_CMT_PASTE="paste.event.cmt.input";var C_EVENT_TYPE_MULTIPLE_ARTIST="click.event.multiple.artist";var C_EVENT_TYPE_CLOSE_LAYER="click.event.close.layer";var C_EVENT_TYPE_SYNCPOST="click.event.syncpost";var C_EVENT_TYPE_ATACH_MUSIC="click.event.atach.music";var C_EVENT_TYPE_ATACH_MUSIC_SUGGEST="click.event.atach.music.suggest";var C_EVENT_TYPE_ATACH_MUSIC_SUGGEST_NAVIGATE="keydown.event.atach.music.suggest";var C_EVENT_TYPE_ATACH_MUSIC_SUGGEST_HOVER="mouseenter.event.atach.music.suggest";var C_EVENT_TYPE_ATACH_MUSIC_SUGGEST_FOCUSIN="focusin.event.atach.music.suggest";var C_EVENT_TYPE_ATACH_MUSIC_SUGGEST_FOCUSOUT="focusout.event.atach.music.suggest";var C_EVENT_TYPE_ATACH_MUSIC_SRCH="click.event.atach.music.srch";var C_EVENT_TYPE_ATACH_MUSIC_SORT="click.event.atach.music.sort";var C_EVENT_TYPE_ATACH_MUSIC_NAVIGATE="click.event.atach.music.navigate";var C_EVENT_TYPE_ATACH_MUSIC_SRCH_DTL="click.event.atach.music.srch.dtl";var C_EVENT_TYPE_ATACH_VIDEO="click.event.atach.video";var C_EVENT_TYPE_ATACH_VIDEO_SUGGEST="click.event.atach.video.suggest";var C_EVENT_TYPE_ATACH_VIDEO_SUGGEST_NAVIGATE="keydown.event.atach.video.suggest";var C_EVENT_TYPE_ATACH_VIDEO_SUGGEST_HOVER="mouseenter.event.atach.video.suggest";var C_EVENT_TYPE_ATACH_VIDEO_SUGGEST_FOCUSIN="focusin.event.atach.video.suggest";var C_EVENT_TYPE_ATACH_VIDEO_SUGGEST_FOCUSOUT="focusout.event.atach.video.suggest";var C_EVENT_TYPE_ATACH_VIDEO_SRCH="click.event.atach.video.srch";var C_EVENT_TYPE_ATACH_VIDEO_SORT="click.event.atach.video.sort";var C_EVENT_TYPE_ATACH_VIDEO_NAVIGATE="click.event.atach.video.navigate";var C_EVENT_TYPE_ATACH_IMAGE="click.event.atach.image";var C_EVENT_TYPE_ATACH_LINK="click.event.atach.link";var C_EVENT_TYPE_ATACH_LINK_TYPE_CHANGE="change.event.atach.link";var C_EVENT_TYPE_ATACH_LINK_EXECUTE="keypress.event.atach.link";var C_EVENT_TYPE_ATACH_DEL="click.event.atach.del";var C_EVENT_TYPE_ATACH_EXECUTE="click.event.atach.execute";var C_EVENT_TYPE_CMT_REG="click.event.cmt.reg";var C_EVENT_TYPE_CMT_UPDT="click.event.cmt.updt";var C_EVENT_TYPE_CMT_DEL="click.event.cmt.del";var C_EVENT_TYPE_CMT_MODIFY="click.event.cmt.modify";var C_EVENT_TYPE_CMT_CANCEL="click.event.cmt.cancel";var C_EVENT_TYPE_ADCMT_FOCUSIN="focusin.event.adcmt.input";var C_EVENT_TYPE_ADCMT_PASTE="paste.event.adcmt.input";var C_EVENT_TYPE_ADCMT_REG="click.event.adcmt.reg";var C_EVENT_TYPE_ADCMT_REG_EXECUTE="keypress.event.adcmt.reg";var C_EVENT_TYPE_ADCMT_DEL="click.event.adcmt.del";var C_EVENT_TYPE_CMT_EXPAND="click.event.cmt.expand";var C_EVENT_TYPE_CMT_PROFILE="click.event.cmt.profile";var C_EVENT_TYPE_CMT_PROFILE_WRITE="click.event.cmt.profilewrite";var C_EVENT_TYPE_CMT_COLLAPSE="click.event.cmt.collapse";var C_EVENT_TYPE_ADCMT_EXPAND="expand.event.adcmt.list";var C_EVENT_TYPE_ADCMT_COLLAPSE="collapse.event.adcmt.list";var C_EVENT_TYPE_RECM="click.event.recm";var C_EVENT_TYPE_REPRT="click.event.reprt";var C_EVENT_TYPE_REGPRT="click.reprt.reg";var C_EVENT_TYPE_CANCELPRT="click.reprt.cancel";var C_EVENT_TYPE_PHOTO_NAVI="click.event.photo.navi";var C_EVENT_TYPE_PHOTO_NAVI_FIRST="click.event.photo.navi.first";var C_EVENT_TYPE_PHOTO_NAVI_BEFORE="click.event.photo.navi.before";var C_EVENT_TYPE_PHOTO_NAVI_NEXT="click.event.photo.navi.next";var C_EVENT_TYPE_PHOTO_NAVI_END="click.event.photo.navi.end";var C_EVENT_TYPE_PHOTO_NAVI_RECENT="click.event.photo.navi.recent";var C_EVENT_TYPE_PHOTO_NAVI_RECM="click.event.photo.navi.recm";var C_EVENT_TYPE_PHOTO_NAVI_ADCMT="click.event.photo.navi.adcmt";var C_EVENT_TYPE_CMT_REG_AFTER="datachanged.cmt.reg";var C_EVENT_TYPE_CMT_UPDT_AFTER="datachanged.cmt.updt";var C_EVENT_TYPE_CMT_DEL_AFTER="datachanged.cmt.del";var $G_CONTAINER=null;var G_CONTAINER_ID=null;var G_READ_ONLY=false;var G_TEMPLATE_TYPE=null;var G_PAGE_TYPE=null;var G_TEXTAREA_TYPE=null;var G_CMT_POC_TYPE=null;var G_POC_ID=null;var G_MENU_ID="";var G_CHNL_SEQ=null;var G_CONTS_REF_VALUE=null;var G_CONTS_REF_URL=null;var G_LIST_PAGE_URL=null;var G_MYMUSIC_KEY=null;var G_PRIVATE_CONTS_FLAG=false;var G_MEMBER_INFO={isArtistMember:false,isDjMember:false,isBreakMember:false,isBreakIp:false,snsInfo:{}};var G_CHNL_INFO=null;var G_SPAM_INFO=null;var G_PAGE_INFO=null;var G_PAGING_INFO=null;var G_UPLOAD_HANDLER=null;var G_ATACH_CONSTRAINT_REG_COUNT=0;var G_ATACH_CONSTRAINT_UPDT_COUNT=0;var G_CMTPGN_RUNNABLE=false;var G_CMTPGN_INITIALIZED=false;var G_CMT_REG_REQUEST_FLAG=false;var G_CMT_MODIFY_REQUEST_FLAG=false;var G_CMT_UPDT_REQUEST_FLAG=false;var G_ADCMT_REG_REQUEST_FLAG=false;var G_MEMBER_KEY=null;var G_MEMBER_IMAGE=null;var G_MEMBER_ARTIST=false;var G_MEMBER_ARTIST_ID=null;var G_MEMBER_ARTISTIMAGE=null;var G_MEMBER_ANCM=false;var G_SNS_SYNCPST_CHNL_SEQS="102,103,104,105,501";var g_suggest_layer_open=false;var cache=[];var REPRT_CMT_OBJ={cmtSeq:null};var G_RECOMMEND_STATE={};var worker={};var _refreshHandler=function(){if(__util.isDefined(G_CMTPGN_RUNNABLE)!==true||G_CMTPGN_RUNNABLE!==true){__util.log("@_refreshHandler() executed. G_CMTPGN_RUNNABLE=["+G_CMTPGN_RUNNABLE+"]");worker.run();}else{if(__util.isDefined(G_CMTPGN_INITIALIZED)!==true||G_CMTPGN_INITIALIZED!==true){__util.log("@_refreshHandler() executed. G_CMTPGN_INITIALIZED=["+G_CMTPGN_INITIALIZED+"]");}else{__util.log("@_refreshHandler() executed. isCmtpgnHashed=["+__util.isCmtpgnHashed()+"]");worker.page.refresh();if(__util.isCmtpgnHashed()===true){if($G_CONTAINER.prev().length>0){$(window).scrollTop($G_CONTAINER.prev().offset().top);}else{$(window).scrollTop($G_CONTAINER.offset().top);}}}}};var _navigateHandler=function(pageNo,sortType,srchType,srchWord){if(__util.isDefined(G_CMTPGN_RUNNABLE)!==true||G_CMTPGN_RUNNABLE!==true){__util.log("@_navigateHandler() executed. G_CMTPGN_RUNNABLE=["+G_CMTPGN_RUNNABLE+"]");worker.run(pageNo,sortType,srchType,srchWord);}if(__util.isDefined(G_CMTPGN_INITIALIZED)!==true||G_CMTPGN_INITIALIZED!==true){__util.log("@_navigateHandler() executed. G_CMTPGN_INITIALIZED=["+G_CMTPGN_INITIALIZED+"]");}else{__util.log("@_navigateHandler() executed. pageNo=["+pageNo+"], sortType=["+sortType+"], srchType=["+srchType+"], srchWord=["+srchWord+"]");__util.log("@_navigateHandler() executed. isCmtpgnHashed=["+__util.isCmtpgnHashed()+"]");worker.page.navigate(pageNo,sortType,srchType,srchWord);if(__util.isCmtpgnHashed()===true){if($G_CONTAINER.prev().length>0){$(window).scrollTop($G_CONTAINER.prev().offset().top);}else{$(window).scrollTop($G_CONTAINER.offset().top);}}}};var _imageAtachUploadHandler=function(data){__util.log("@_imageAtachUploadHandler() executed.");worker.callback.atach.image(data);};var _musicAtachSuggestHandler=function(data){__util.log("@_musicAtachSuggestHandler() executed. data is",data);worker.callback.atach.music.suggest(data);};var _videoAtachSuggestHandler=function(data){__util.log("@_videoAtachSuggestHandler() executed. data is",data);worker.callback.atach.video.suggest(data);};worker.controller=$.address;worker.controller.location=window.location.href;worker.controller.value=$.address.value;worker.controller.move=$.address.value;__util.log("worker.controller.location=["+worker.controller.location+"]");__util.log("worker.controller.value()=["+worker.controller.value()+"]");worker.controller.strict(false);worker.controller.init(function(){__util.log("worker.controller initialized. value=["+worker.controller.value()+"]");});worker.controller.change(function(){if(__util.isEmpty(worker.controller.value())===true){_refreshHandler();}__util.log("worker.controller.change() value=["+worker.controller.value()+"]");__util.log("worker.controller.change() parameter(focus)=["+__util.getValueFromCmtpgnUrl(worker.controller.value(),"focus")+"]");__util.log("worker.controller.change() parameter(pageNo)=["+__util.getValueFromCmtpgnUrl(worker.controller.value(),"pageNo")+"]");__util.log("worker.controller.change() parameter(sortType)=["+__util.getValueFromCmtpgnUrl(worker.controller.value(),"sortType")+"]");__util.log("worker.controller.change() parameter(srchType)=["+__util.getValueFromCmtpgnUrl(worker.controller.value(),"srchType")+"]");__util.log("worker.controller.change() parameter(srchWord)=["+__util.getValueFromCmtpgnUrl(worker.controller.value(),"srchWord")+"]");var addressValue=worker.controller.value();var focusing=__util.getValueFromCmtpgnUrl(worker.controller.value(),"focus");if(__util.isEmpty(focusing)!==true){_refreshHandler();}else{var currentPageNo=__util.getValueFromCmtpgnUrl(addressValue,"pageNo");var currentSortType=__util.getValueFromCmtpgnUrl(addressValue,"sortType");var currentSrchType=__util.getValueFromCmtpgnUrl(addressValue,"srchType");var currentSrchWord=__util.getValueFromCmtpgnUrl(addressValue,"srchWord");if(__util.isEmpty(currentPageNo)===true){currentPageNo=__global.C_CMT_DFLT_PAGE_NO;}if(__util.isEmpty(currentSortType)===true||(Number(currentSortType)!==__global.C_CMT_SORT_TYPE_RECENT&&Number(currentSortType)!==__global.C_CMT_SORT_TYPE_RECM&&Number(currentSortType)!==__global.C_CMT_SORT_TYPE_ADCMT)){currentSortType=__global.C_CMT_DFLT_SORT_TYPE;}if(__util.isEmpty(currentSrchType)===true||(Number(currentSrchType)!==__global.C_CMT_SRCH_TYPE_MEMBER&&Number(currentSrchType)!==__global.C_CMT_SRCH_TYPE_CONTS)){currentSrchType=__global.C_CMT_DFLT_SRCH_TYPE;currentSrchWord=__global.C_CMT_DFLT_SRCH_WORD;}_navigateHandler(currentPageNo,currentSortType,currentSrchType,currentSrchWord);}});window._refreshHandler=_refreshHandler;window._navigateHandler=_navigateHandler;window._imageAtachUploadHandler=_imageAtachUploadHandler;window._musicAtachSuggestHandler=_musicAtachSuggestHandler;window._videoAtachSuggestHandler=_videoAtachSuggestHandler;worker.run=function(pageNo,sortType,srchType,srchWord){__util.log("@worker.run() executed.");G_CONTAINER_ID=widget.getId();G_READ_ONLY=(__util.isDefined(widget.getSetting("readOnly"))&&"true"===widget.getSetting("readOnly")?true:false);G_TEMPLATE_TYPE=widget.getSetting("templateType");G_PAGE_TYPE=widget.getSetting("pageType");G_TEXTAREA_TYPE=widget.getSetting("textareaType");G_MYMUSIC_KEY=widget.getSetting("mymusicKey");G_CMT_POC_TYPE=widget.getSetting("cmtPocType");G_POC_ID=widget.getSetting("pocId");G_MENU_ID=widget.getSetting("menuId");G_CHNL_SEQ=widget.getSetting("chnlSeq");G_CONTS_REF_VALUE=widget.getSetting("contsRefValue");G_CONTS_REF_URL=widget.getSetting("listPageUrl");G_LIST_PAGE_URL=widget.getSetting("listPageUrl");G_PRIVATE_CONTS_FLAG=__util.isDefined(widget.getSetting("privateYn"))&&widget.getSetting("privateYn").toUpperCase()=="Y";__util.log("worker.run() G_CONTAINER_ID=["+G_CONTAINER_ID+"], G_READ_ONLY=["+G_READ_ONLY+"]");__util.log("worker.run() G_TEMPLATE_TYPE=["+G_TEMPLATE_TYPE+"], G_PAGE_TYPE=["+G_PAGE_TYPE+"]");__util.log("worker.run() G_CMT_POC_TYPE=["+G_CMT_POC_TYPE+"], G_POC_ID=["+G_POC_ID+"], G_MENU_ID=["+G_MENU_ID+"]");__util.log("worker.run() G_CHNL_SEQ=["+G_CHNL_SEQ+"], G_CONTS_REF_VALUE=["+G_CONTS_REF_VALUE+"], G_CONTS_REF_URL=["+G_CONTS_REF_URL+"]");__util.log("worker.run() G_LIST_PAGE_URL=["+G_LIST_PAGE_URL+"]");var parameterMissing=false;if(__util.isDefined(G_CONTAINER_ID)){$G_CONTAINER=$("#"+G_CONTAINER_ID);}if(__util.isDefined($G_CONTAINER)!==true||$G_CONTAINER.length<1){__util.log("worker.run() CMTPGN: CONTAINER ID 지정필요");parameterMissing=true;}if(__util.isDefined(G_TEMPLATE_TYPE)!==true||__util.isEmpty(G_TEMPLATE_TYPE)===true){__util.log("worker.run() CMTPGN: templateType 누락");parameterMissing=true;}if(__util.isDefined(G_PAGE_TYPE)!==true||__util.isEmpty(G_PAGE_TYPE)===true){__util.log("worker.run() CMTPGN: pageType 누락");parameterMissing=true;}if(__util.isDefined(G_TEXTAREA_TYPE)!==true||__util.isEmpty(G_TEXTAREA_TYPE)===true){__util.log("worker.run() CMTPGN: textareaType 누락");parameterMissing=true;}if(__util.isDefined(G_CMT_POC_TYPE)!==true||__util.isEmpty(G_CMT_POC_TYPE)===true){__util.log("worker.run() CMTPGN: cmtPocType 누락");parameterMissing=true;}if(__util.isDefined(G_POC_ID)!==true||__util.isEmpty(G_POC_ID)===true){__util.log("worker.run() CMTPGN: pocId 누락");parameterMissing=true;}if(__util.isDefined(G_MENU_ID)!==true||__util.isEmpty(G_MENU_ID)===true){__util.log("worker.run() CMTPGN: menuId 누락");}if(__util.isDefined(G_CHNL_SEQ)!==true||__util.isEmpty(G_CHNL_SEQ)===true){__util.log("worker.run() CMTPGN: chnlSeq 누락");parameterMissing=true;}if(__util.isDefined(G_CONTS_REF_VALUE)!==true||__util.isEmpty(G_CONTS_REF_VALUE)===true){__util.log("worker.run() CMTPGN: contsRefValue 누락");parameterMissing=true;}if(G_PAGE_TYPE===__global.C_PAGE_TYPE_GUESTBOOK){if(__util.isEmpty(G_MYMUSIC_KEY)||Number(G_MYMUSIC_KEY)===__global.C_EMPTY_KEY){G_MYMUSIC_KEY=G_CONTS_REF_VALUE;}}if(__util.isDefined(G_LIST_PAGE_URL)!==true||__util.isEmpty(G_LIST_PAGE_URL)===true){__util.log("worker.run() CMTPGN: listPageUrl 누락");parameterMissing=true;}if(parameterMissing!==true){G_CMTPGN_RUNNABLE=true;__util.log("worker.run() parameter checked, worker.initialize() execution.");worker.initialize(pageNo,sortType,srchType,srchWord);}else{__util.log("worker.run() parameter missed, worker.initialize() stop.");}__util.log("worker.run() G_CMTPGN_RUNNABLE=["+G_CMTPGN_RUNNABLE+"]");__util.log("@worker.run() executed done.");};worker.initialize=function(pageNo,sortType,srchType,srchWord){__util.log("@worker.initialize() executed. G_CMTPGN_RUNNABLE=["+G_CMTPGN_RUNNABLE+"]");__util.log("@worker.initialize() executed. pageNo=["+pageNo+"], sortType=["+sortType+"], srchType=["+srchType+"], srchWord=["+srchWord+"]");var addressValue=worker.controller.value();__util.log("worker.initialize() addressValue=["+addressValue+"]");var initialPageNo=pageNo||__util.getValueFromCmtpgnUrl(addressValue,"pageNo");var initialSortType=sortType||__util.getValueFromCmtpgnUrl(addressValue,"sortType");var initialSrchType=srchType||__util.getValueFromCmtpgnUrl(addressValue,"srchType");var initialSrchWord=srchWord||decodeURIComponent(__util.getValueFromCmtpgnUrl(addressValue,"srchWord"));__util.log("worker.initialize() initialPageNo=["+initialPageNo+"], initialSortType=["+initialSortType+"], initialSrchType=["+initialSrchType+"], initialSrchWord=["+initialSrchWord+"]");if(__util.isEmpty(initialPageNo)===true){initialPageNo=__global.C_CMT_DFLT_PAGE_NO;}if(__util.isEmpty(initialSortType)===true||(Number(initialSortType)!==__global.C_CMT_SORT_TYPE_RECENT&&Number(initialSortType)!==__global.C_CMT_SORT_TYPE_RECM&&Number(initialSortType)!==__global.C_CMT_SORT_TYPE_ADCMT)){initialSortType=__global.C_CMT_DFLT_SORT_TYPE;}if(__util.isEmpty(initialSrchType)===true||(Number(initialSrchType)!==__global.C_CMT_SRCH_TYPE_MEMBER&&Number(initialSrchType)!==__global.C_CMT_SRCH_TYPE_CONTS)){initialSrchType=__global.C_CMT_DFLT_SRCH_TYPE;initialSrchWord=__global.C_CMT_DFLT_SRCH_WORD;}__util.log("worker.initialize() reqPageNo=["+initialPageNo+"], reqSortType=["+initialSortType+"], reqSrchType=["+initialSrchType+"], reqSrchWord=["+initialSrchWord+"]");var backdata={loader:worker.render.cmt.loading.start};var data={},callback=worker.callback.pgn.load;data.cmtPocType=G_CMT_POC_TYPE;data.pocId=G_POC_ID;data.chnlSeq=Number(G_CHNL_SEQ);data.contsRefValue=G_CONTS_REF_VALUE;if(G_PAGE_TYPE===__global.C_PAGE_TYPE_GUESTBOOK){data.mypageMemberKey=Number(G_MYMUSIC_KEY);}data.totalCnt=__global.C_CMT_INITIAL_TOTAL_CNT;data.validCnt=__global.C_CMT_INITIAL_VALID_CNT;data.startSeq=__global.C_CMT_INITIAL_START_SEQ;data.pageSize=__global.C_CMT_INITIAL_PAGE_SIZE;data.pageNo=initialPageNo;data.sortType=initialSortType;data.srchType=initialSrchType;data.srchWord=initialSrchWord;__api.pgn.load(data,callback,backdata);__util.log("@worker.initialize() executed done.");};worker.fallback={};worker.fallback.page=function(){__util.log("@worker.fallback.page() executed.");if(G_PAGE_TYPE!==__global.C_PAGE_TYPE_PHOTO){$G_CONTAINER.find("#d_cmtpgn_cmt_list_wrapper").show().html(_widget.renderWithTemplate("d_cmtpgn_fallback_wide_template")).find(".d_cmtpgn_fallback").show();}else{$G_CONTAINER.find("#d_cmtpgn_photo_inner_wrapper").wrap(_widget.renderWithTemplate("d_cmtpgn_photo_type_outer_wrapper_template")).show();$G_CONTAINER.find("#d_cmtpgn_cmt_list_wrapper").show().html(_widget.renderWithTemplate("d_cmtpgn_fallback_small_template")).find(".d_cmtpgn_fallback").show();}__util.log("@worker.fallback.page() executed done.");};worker.fallback.list=function(){__util.log("@worker.fallback.list() executed.");$G_CONTAINER.find("#d_cmtpgn_cmt_list_wrapper").show().find("ul").hide().andSelf().find(".d_cmtpgn_fallback").show().andSelf().find(".d_cmtpgn_loading").hide().andSelf().find(".d_cmtpgn_nodata").hide();__util.log("@worker.fallback.list() executed done.");};worker.fallback.alert=function(data){__util.log("@worker.fallback.alert() executed. data is",data);var msg;var execFunc;if(__util.isDefined(data.STATUS)===true&&data.STATUS===__global.C_STATUS_TIMEOUT){msg=(data.backdata.reqMethod==="GET"?__msg.CMTPGN999:__msg.CMTPGN998);}else{if(__util.isDefined(data.ERRORCODE)===true&&data.ERRORCODE===__global.C_ERROR_CODE_INTERNAL_ERROR){msg=(data.backdata.reqMethod==="GET"?__msg.CMTPGN999:__msg.CMTPGN998);}else{if(__util.isDefined(data.ERRORCODE)===true&&data.ERRORCODE===__global.C_ERROR_CODE_INVALID_TOKEN){msg=data.ERRORMESSAGE;execFunc=function(){if("WP42"==G_POC_ID){try{MelonAPI.window("forceLogout","");}catch(e){}}else{location.href=__config.C_MEMBER_LOGOUT_N_LOGIN_URL+"&cpId="+G_POC_ID;}};}else{if(__util.isEmpty(data.ERRORMESSAGE)!==true){msg=data.ERRORMESSAGE;}else{msg=(data.backdata.reqMethod==="GET"?__msg.CMTPGN999:__msg.CMTPGN998);}}}}alert(msg);if(__util.isDefined(execFunc)){execFunc();}__util.log("@worker.fallback.alert() executed done.");};worker.page={};worker.page.count=function(dsplyCnt){if(__util.isDefined(dsplyCnt)){$(".d_cmtpgn_cnt").text(__util.getNumericDsplyFormat(dsplyCnt));}else{$(".d_cmtpgn_cnt").text(__util.getNumericDsplyFormat(G_PAGE_INFO.totalCnt));}};worker.page.refresh=function(pageNo,sortType,srchType,srchWord){__util.log("@worker.page.refresh() executed. G_CMTPGN_RUNNABLE=["+G_CMTPGN_RUNNABLE+"], G_CMTPGN_INITIALIZED=["+G_CMTPGN_INITIALIZED+"]");if((__util.isDefined(G_CMTPGN_RUNNABLE)===true&&G_CMTPGN_RUNNABLE===true)&&(__util.isDefined(G_CMTPGN_INITIALIZED)===true&&G_CMTPGN_INITIALIZED===true)){__util.log("worker.page.refresh() executed. refresh pageNo=["+pageNo+"], sortType=["+sortType+"], srchType=["+srchType+"], srchWord=["+srchWord+"]");var $cmtInputLayout=$G_CONTAINER.find("#d_cmtpgn_cmt_write_box");$cmtInputLayout.find(".d_cmtpgn_atach_box").remove();$cmtInputLayout.find(".d_cmtpgn_char_cnt").text("0");$cmtInputLayout.find(".d_cmtpgn_cmt_edit_area").hide();$cmtInputLayout.find(".d_cmtpgn_cmt_guide").show();if(G_CHNL_INFO.snsSyncpstUseFlag===true){$cmtInputLayout.find(".d_cmtpgn_syncpost_btn").removeClass("on");}if(G_CHNL_INFO.secrtUseFlag===true){if($cmtInputLayout.find(".d_cmtpgn_secrt_flag").is(":checked")===true){$cmtInputLayout.find(".d_cmtpgn_secrt_flag").trigger("click");}}G_PAGE_INFO.totalCnt=__global.C_CMT_INITIAL_TOTAL_CNT;G_PAGE_INFO.validCnt=__global.C_CMT_INITIAL_VALID_CNT;G_PAGE_INFO.startSeq=__global.C_CMT_INITIAL_START_SEQ;G_PAGE_INFO.pageNo=(__util.isEmpty(pageNo)!==true?pageNo:__global.C_CMT_DFLT_PAGE_NO);G_PAGE_INFO.sortType=(__util.isEmpty(sortType)!==true?sortType:__global.C_CMT_DFLT_SORT_TYPE);G_PAGE_INFO.srchType=(__util.isEmpty(srchType)!==true?srchType:__global.C_CMT_DFLT_SRCH_TYPE);G_PAGE_INFO.srchWord=(__util.isEmpty(srchWord)!==true?srchWord:__global.C_CMT_DFLT_SRCH_WORD);__util.log("worker.page.refresh() reqPageNo=["+G_PAGE_INFO.pageNo+"], reqSortType=["+G_PAGE_INFO.sortType+"], reqSrchType=["+G_PAGE_INFO.srchType+"], reqSrchWord=["+G_PAGE_INFO.srchWord+"]");G_PAGE_INFO.pageSize=G_PAGE_INFO.pageSize;var backdata={loader:worker.render.cmt.loading.start};var data={},callback=worker.callback.cmt.refresh;data.cmtPocType=G_CMT_POC_TYPE;data.pocId=G_POC_ID;data.chnlSeq=Number(G_CHNL_SEQ);data.contsRefValue=G_CONTS_REF_VALUE;if(G_PAGE_TYPE===__global.C_PAGE_TYPE_GUESTBOOK){data.mypageMemberKey=Number(G_MYMUSIC_KEY);}data.totalCnt=G_PAGE_INFO.totalCnt;data.validCnt=G_PAGE_INFO.validCnt;data.startSeq=G_PAGE_INFO.startSeq;data.pageSize=G_PAGE_INFO.pageSize;data.pageNo=G_PAGE_INFO.pageNo;data.sortType=G_PAGE_INFO.sortType;data.srchType=G_PAGE_INFO.srchType;data.srchWord=G_PAGE_INFO.srchWord;__api.cmt.list(data,callback,backdata);}__util.log("@worker.page.refresh() executed done.");};worker.page.navigate=function(pageNo,sortType,srchType,srchWord){G_CMT_MODIFY_REQUEST_FLAG=false;G_CMT_UPDT_REQUEST_FLAG=false;G_ADCMT_REG_REQUEST_FLAG=false;__util.log("@worker.page.navigate() executed. G_CMTPGN_RUNNABLE=["+G_CMTPGN_RUNNABLE+"], G_CMTPGN_INITIALIZED=["+G_CMTPGN_INITIALIZED+"]");if((__util.isDefined(G_CMTPGN_RUNNABLE)===true&&G_CMTPGN_RUNNABLE===true)&&(__util.isDefined(G_CMTPGN_INITIALIZED)===true&&G_CMTPGN_INITIALIZED===true)){__util.log("worker.page.navigate() executed. navigate pageNo=["+pageNo+"], sortType=["+sortType+"], srchType=["+srchType+"], srchWord=["+srchWord+"]");__util.log("worker.page.navigate() controlled pageNo=["+G_PAGE_INFO.pageNo+"], sortType=["+G_PAGE_INFO.sortType+"], srchType=["+G_PAGE_INFO.srchType+"], srchWord=["+G_PAGE_INFO.srchWord+"]");if(G_PAGE_INFO.srchType!==Number(srchType)||G_PAGE_INFO.srchWord!==srchWord){G_PAGE_INFO.totalCnt=__global.C_CMT_INITIAL_TOTAL_CNT;G_PAGE_INFO.validCnt=__global.C_CMT_INITIAL_VALID_CNT;G_PAGE_INFO.startSeq=__global.C_CMT_INITIAL_START_SEQ;__util.log("worker.page.navigate() CONTROLLED INFO !==  REQUESTED INFO, RE-LOAD.");}G_PAGE_INFO.pageNo=pageNo;G_PAGE_INFO.sortType=sortType;G_PAGE_INFO.srchType=srchType;G_PAGE_INFO.srchWord=srchWord;__util.log("worker.page.navigate() reqPageNo=["+G_PAGE_INFO.pageNo+"], reqSortType=["+G_PAGE_INFO.sortType+"], reqSrchType=["+G_PAGE_INFO.srchType+"], reqSrchWord=["+G_PAGE_INFO.srchWord+"]");var backdata={loader:worker.render.cmt.loading.start};var data={},callback=worker.callback.cmt.list;data.cmtPocType=G_CMT_POC_TYPE;data.pocId=G_POC_ID;data.chnlSeq=Number(G_CHNL_SEQ);data.contsRefValue=G_CONTS_REF_VALUE;if(G_PAGE_TYPE===__global.C_PAGE_TYPE_GUESTBOOK){data.mypageMemberKey=Number(G_MYMUSIC_KEY);}data.totalCnt=G_PAGE_INFO.totalCnt;data.validCnt=G_PAGE_INFO.validCnt;data.startSeq=G_PAGE_INFO.startSeq;data.pageSize=G_PAGE_INFO.pageSize;data.pageNo=G_PAGE_INFO.pageNo;data.sortType=G_PAGE_INFO.sortType;data.srchType=G_PAGE_INFO.srchType;data.srchWord=G_PAGE_INFO.srchWord;__api.cmt.list(data,callback,backdata);}__util.log("@worker.page.navigate() executed done.");};worker.page.append=function(pageNo,sortType,srchType,srchWord){__util.log("@worker.page.append() executed. G_CMTPGN_RUNNABLE=["+G_CMTPGN_RUNNABLE+"], G_CMTPGN_INITIALIZED=["+G_CMTPGN_INITIALIZED+"]");if((__util.isDefined(G_CMTPGN_RUNNABLE)===true&&G_CMTPGN_RUNNABLE===true)&&(__util.isDefined(G_CMTPGN_INITIALIZED)===true&&G_CMTPGN_INITIALIZED===true)){__util.log("worker.page.append() append pageNo=["+pageNo+"], sortType=["+sortType+"], srchType=["+srchType+"], srchWord=["+srchWord+"]");G_PAGE_INFO.pageNo=pageNo;G_PAGE_INFO.sortType=sortType;G_PAGE_INFO.srchType=srchType;G_PAGE_INFO.srchWord=srchWord;var data={},callback=worker.callback.cmt.list;data.cmtPocType=G_CMT_POC_TYPE;data.pocId=G_POC_ID;data.chnlSeq=Number(G_CHNL_SEQ);data.contsRefValue=G_CONTS_REF_VALUE;if(G_PAGE_TYPE===__global.C_PAGE_TYPE_GUESTBOOK){data.mypageMemberKey=Number(G_MYMUSIC_KEY);}data.totalCnt=G_PAGE_INFO.totalCnt;data.validCnt=G_PAGE_INFO.validCnt;data.startSeq=G_PAGE_INFO.startSeq;data.pageSize=G_PAGE_INFO.pageSize;data.pageNo=G_PAGE_INFO.pageNo;data.sortType=G_PAGE_INFO.sortType;data.srchType=G_PAGE_INFO.srchType;data.srchWord=G_PAGE_INFO.srchWord;__api.cmt.list(data,callback);}__util.log("@worker.page.append() executed done.");};worker.callback={};worker.callback.pgn={};worker.callback.pgn.load=function(data){__util.log("@worker.callback.pgn.load() executed. data is",data);if(data.STATUS!==__global.C_STATUS_SUCCESS){worker.render.cmt.loading.finish(true);worker.fallback.page();return;}if(G_PAGE_TYPE!==__global.C_PAGE_TYPE_PHOTO){$G_CONTAINER.find(".d_cmtpgn_nodata").after(_widget.renderWithTemplate("d_cmtpgn_fallback_wide_template"));}else{$G_CONTAINER.find(".d_cmtpgn_nodata").after(_widget.renderWithTemplate("d_cmtpgn_fallback_small_template"));}var snsInfo=data.result.snsInfo;var chnlInfo=data.result.chnlInfo;var spamInfo=data.result.spamInfo;var pageInfo=data.result.pageInfo;var pagingInfo=data.result.pagingInfo;var topList=data.result.topList;var cmtList=data.result.cmtList;var myMemberInfo=data.result.myMemberInfo;if(__util.isDefined(myMemberInfo)){G_MEMBER_KEY=myMemberInfo.memberKey;G_MEMBER_IMAGE=myMemberInfo.mypageImg;G_MEMBER_ARTIST=myMemberInfo.artistFlag;G_MEMBER_ARTISTIMAGE=myMemberInfo.artistImage;G_MEMBER_ANCM=myMemberInfo.ancmFlag;}if(__util.isDefined(window.getMemberArtistId)){G_MEMBER_ARTIST_ID=window.getMemberArtistId;}__util.log("worker.callback.pgn.load() snsInfo is ",snsInfo);__util.log("worker.callback.pgn.load() chnlInfo is ",chnlInfo);__util.log("worker.callback.pgn.load() spamInfo is ",spamInfo);__util.log("worker.callback.pgn.load() pageInfo is ",pageInfo);__util.log("worker.callback.pgn.load() pagingInfo is ",pagingInfo);__util.log("worker.callback.pgn.load() topList is ",topList);__util.log("worker.callback.pgn.load() cmtList is ",cmtList);__util.log("worker.callback.pgn.load() myMemberInfo is ",myMemberInfo);if(__websvc.Auth.isMelonLogin()===true){__util.log("worker.callback.pgn.load() __util.isDefined(window.getMemberArtistId=["+__util.isDefined(window.getMemberArtistId)+"]");__util.log("worker.callback.pgn.load() __util.isDefined(window.getMemberDjYn)=["+__util.isDefined(window.getMemberDjYn)+"]");if(__util.isDefined(window.getMemberArtistId)===true){__util.log("worker.callback.pgn.load() getMemberArtistId()=["+getMemberArtistId()+"]");G_MEMBER_INFO.isArtistMember=(__util.isEmpty(getMemberArtistId())!==true&&getMemberArtistId()!=="0"?true:false);}if(__util.isDefined(window.getMemberDjYn)===true){__util.log("worker.callback.pgn.load() getMemberDjYn()=["+getMemberDjYn()+"]");G_MEMBER_INFO.isDjMember=(__util.isEmpty(getMemberDjYn())!==true&&(getMemberDjYn()).toUpperCase()==="Y"?true:false);}__util.log("worker.callback.pgn.load() G_MEMBER_INFO.isArtistMember=["+G_MEMBER_INFO.isArtistMember+"]");__util.log("worker.callback.pgn.load() G_MEMBER_INFO.isDjMember=["+G_MEMBER_INFO.isDjMember+"]");if(__util.isEmpty(snsInfo)!==true){G_MEMBER_INFO.snsInfo=snsInfo;}}G_MEMBER_INFO.isBreakMember=spamInfo.breakMemberFlag;G_MEMBER_INFO.isBreakIp=spamInfo.breakIpFlag;G_SPAM_INFO=spamInfo;G_CHNL_INFO=chnlInfo;if(__util.isEmpty(G_CHNL_INFO.cmtImageUploadDomain)!==true){__config.C_CDN_UPLOAD_HOST=G_CHNL_INFO.cmtImageUploadDomain;}G_CHNL_INFO.atachUseFlag=G_CHNL_INFO.atachUseFlag;G_CHNL_INFO.snsSyncpstUseFlag=G_CHNL_INFO.snsSyncpstUseFlag;G_CHNL_INFO.adcmtUseFlag=G_CHNL_INFO.adcmtUseFlag;G_CHNL_INFO.reprtUseFlag=G_CHNL_INFO.reprtUseFlag;G_CHNL_INFO.recmUseFlag=G_CHNL_INFO.recmUseFlag;G_CHNL_INFO.blindContsDsplyText=__util.isEmpty(G_CHNL_INFO.blindContsDsplyText)?__msg.CMTPGN117:G_CHNL_INFO.blindContsDsplyText;if(G_READ_ONLY===true||G_CHNL_INFO.blindContsCmtWriteFlag===true){G_CHNL_INFO.readOnlyFlag=true;G_CHNL_INFO.reprtUseFlag=false;G_CHNL_INFO.recmUseFlag=false;G_CHNL_INFO.cmtWriteUseFlag=false;G_CHNL_INFO.cmtModifyUseFlag=false;G_CHNL_INFO.cmtDelUseFlag=true;G_CHNL_INFO.adcmtWriteUseFlag=false;G_CHNL_INFO.adcmtDelUseFlag=true;}else{G_CHNL_INFO.cmtWriteUseFlag=true;G_CHNL_INFO.cmtModifyUseFlag=true;G_CHNL_INFO.cmtDelUseFlag=true;if(G_CHNL_INFO.adcmtUseFlag===true){G_CHNL_INFO.adcmtWriteUseFlag=true;G_CHNL_INFO.adcmtDelUseFlag=true;}else{G_CHNL_INFO.adcmtWriteUseFlag=false;G_CHNL_INFO.adcmtDelUseFlag=false;}}if(__util.isEmpty(__global.C_CHNL_SNS_PAGE_MAP[G_CHNL_INFO.chnlSeq])!==true){__util.log("worker.callback.pgn.load() __global.C_CHNL_SNS_PAGE_MAP[G_CHNL_INFO.chnlSeq]=["+__global.C_CHNL_SNS_PAGE_MAP[G_CHNL_INFO.chnlSeq]+"]");G_CHNL_INFO.snsSyncpstUseFlag=true;}else{__util.log("worker.callback.pgn.load() __global.C_CHNL_SNS_PAGE_MAP[G_CHNL_INFO.chnlSeq] NOT EXISTS.");G_CHNL_INFO.snsSyncpstUseFlag=false;}switch(G_PAGE_TYPE){case __global.C_PAGE_TYPE_GENERIC:G_CHNL_INFO.sumryUseFlag=true;G_CHNL_INFO.sortUseFlag=true;G_CHNL_INFO.srchUseFlag=true;G_CHNL_INFO.secrtUseFlag=false;break;case __global.C_PAGE_TYPE_SONG:G_CHNL_INFO.sumryUseFlag=true;G_CHNL_INFO.sortUseFlag=true;G_CHNL_INFO.srchUseFlag=true;G_CHNL_INFO.secrtUseFlag=false;G_CHNL_INFO.snsSyncpstUseFlag=true;G_CHNL_INFO.cmtModifyUseFlag=false;break;case __global.C_PAGE_TYPE_PHOTO:G_CHNL_INFO.sumryUseFlag=true;G_CHNL_INFO.sortUseFlag=true;G_CHNL_INFO.srchUseFlag=false;G_CHNL_INFO.secrtUseFlag=false;G_CHNL_INFO.snsSyncpstUseFlag=true;break;case __global.C_PAGE_TYPE_GUESTBOOK:G_CHNL_INFO.sumryUseFlag=true;G_CHNL_INFO.sortUseFlag=false;G_CHNL_INFO.srchUseFlag=false;G_CHNL_INFO.secrtUseFlag=true;G_CHNL_INFO.atachUseFlag=false;G_CHNL_INFO.snsSyncpstUseFlag=false;G_CHNL_INFO.cmtModifyUseFlag=false;break;default:G_CHNL_INFO.sumryUseFlag=true;G_CHNL_INFO.sortUseFlag=true;G_CHNL_INFO.srchUseFlag=true;G_CHNL_INFO.secrtUseFlag=false;break;}if(G_SNS_SYNCPST_CHNL_SEQS.indexOf(G_CHNL_INFO.chnlSeq)>-1){G_CHNL_INFO.snsSyncpstUseFlag=true;}G_PAGE_INFO=pageInfo;if(G_PAGE_INFO.srchType===__global.C_CMT_SRCH_TYPE_NONE){G_PAGE_INFO.srchType=__global.C_CMT_SRCH_TYPE_CONTS;G_PAGE_INFO.srchWord=__global.C_CMT_DFLT_SRCH_WORD;}G_PAGING_INFO=pagingInfo;__util.log("worker.callback.pgn.load() G_MEMBER_INFO is",G_MEMBER_INFO);G_CMTPGN_INITIALIZED=true;__util.log("worker.callback.pgn.load() G_CMTPGN_INITIALIZED=["+G_CMTPGN_INITIALIZED+"]");worker.render.page(cmtList,topList);__util.log("@worker.callback.pgn.load() executed done.");};worker.callback.cmt={};worker.callback.cmt.refresh=function(data){__util.log("@worker.callback.cmt.refresh() executed. data is",data);if(data.STATUS!==__global.C_STATUS_SUCCESS){worker.render.cmt.loading.finish(true);worker.fallback.page();return;}var pageInfo=data.result.pageInfo;var pagingInfo=data.result.pagingInfo;G_PAGE_INFO=pageInfo;if(G_PAGE_INFO.srchType===__global.C_CMT_SRCH_TYPE_NONE){G_PAGE_INFO.srchType=__global.C_CMT_SRCH_TYPE_CONTS;G_PAGE_INFO.srchWord=__global.C_CMT_DFLT_SRCH_WORD;}G_PAGING_INFO=pagingInfo;var $btn=$G_CONTAINER.find("#d_cmtpgn_cmt_count_wrapper").find(".d_cmtpgn_srch_cnt");var after=Number(G_PAGE_INFO.totalCnt);__util.log("worker.callback.cmt.refresh() after=["+after+"]");$btn.text(__util.getNumericDsplyFormat(after));var topList=data.result.topList;var cmtList=data.result.cmtList;worker.render.cmt.write();worker.render.cmt.count();worker.render.cmt.list(cmtList,topList,true);worker.render.cmt.navigator(cmtList);worker.render.cmt.srch();worker.render.cmt.loading.finish(false,__util.isDefined(topList)===true&&topList.length>0||__util.isDefined(cmtList)===true&&cmtList.length>0);worker.bind.all();worker.page.count(after);worker.render.cmt.replaceCntOnParentPage(G_PAGE_INFO.totalCnt);__util.log("@worker.callback.cmt.refresh() executed done.");};worker.callback.cmt.list=function(data){__util.log("@worker.callback.cmt.list() executed. data is",data);if(data.STATUS!==__global.C_STATUS_SUCCESS){worker.render.cmt.loading.finish(true);if(G_PAGE_TYPE!==__global.C_PAGE_TYPE_PHOTO){worker.fallback.list();}else{worker.fallback.alert(data);}return;}var pageInfo=data.result.pageInfo;var pagingInfo=data.result.pagingInfo;G_PAGE_INFO=pageInfo;if(G_PAGE_INFO.srchType===__global.C_CMT_SRCH_TYPE_NONE){G_PAGE_INFO.srchType=__global.C_CMT_SRCH_TYPE_CONTS;G_PAGE_INFO.srchWord=__global.C_CMT_DFLT_SRCH_WORD;}G_PAGING_INFO=pagingInfo;var topList=data.result.topList;var cmtList=data.result.cmtList;worker.render.cmt.count();worker.render.cmt.list(cmtList,topList);worker.render.cmt.navigator(cmtList);worker.render.cmt.srch();worker.render.cmt.loading.finish(false,__util.isDefined(topList)===true&&topList.length>0||__util.isDefined(cmtList)===true&&cmtList.length>0);worker.bind.list();__util.log("@worker.callback.cmt.list() executed done.");};worker.callback.cmt.modify=function(data){__util.log("@worker.callback.cmt.modify() executed. data is",data);if(data.STATUS!==__global.C_STATUS_SUCCESS){worker.fallback.alert(data);return;}G_CMT_MODIFY_REQUEST_FLAG=true;var cmtInfo=data.result.cmtInfo;var atachList=data.result.atachList;var memberInfo=data.result.memberInfo;worker.render.cmt.modify(cmtInfo,atachList,memberInfo);worker.bind.cmt.atach(cmtInfo.cmtSeq);var $cmt=$G_CONTAINER.find("#d_cmtpgn_cmt_list_wrapper").find("ul>li").filter('[data-cmt-id="'+cmtInfo.cmtSeq+'"]');if($cmt.find(".d_cmtpgn_adcmt_expand_btn").is(".on")===true){$cmt.find(".d_cmtpgn_adcmt_expand_btn").trigger("click");}var $cmtInputLayout=$cmt.find(".d_cmtpgn_cmt_edit_box");var $atachInputLayout=$cmtInputLayout.find(".d_cmtpgn_cmt_edit_area");__util.adjustCmtAtachText($atachInputLayout);__util.log("@worker.callback.cmt.modify() executed done.");};worker.callback.cmt.cancel=function(data){__util.log("@worker.callback.cmt.cancel() executed. data is",data);var $cmtModifyTarget=$G_CONTAINER.find("#d_cmtpgn_cmt_list_wrapper").find("ul>li").filter('[data-cmt-id="'+data+'"]').last();$cmtModifyTarget.find(".d_cmtpgn_cmt_cont_wrapper").show().next(".d_cmtpgn_cmt_info_wrapper").show();$cmtModifyTarget.find(".d_cmtpgn_cmt_edit_box").parent().remove();G_CMT_MODIFY_REQUEST_FLAG=false;__util.log("@worker.callback.cmt.cancel() executed done.");};worker.callback.cmt.view=function(data){__util.log("@worker.callback.cmt.view() executed. data is",data);if(data.STATUS!==__global.C_STATUS_SUCCESS){return;}var $cmt=$G_CONTAINER.find("#d_cmtpgn_cmt_list_wrapper").find("ul>li").filter('[data-cmt-id="'+data.result.cmtSeq+'"]');var $btn=$cmt.find(".d_cmtpgn_cmt_view_btn");var before=__util.getNumberOnly($.trim($($btn.get(0)).contents().filter(function(){return this.nodeType===1;}).text()));__util.log("worker.callback.cmt.view() before=["+before+"]");var after=__util.replaceAll($($btn.get(0)).html(),before,Number(before)+1);$btn.html(__util.getNumericDsplyFormat(after));__util.log("@worker.callback.cmt.view() executed done.");};worker.callback.cmt.reg=function(data){__util.log("@worker.callback.cmt.reg() executed. data is",data);G_CMT_REG_REQUEST_FLAG=false;G_CMT_MODIFY_REQUEST_FLAG=false;G_CMT_UPDT_REQUEST_FLAG=false;G_ADCMT_REG_REQUEST_FLAG=false;if(data.STATUS!==__global.C_STATUS_SUCCESS){worker.fallback.alert(data);return;}else{if(__util.isDefined(data.result.message)&&!__util.isEmpty(data.result.message)){alert(data.result.message);}}worker.constraint.timer.set();worker.callback.cmt.syncpst(data.backdata);worker.callback.cmt.datachanged(C_EVENT_TYPE_CMT_REG_AFTER);if(G_PAGE_TYPE===__global.C_PAGE_TYPE_PHOTO){worker.page.refresh();}else{__util.log("worker.callback.cmt.reg G_PAGE_INFO, pageNo=["+G_PAGE_INFO.pageNo+"], sortType=["+G_PAGE_INFO.sortType+"], srchType=["+G_PAGE_INFO.srchType+"], srchWord=["+G_PAGE_INFO.srchWord+"]");if(Number(G_PAGE_INFO.pageNo)===1&&Number(G_PAGE_INFO.sortType)===__global.C_CMT_DFLT_SORT_TYPE&&Number(G_PAGE_INFO.srchType)===__global.C_CMT_DFLT_SRCH_TYPE&&__util.isEmpty(G_PAGE_INFO.srchWord)===true){worker.page.refresh();}else{worker.controller.move(__util.makeRefreshHashString());}}__util.log("@worker.callback.cmt.reg() executed done.");};worker.callback.cmt.updt=function(data){__util.log("@worker.callback.cmt.updt() executed. data is",data);G_CMT_MODIFY_REQUEST_FLAG=false;G_CMT_UPDT_REQUEST_FLAG=false;if(data.STATUS!==__global.C_STATUS_SUCCESS){worker.fallback.alert(data);return;}else{if(__util.isDefined(data.message)&&!__util.isEmpty(data.message)){alert(data.message);}}worker.callback.cmt.syncpst(data.backdata);worker.callback.cmt.datachanged(C_EVENT_TYPE_CMT_UPDT_AFTER);var cmtInfo=data.result.cmtInfo;var atachList=data.result.atachList;var memberInfo=data.result.memberInfo;var $cmt=$G_CONTAINER.find("#d_cmtpgn_cmt_list_wrapper").find("ul>li").filter('[data-cmt-id="'+cmtInfo.cmtSeq+'"]');$cmt.replaceWith(worker.render.cmt.entry(cmtInfo,atachList,memberInfo));var $target=$G_CONTAINER.find("#d_cmtpgn_cmt_list_wrapper").find("ul>li").filter('[data-cmt-id="'+cmtInfo.cmtSeq+'"]');__util.adjustCmtAtachText($target);worker.bind.cmt.modify();__util.log("@worker.callback.cmt.updt() executed done.");};worker.callback.cmt.syncpst=function(data){var syncpstEntryList=data.syncpstEntryList||[];var syncpstMessage=data.syncpstMessage||"";if(__util.isEmpty(__global.C_CHNL_SNS_PAGE_MAP[G_CHNL_INFO.chnlSeq])!==true&&__util.isEmpty(syncpstMessage)==false){for(var k=0;k<syncpstEntryList.length;k++){if(syncpstEntryList[k]==="facebook"){try{melon.sns.postFacebook({type:__global.C_CHNL_SNS_PAGE_MAP[G_CHNL_INFO.chnlSeq],contsId:G_CONTS_REF_VALUE,memberKey:__websvc.Auth.getMemberKey(),message:syncpstMessage});}catch(e){__util.log("worker.handler.cmt.post() melon.sns.postFacebook catched",e);alert(__msg.CMTPGN506+", e=["+e+"]");}}if(syncpstEntryList[k]==="twitter"){try{melon.sns.postTwitter({type:__global.C_CHNL_SNS_PAGE_MAP[G_CHNL_INFO.chnlSeq],contsId:G_CONTS_REF_VALUE,memberKey:__websvc.Auth.getMemberKey(),message:syncpstMessage,menuId:G_MENU_ID});}catch(e){alert(__msg.CMTPGN506);__util.log("worker.handler.cmt.post() melon.sns.postTwitter catched",e);alert(__msg.CMTPGN506+", e=["+e+"]");}}}}};worker.callback.cmt.del=function(data){__util.log("@worker.callback.cmt.del() executed. data is",data);if(data.STATUS!==__global.C_STATUS_SUCCESS){worker.fallback.alert(data);return;}worker.callback.cmt.datachanged(C_EVENT_TYPE_CMT_DEL_AFTER);if(G_PAGE_TYPE===__global.C_PAGE_TYPE_PHOTO){worker.page.refresh();}else{__util.log("worker.callback.cmt.del G_PAGE_INFO, pageNo=["+G_PAGE_INFO.pageNo+"], sortType=["+G_PAGE_INFO.sortType+"], srchType=["+G_PAGE_INFO.srchType+"], srchWord=["+G_PAGE_INFO.srchWord+"]");if(Number(G_PAGE_INFO.pageNo)===1&&Number(G_PAGE_INFO.sortType)===__global.C_CMT_DFLT_SORT_TYPE&&Number(G_PAGE_INFO.srchType)===__global.C_CMT_DFLT_SRCH_TYPE&&__util.isEmpty(G_PAGE_INFO.srchWord)===true){worker.page.refresh();}else{worker.controller.move(__util.makeRefreshHashString());}}__util.log("@worker.callback.cmt.del() executed done.");};worker.callback.cmt.recm=function(data){__util.log("@worker.callback.cmt.recm() executed. data is",data);if(data.STATUS!==__global.C_STATUS_SUCCESS){worker.fallback.alert(data);var key=data.backdata.recommendStateKey;if(G_RECOMMEND_STATE[key]!=undefined){delete G_RECOMMEND_STATE[key];}return;}var $cmt=$G_CONTAINER.find("#d_cmtpgn_cmt_list_wrapper").find("ul>li").filter('[data-cmt-id="'+data.result.recmInfo.cmtSeq+'"]');var $recmCnt=$G_CONTAINER.find("#recmCnt_"+data.result.recmInfo.cmtSeq);var $nonRecmCnt=$G_CONTAINER.find("#nonRecmCnt_"+data.result.recmInfo.cmtSeq);var recmFlag=(data.result.recmInfo.recmFlag===true?true:false);var nonRecmFlag=(data.result.recmInfo.nonRecmFlag===true?true:false);var recmChgCount=data.result.recmInfo.recmChgCount;var nonRecmChgCount=data.result.recmInfo.nonRecmChgCount;__util.log("worker.callback.cmt.recm() recmFlag=["+recmFlag+"]");__util.log("worker.callback.cmt.recm() nonRecmFlag=["+nonRecmFlag+"]");__util.log("worker.callback.cmt.recm() recmChgCount=["+recmChgCount+"]");__util.log("worker.callback.cmt.recm() nonRecmChgCount=["+nonRecmChgCount+"]");var $recmBtn=$cmt.find(".d_cmtpgn_cmt_recm_btn");var $nonRecmBtn=$cmt.find(".d_cmtpgn_cmt_non_recm_btn");var test=$.trim($($recmBtn.get(0)).contents().text());var ntest=$.trim($($nonRecmBtn.get(0)).contents().text());var beforeRecmBtn=__util.getNumberOnly($.trim($($recmBtn.get(0)).contents().filter(function(){return this.nodeType===1;}).text()));var beforeNonRecmBtn=__util.getNumberOnly($.trim($($nonRecmBtn.get(0)).contents().filter(function(){return this.nodeType===1;}).text()));beforeRecmBtn=test.replace(/[^-\.0-9]/g,"");beforeNonRecmBtn=ntest.replace(/[^-\.0-9]/g,"");__util.log("worker.callback.cmt.recm() beforeRecmBtn=["+beforeRecmBtn+"]");__util.log("worker.callback.cmt.recm() beforeNonRecmBtn=["+beforeNonRecmBtn+"]");if(recmFlag==true){$recmBtn.addClass("on");}else{$recmBtn.removeClass("on");}if(nonRecmFlag==true){$nonRecmBtn.addClass("on");}else{$nonRecmBtn.removeClass("on");}if(recmChgCount!=0){var after=__util.replaceAll($($recmBtn.get(0)).html(),__util.getNumericDsplyFormat(beforeRecmBtn),Number(beforeRecmBtn)+recmChgCount);$recmBtn.html(__util.getNumericDsplyFormat(after));G_RECOMMEND_STATE[data.backdata.recommendStateKey]={state:false};}if(nonRecmChgCount!=0){var after=__util.replaceAll($($nonRecmBtn.get(0)).html(),__util.getNumericDsplyFormat(beforeNonRecmBtn),Number(beforeNonRecmBtn)+nonRecmChgCount);$nonRecmBtn.html(__util.getNumericDsplyFormat(after));G_RECOMMEND_STATE[data.backdata.recommendStateKey]={state:false};}__util.log("@worker.callback.cmt.recm() executed done.");};worker.callback.cmt.datachanged=function(eventType){__util.log("@worker.callback.cmt.datachanged() executed. eventType is",eventType);__util.log("CONTAINER : "+G_CONTAINER_ID);if(__util.isDefined(G_CONTAINER_ID)){$("#"+G_CONTAINER_ID).trigger(eventType);}__util.log("@worker.callback.cmt.datachanged() executed done.");};worker.callback.adcmt={};worker.callback.adcmt.reg=function(data){__util.log("@worker.callback.adcmt.reg() executed. data is",data);G_ADCMT_REG_REQUEST_FLAG=false;if(data.STATUS!==__global.C_STATUS_SUCCESS){worker.fallback.alert(data);return;}else{if(__util.isDefined(data.result.message)&&!__util.isEmpty(data.result.message)){alert(data.result.message);}}worker.constraint.timer.set();var adcmtInfo=data.result.adcmtInfo;var memberInfo=data.result.memberInfo;__util.log("worker.callback.adcmt.reg() parntCmtSeq=["+adcmtInfo.parntCmtSeq+"], cmtSeq=["+adcmtInfo.cmtSeq+"]");var $cmt=$G_CONTAINER.find("#d_cmtpgn_cmt_list_wrapper").find("li").filter('[data-cmt-id="'+adcmtInfo.parntCmtSeq+'"]');$cmt.find(".d_cmtpgn_char_cnt").text("0");$cmt.find(".d_cmtpgn_adcmt_input").val("").placeholder("update");if(G_CHNL_INFO.secrtUseFlag===true){__util.log("worker.callback.adcmt.reg() secrtFlag=["+($cmt.find(".d_cmtpgn_secrt_flag").is(":checked"))+"]");if($cmt.find(".d_cmtpgn_secrt_flag").is(":checked")===true){$cmt.find(".d_cmtpgn_secrt_flag").trigger("click");}}$cmt.find(".d_cmtpgn_adcmt_list").filter(function(index){return $(this).next().hasClass("d_cmtpgn_adcmt_write_box")===true;}).prepend(worker.render.adcmt.entry(adcmtInfo,memberInfo));var $btn=$cmt.find(".d_cmtpgn_adcmt_cnt");__util.log("worker.callback.adcmt.reg() $($btn.get(0)).text().trim()=["+$.trim($($btn.get(0)).text())+"]");var before=__util.getNumberOnly($.trim($($btn.get(0)).text()));__util.log("worker.callback.adcmt.reg() before=["+before+"]");var after=Number(before)+1;__util.log("worker.callback.adcmt.reg() after=["+after+"]");$btn.text(__util.getNumericDsplyFormat(after));__util.log("@worker.callback.adcmt.reg() executed done.");};worker.callback.adcmt.del=function(data){__util.log("@worker.callback.adcmt.del() executed. data is",data);if(data.STATUS!==__global.C_STATUS_SUCCESS){worker.fallback.alert(data);return;}var $cmt=$G_CONTAINER.find("#d_cmtpgn_cmt_list_wrapper").find("ul>li").filter('[data-cmt-id="'+data.result.parntCmtSeq+'"]');var $adcmt=$G_CONTAINER.find("#d_cmtpgn_cmt_list_wrapper").find("ul>li>ul.d_cmtpgn_adcmt_list>li").filter('[data-cmt-id="'+data.result.cmtSeq+'"]');var adcmtEntryTemplatePropty={};adcmtEntryTemplatePropty.secrtMarkHtml=($adcmt.attr("data-cmt-secrt")==="on"?_widget.renderWithTemplate("d_cmtpgn_secrt_mark_template"):"");adcmtEntryTemplatePropty.replaceCont=G_CHNL_INFO.deleteCmtDsplyText;$adcmt.remove();var $btn=$cmt.find(".d_cmtpgn_adcmt_cnt");__util.log("worker.callback.adcmt.del() $($btn.get(0)).text().trim()=["+$.trim($($btn.get(0)).text())+"]");var before=__util.getNumberOnly($.trim($($btn.get(0)).text()));__util.log("worker.callback.adcmt.del() before=["+before+"]");var after=Number(before)-1;__util.log("worker.callback.adcmt.del() after=["+after+"]");$btn.text(__util.getNumericDsplyFormat(after));__util.log("@worker.callback.adcmt.del() executed done.");};worker.callback.adcmt.recm=function(data){__util.log("@worker.callback.adcmt.recm() executed. data is",data);if(data.STATUS!==__global.C_STATUS_SUCCESS){worker.fallback.alert(data);var key=data.backdata.recommendStateKey;if(G_RECOMMEND_STATE[key]!=undefined){delete G_RECOMMEND_STATE[key];}return;}var $cmt=$G_CONTAINER.find("#d_cmtpgn_cmt_list_wrapper").find("ul>li>ul.d_cmtpgn_adcmt_list>li").filter('[data-cmt-id="'+data.result.recmInfo.cmtSeq+'"]');var $recmCnt=$G_CONTAINER.find("#recmCnt_"+data.result.recmInfo.cmtSeq);var $nonRecmCnt=$G_CONTAINER.find("#nonRecmCnt_"+data.result.recmInfo.cmtSeq);var recmFlag=(data.result.recmInfo.recmFlag===true?true:false);var nonRecmFlag=(data.result.recmInfo.nonRecmFlag===true?true:false);var recmChgCount=data.result.recmInfo.recmChgCount;var nonRecmChgCount=data.result.recmInfo.nonRecmChgCount;__util.log("worker.callback.adcmt.recm() recmFlag=["+recmFlag+"]");__util.log("worker.callback.adcmt.recm() nonRecmFlag=["+nonRecmFlag+"]");__util.log("worker.callback.adcmt.recm() recmChgCount=["+recmChgCount+"]");__util.log("worker.callback.adcmt.recm() nonRecmChgCount=["+nonRecmChgCount+"]");var $recmBtn=$cmt.find(".d_cmtpgn_adcmt_recm_btn");var $nonRecmBtn=$cmt.find(".d_cmtpgn_adcmt_non_recm_btn");var test=$.trim($($recmBtn.get(0)).contents().text());var ntest=$.trim($($nonRecmBtn.get(0)).contents().text());var beforeRecmBtn=__util.getNumberOnly($.trim($($recmBtn.get(0)).contents().filter(function(){return this.nodeType===1;}).text()));var beforeNonRecmBtn=__util.getNumberOnly($.trim($($nonRecmBtn.get(0)).contents().filter(function(){return this.nodeType===1;}).text()));beforeRecmBtn=test.replace(/[^-\.0-9]/g,"");beforeNonRecmBtn=ntest.replace(/[^-\.0-9]/g,"");__util.log("worker.callback.adcmt.recm() beforeRecmBtn=["+beforeRecmBtn+"]");__util.log("worker.callback.adcmt.recm() beforeNonRecmBtn=["+beforeNonRecmBtn+"]");if(recmFlag==true){$recmBtn.addClass("on");}else{$recmBtn.removeClass("on");}if(nonRecmFlag==true){$nonRecmBtn.addClass("on");}else{$nonRecmBtn.removeClass("on");}if(recmChgCount!=0){var after=__util.replaceAll($($recmBtn.get(0)).html(),__util.getNumericDsplyFormat(beforeRecmBtn),Number(beforeRecmBtn)+recmChgCount);$recmBtn.html(__util.getNumericDsplyFormat(after));G_RECOMMEND_STATE[data.backdata.recommendStateKey]={state:false};}if(nonRecmChgCount!=0){var after=__util.replaceAll($($nonRecmBtn.get(0)).html(),__util.getNumericDsplyFormat(beforeNonRecmBtn),Number(beforeNonRecmBtn)+nonRecmChgCount);$nonRecmBtn.html(__util.getNumericDsplyFormat(after));G_RECOMMEND_STATE[data.backdata.recommendStateKey]={state:false};}__util.log("@worker.callback.adcmt.recm() executed done.");};worker.callback.atach={};worker.callback.atach.music={};worker.callback.atach.music.srch=function(data){__util.log("@worker.callback.atach.music.srch() executed. data is",data);if(data.STATUS!==__global.C_STATUS_SUCCESS){worker.render.atach.music.loading.finish(true,data.backdata.editingCmtSeq);return;}var pageInfo=data.result.pageInfo;var srchList=data.result.musicList;var pagingInfo=data.result.pagingInfo;worker.render.atach.music.srch(data.backdata.editingCmtSeq,pageInfo,srchList,pagingInfo);worker.render.atach.music.loading.finish(false,data.backdata.editingCmtSeq);__util.log("@worker.callback.atach.music.srch() executed done.");};worker.callback.atach.music.suggest=function(data){__util.log("@worker.callback.atach.music.suggest() executed. data is",data);if(!g_suggest_layer_open){return;}if(data.STATUS!==__global.C_STATUS_SUCCESS){return;}var $cmtInputLayout=(Number(data.backdata.editingCmtSeq)===__global.C_EMPTY_KEY?$G_CONTAINER.find("#d_cmtpgn_cmt_write_box"):$G_CONTAINER.find("#d_cmtpgn_cmt_list_wrapper").find("ul>li").filter('[data-cmt-id="'+Number(data.backdata.editingCmtSeq)+'"]').find(".d_cmtpgn_cmt_edit_box"));var $atachMusicLayer=$cmtInputLayout.find(".d_cmtpgn_atach_music_layer");var $srchInputLayout=$atachMusicLayer.find(".d_cmtpgn_atach_srch_box");var srchWord=$srchInputLayout.find("input.d_cmtpgn_atach_music_srch_input").val();if(__util.isEmpty(srchWord)!==true&&__util.isDefined(data.result)&&data.result.keywordExist){var suggestKeyword,suggestHighlightKeyword,suggestKeywordEntryList=[];var artistName,albumName,songName,imgUrl,imgDsplyUrl,addInfo,artistId,albumId,songId,artistNameHighlight,songNameHighlight,albumNameHighlight,nationalityName,sex,actTypeNames;var suggestKeywordList=data.result.musicKeywordList;var artistKeywordList=data.result.artistKeywordList;var albumKeywordList=data.result.albumKeywordList;var songKeywordList=data.result.songKeywordList;suggestKeyword="";suggestKeywordEntryList=[];for(var i=0;i<artistKeywordList.length;i++){if(i==0){suggestKeywordEntryList.push(_widget.renderWithTemplate("d_cmtpgn_atach_melon_suggest_title",{title:"아티스트"}));}artistName=artistKeywordList[i].artistName;artistId=artistKeywordList[i].artistId;imgUrl=artistKeywordList[i].imgUrl||__global.C_ARTIST_DFLT_SRCH_IMG;imgDsplyUrl=artistKeywordList[i].imgDsplyUrl||__global.C_ARTIST_DFLT_DSPLY_IMG;nationalityName=artistKeywordList[i].nationalityName;sex=artistKeywordList[i].sex;actTypeNames=artistKeywordList[i].actTypeNames;addInfo=[nationalityName,sex,actTypeNames].join("/");artistNameHighlight=__util.getHighlightDsplyFormat(artistName,srchWord,"strong");suggestKeywordEntryList.push(_widget.renderWithTemplate("d_cmtpgn_atach_melon_suggest_artist_keyword_entry_template",{artistName:artistName,artistNameHighlight:artistNameHighlight,addInfo:addInfo,artistId:artistId,nationalityName:nationalityName,sex:sex,actTypeNames:actTypeNames,imgUrl:imgUrl,imgDsplyUrl:imgDsplyUrl}));}for(var i=0;i<songKeywordList.length;i++){if(i==0){suggestKeywordEntryList.push(_widget.renderWithTemplate("d_cmtpgn_atach_melon_suggest_title",{title:"곡"}));}songName=songKeywordList[i].songName;songId=songKeywordList[i].songId;albumName=songKeywordList[i].albumName;albumId=songKeywordList[i].albumId;artistName=songKeywordList[i].artistName;imgUrl=songKeywordList[i].imgUrl||__global.C_ALBUM_DFLT_SRCH_IMG;imgDsplyUrl=songKeywordList[i].imgDsplyUrl||__global.C_ALBUM_DFLT_DSPLY_IMG;songNameHighlight=__util.getHighlightDsplyFormat(songName,srchWord,"strong");suggestKeywordEntryList.push(_widget.renderWithTemplate("d_cmtpgn_atach_melon_suggest_song_keyword_entry_template",{songId:songId,songName:songName,songNameHighlight:songNameHighlight,albumId:albumId,albumName:albumName,artistName:artistName,imgUrl:imgUrl,imgDsplyUrl:imgDsplyUrl}));}for(var i=0;i<albumKeywordList.length;i++){if(i==0){suggestKeywordEntryList.push(_widget.renderWithTemplate("d_cmtpgn_atach_melon_suggest_title",{title:"앨범"}));}albumName=albumKeywordList[i].albumName;albumId=albumKeywordList[i].albumId;artistName=albumKeywordList[i].artistName;imgUrl=albumKeywordList[i].imgUrl||__global.C_ALBUM_DFLT_SRCH_IMG;imgDsplyUrl=albumKeywordList[i].imgDsplyUrl||__global.C_ALBUM_DFLT_DSPLY_IMG;albumNameHighlight=__util.getHighlightDsplyFormat(albumName,srchWord,"strong");suggestKeywordEntryList.push(_widget.renderWithTemplate("d_cmtpgn_atach_melon_suggest_album_keyword_entry_template",{albumName:albumName,albumNameHighlight:albumNameHighlight,artistName:artistName,albumId:albumId,imgUrl:imgUrl,imgDsplyUrl:imgDsplyUrl}));}var $li;$li=$(".wrap_auto_search").find(".thumb_result li.class02").clone();$li.find("img").on("error",function(e){});if($srchInputLayout.find(".d_cmtpgn_atach_suggest_keyword").length>0){$srchInputLayout.find(".d_cmtpgn_atach_suggest_keyword").replaceWith(_widget.renderWithTemplate("d_cmtpgn_atach_melon_suggest_keyword_box_template",{suggestKeywordListHtml:suggestKeywordEntryList.join("")}));}else{$srchInputLayout.find("input.d_cmtpgn_atach_music_srch_input").after(_widget.renderWithTemplate("d_cmtpgn_atach_melon_suggest_keyword_box_template",{suggestKeywordListHtml:suggestKeywordEntryList.join("")}));}$srchInputLayout.addClass("on");}else{$srchInputLayout.removeClass("on").find(".d_cmtpgn_atach_suggest_keyword").remove();}__util.log("@worker.callback.atach.music.suggest() executed done.");};worker.callback.atach.music.song=function(editingCmtSeq,editingAtachSeq,artistId,artistName,albumId,albumName,albumImagePath,songId,songName,songAdultFlag,songAvailFlag,songHoldBackFlag,songFreezoneFlag,songHotSongFlag){__util.log("@worker.callback.music.song() executed.");__util.log("@worker.callback.music.song() executed. editingCmtSeq=["+editingCmtSeq+"], editingAtachSeq=["+editingAtachSeq+"], artistId=["+artistId+"], artistName=["+artistName+"], albumImagePath=["+albumImagePath+"], albumId=["+albumId+"], albumName=["+albumName+"], songId=["+songId+"], songName=["+songName+"], songAdultFlag=["+songAdultFlag+"], songAvailFlag=["+songAvailFlag+"], songHoldBackFlag=["+songHoldBackFlag+"], songFreezoneFlag=["+songFreezoneFlag+"], songHotSongFlag=["+songHotSongFlag+"]");var atachInfo={};atachInfo.atachPropty={};atachInfo.atachSeq=Number(editingAtachSeq);atachInfo.atachType=__global.C_ATACH_TYPE_MUSIC_SONG;atachInfo.atachValue=songId;var artistIds=artistId.split(",");var artistNames=artistName.split(",");if(__util.isDefined(artistIds)===true&&artistIds.length>0){atachInfo.atachPropty.artistList=[];for(var i=0;i<artistNames.length;i++){atachInfo.atachPropty.artistList.push({artistId:artistIds[i],artistName:artistNames[i]});}}atachInfo.atachPropty.albumId=albumId;atachInfo.atachPropty.albumName=albumName;atachInfo.atachPropty.albumImagePath=albumImagePath;atachInfo.atachPropty.songId=songId;atachInfo.atachPropty.songName=songName;atachInfo.atachPropty.adultFlag=songAdultFlag;atachInfo.atachPropty.svcAvailFlag=songAvailFlag;atachInfo.atachPropty.holdBackFlag=songHoldBackFlag;atachInfo.atachPropty.freezoneFlag=songFreezoneFlag;atachInfo.atachPropty.hotSongFlag=songHotSongFlag;worker.callback.atach.render(editingCmtSeq,atachInfo,false);worker.reset.atach.music(editingCmtSeq,true);__util.log("@worker.callback.music.song() executed done.");};worker.callback.atach.music.album=function(editingCmtSeq,editingAtachSeq,artistId,artistName,albumId,albumName,albumImagePath,albumIssueDate,albumAvailFlag){__util.log("@worker.callback.music.album() executed.");__util.log("@worker.callback.music.album() executed. editingCmtSeq=["+editingCmtSeq+"], editingAtachSeq=["+editingAtachSeq+"], artistId=["+artistId+"], artistName=["+artistName+"], albumId=["+albumId+"], albumName=["+albumName+"], albumImagePath=["+albumImagePath+"], albumIssueDate=["+albumIssueDate+"], albumAvailFlag=["+albumAvailFlag+"]");var atachInfo={};atachInfo.atachPropty={};atachInfo.atachSeq=Number(editingAtachSeq);atachInfo.atachType=__global.C_ATACH_TYPE_MUSIC_ALBUM;atachInfo.atachValue=albumId;var artistIds=artistId.split(",");var artistNames=artistName.split(",");if(__util.isDefined(artistIds)===true&&artistIds.length>0){atachInfo.atachPropty.artistList=[];for(var i=0;i<artistNames.length;i++){atachInfo.atachPropty.artistList.push({artistId:artistIds[i],artistName:artistNames[i]});}}atachInfo.atachPropty.albumId=albumId;atachInfo.atachPropty.albumName=albumName;atachInfo.atachPropty.albumImagePath=albumImagePath;atachInfo.atachPropty.dsplyIssueDate=albumIssueDate;atachInfo.atachPropty.svcAvailFlag=albumAvailFlag;worker.callback.atach.render(editingCmtSeq,atachInfo,false);worker.reset.atach.music(editingCmtSeq,true);__util.log("@worker.callback.music.album() executed done.");};worker.callback.atach.music.artist=function(editingCmtSeq,editingAtachSeq,artistId,artistName,artistImagePath,artistNationalityName,artistSexTypeName,artistActTypeName,artistGnrTypeName,artistFanCnt){__util.log("@worker.callback.music.artist() executed.");__util.log("@worker.callback.music.artist() executed. editingCmtSeq=["+editingCmtSeq+"], editingAtachSeq=["+editingAtachSeq+"], artistId=["+artistId+"], artistName=["+artistName+"], artistImagePath=["+artistImagePath+"], artistNationalityName=["+artistNationalityName+"], artistSexTypeName=["+artistSexTypeName+"], artistActTypeName=["+artistActTypeName+"], artistGnrTypeName=["+artistGnrTypeName+"], artistFanCnt=["+artistFanCnt+"]");var atachInfo={};atachInfo.atachPropty={};atachInfo.atachSeq=Number(editingAtachSeq);atachInfo.atachType=__global.C_ATACH_TYPE_MUSIC_ARTIST;atachInfo.atachValue=artistId;atachInfo.atachPropty.artistId=artistId;atachInfo.atachPropty.artistName=artistName;atachInfo.atachPropty.artistImagePath=artistImagePath;atachInfo.atachPropty.nationalityName=artistNationalityName;atachInfo.atachPropty.sex=artistSexTypeName;atachInfo.atachPropty.actTypeName=artistActTypeName;atachInfo.atachPropty.gnr=artistGnrTypeName;atachInfo.atachPropty.fanCnt=artistFanCnt;worker.callback.atach.render(editingCmtSeq,atachInfo,false);worker.reset.atach.music(editingCmtSeq,true);__util.log("@worker.callback.music.artist() executed done.");};worker.callback.atach.video=function(editingCmtSeq,editingAtachSeq,artistId,artistName,videoId,videoTitle,videoImagePath,videoAdultFlag,videoAgeLevel,videoPlayTime,videoViewCnt,videoIssueDate,videoAvailFlag,songId){__util.log("@worker.callback.atach.video() executed.");__util.log("@worker.callback.atach.video() executed. editingCmtSeq=["+editingCmtSeq+"], editingAtachSeq=["+editingAtachSeq+"], artistId=["+artistId+"], artistName=["+artistName+"], videoId=["+videoId+"], videoTitle=["+videoTitle+"], videoImagePath=["+videoImagePath+"], videoAdultFlag=["+videoAdultFlag+"], videoAgeLevel=["+videoAgeLevel+"], videoPlayTime=["+videoPlayTime+"], videoViewCnt=["+videoViewCnt+"], videoIssueDate=["+videoIssueDate+"], videoAvailFlag=["+videoAvailFlag+"], songId=["+songId+"]");var atachInfo={};atachInfo.atachPropty={};atachInfo.atachSeq=Number(editingAtachSeq);atachInfo.atachType=__global.C_ATACH_TYPE_VIDEO;atachInfo.atachValue=videoId;var artistIds=artistId.split(",");var artistNames=artistName.split(",");if(__util.isDefined(artistIds)===true&&artistIds.length>0){atachInfo.atachPropty.artistList=[];for(var i=0,artistIdsSize=artistIds.length;i<artistIdsSize;i++){atachInfo.atachPropty.artistList.push({artistId:artistIds[i],artistName:artistNames[i]});}}atachInfo.atachPropty.videoId=videoId;atachInfo.atachPropty.videoTitle=videoTitle;atachInfo.atachPropty.videoImagePath=videoImagePath;atachInfo.atachPropty.videoAdultFlag=videoAdultFlag;atachInfo.atachPropty.videoAgeLevel=videoAgeLevel;atachInfo.atachPropty.dsplyPlayTime=videoPlayTime;atachInfo.atachPropty.videoViewCnt=videoViewCnt;atachInfo.atachPropty.dsplyVideoIssueDate=videoIssueDate;atachInfo.atachPropty.svcAvailFlag=videoAvailFlag;atachInfo.atachPropty.songId=songId;worker.callback.atach.render(editingCmtSeq,atachInfo,false);worker.reset.atach.video(editingCmtSeq,true);__util.log("@worker.callback.atach.video() executed done.");};worker.callback.atach.video.srch=function(data){__util.log("@worker.callback.atach.video.srch() executed. data is",data);if(data.STATUS!==__global.C_STATUS_SUCCESS){worker.render.atach.video.loading.finish(true,data.backdata.editingCmtSeq);return;}var pageInfo=data.result.pageInfo;var srchList=data.result.musicList;var pagingInfo=data.result.pagingInfo;worker.render.atach.video.srch(data.backdata.editingCmtSeq,pageInfo,srchList,pagingInfo);worker.render.atach.video.loading.finish(false,data.backdata.editingCmtSeq);__util.log("@worker.callback.atach.video.srch() executed done.");};worker.callback.atach.video.suggest=function(data){__util.log("worker.callback.atach.video.suggest() executed. data is",data);if(!g_suggest_layer_open){return;}if(data.STATUS!==__global.C_STATUS_SUCCESS){return;}var $cmtInputLayout=(Number(data.backdata.editingCmtSeq)===__global.C_EMPTY_KEY?$G_CONTAINER.find("#d_cmtpgn_cmt_write_box"):$G_CONTAINER.find("#d_cmtpgn_cmt_list_wrapper").find("ul>li").filter('[data-cmt-id="'+Number(data.backdata.editingCmtSeq)+'"]').find(".d_cmtpgn_cmt_edit_box"));var $atachVideoLayer=$cmtInputLayout.find(".d_cmtpgn_atach_video_layer");var $srchInputLayout=$atachVideoLayer.find(".d_cmtpgn_atach_srch_box");var srchWord=$srchInputLayout.find("input.d_cmtpgn_atach_video_srch_input").val();if(__util.isEmpty(srchWord)!==true&&__util.isDefined(data.result)&&__util.isDefined(data.result.musicKeywordList)&&data.result.musicKeywordList.length>0){var suggestKeyword,suggestHighlightKeyword,suggestKeywordEntryList=[];var suggestKeywordList=data.result.musicKeywordList;for(var i=0,suggestKeywordListSize=suggestKeywordList.length;i<suggestKeywordListSize;i++){suggestKeyword=suggestKeywordList[i].keyword;suggestHighlightKeyword=__util.getHighlightDsplyFormat(suggestKeyword,srchWord,"strong");suggestKeywordEntryList.push(_widget.renderWithTemplate("d_cmtpgn_atach_melon_suggest_keyword_entry_template",{suggestKeyword:suggestKeyword,suggestHighlightKeyword:suggestHighlightKeyword}));}if($srchInputLayout.find(".d_cmtpgn_atach_suggest_keyword").length>0){$srchInputLayout.find(".d_cmtpgn_atach_suggest_keyword").replaceWith(_widget.renderWithTemplate("d_cmtpgn_atach_melon_suggest_keyword_box_template",{suggestKeywordListHtml:suggestKeywordEntryList.join("")}));}else{$srchInputLayout.find("input.d_cmtpgn_atach_video_srch_input").after(_widget.renderWithTemplate("d_cmtpgn_atach_melon_suggest_keyword_box_template",{suggestKeywordListHtml:suggestKeywordEntryList.join("")}));}$srchInputLayout.addClass("on");}else{$srchInputLayout.removeClass("on").find(".d_cmtpgn_atach_suggest_keyword").remove();}__util.log("worker.callback.atach.video.suggest() executed done.");};worker.callback.atach.image=function(data){__util.log("@worker.callback.atach.image() executed.");if(Number(data.STATUS)===Number(__global.C_STATUS_SUCCESS)){var atachInfo={};atachInfo.atachPropty={};atachInfo.atachSeq=Number(G_UPLOAD_HANDLER.editingAtachSeq);atachInfo.atachType=__global.C_ATACH_TYPE_IMAGE;atachInfo.atachValue=__config.C_CDN_DOWNLOAD_HOST+G_UPLOAD_HANDLER.targetFilePath+"/"+G_UPLOAD_HANDLER.targetFileName;atachInfo.atachName=G_UPLOAD_HANDLER.fileName;__util.log("worker.callback.atach.image() upload fileName=["+atachInfo.atachName+"]");__util.log("worker.callback.atach.image() upload data.file=["+data.file+"]");__util.log("worker.callback.atach.image() upload path+name=["+G_UPLOAD_HANDLER.targetFilePath+"/"+G_UPLOAD_HANDLER.targetFileName+"]");atachInfo.atachPropty.originalUrl=__config.C_CDN_DOWNLOAD_HOST+G_UPLOAD_HANDLER.targetFilePath+"/"+G_UPLOAD_HANDLER.targetFileName+__config.C_CDN_ORIGINAL_POSTFIX;atachInfo.atachPropty.thumbUrl=__config.C_CDN_DOWNLOAD_HOST+G_UPLOAD_HANDLER.targetFilePath+"/"+G_UPLOAD_HANDLER.targetFileName+__config.C_CDN_THUMBNAIL_POSTFIX;worker.callback.atach.render(G_UPLOAD_HANDLER.editingCmtSeq,atachInfo,false);worker.reset.atach.image(G_UPLOAD_HANDLER.editingCmtSeq,true);}else{switch(data.code){case 2:alert(__msg.CDN02);break;case 3:alert(__msg.CDN03);break;case 4:alert(__msg.CDN04);break;case 6:alert(__msg.CDN06);break;case 7:alert(__msg.CDN07);break;case 8:alert(__msg.CDN08);break;case 9:alert(__msg.CDN09);break;case 91:alert(__msg.CDN91);break;case 94:alert(__msg.CDN94);break;case 95:alert(__msg.CDN95);break;case 96:alert(__msg.CDN96);break;case 98:alert(__msg.CDN98);break;case 99:alert(__msg.CDN99);break;default:alert(__msg.CMTPGN999);break;}}__util.log("@worker.callback.atach.image() executed done.");};worker.callback.atach.image.auth=function(data){__util.log("@worker.callback.atach.image.auth() executed. data is",data);if(data.STATUS!==__global.C_STATUS_SUCCESS){worker.fallback.alert(data);return;}G_UPLOAD_HANDLER={editingCmtSeq:data.backdata.editingCmtSeq,editingAtachSeq:data.backdata.editingAtachSeq,targetFilePath:data.backdata.targetFilePath,targetFileName:data.backdata.targetFileName,fileName:data.backdata.fileName};__util.log("worker.callback.atach.image.auth() G_UPLOAD_HANDLER settled",G_UPLOAD_HANDLER);var iframeHidden='<iframe name="d_cmtpgn_atach_image_frame" style="display:none"></iframe>';var authKeyHidden='<input type="hidden" id="auth" name="auth" value="'+data.authKey+'" />';var filePathHidden='<input type="hidden" id="filePath" name="filePath" value="'+data.backdata.targetFilePath+'" />';var fileNameHidden='<input type="hidden" id="fileName" name="fileName" value="'+data.backdata.targetFileName+'" />';var overWriteHidden='<input type="hidden" id="overWrite" name="overWrite" value="N" />';var $cmtInputLayout=(Number(data.backdata.editingCmtSeq)===__global.C_EMPTY_KEY?$G_CONTAINER.find("#d_cmtpgn_cmt_write_box"):$G_CONTAINER.find("#d_cmtpgn_cmt_list_wrapper").find("ul>li").filter('[data-cmt-id="'+Number(data.backdata.editingCmtSeq)+'"]').find(".d_cmtpgn_cmt_edit_box"));var $atachImageLayer=$cmtInputLayout.find(".d_cmtpgn_atach_image_layer");var $file=$atachImageLayer.find("input:file");$file.attr("id","uploadFile").attr("name","uploadFile");$file.closest("form").append(iframeHidden).append(authKeyHidden).append(filePathHidden).append(fileNameHidden).append(overWriteHidden).submit();__util.log("@worker.callback.atach.image.auth() executed done.");};worker.callback.atach.link=function(data){__util.log("@worker.callback.atach.link() executed. data is",data);var atachInfo={};atachInfo.atachPropty={};if(data.backdata.linkType===__global.C_ATACH_TYPE_LINK_VIDEO){if(data.STATUS!==__global.C_STATUS_SUCCESS){worker.fallback.alert(data);return;}if(__util.isDefined(data.result.videoTitle)!==true||__util.isDefined(data.result.thumbUrl)!==true){alert(__msg.CMTPGN017);return;}atachInfo.atachSeq=Number(data.backdata.editingAtachSeq);atachInfo.atachType=__global.C_ATACH_TYPE_LINK_VIDEO;atachInfo.atachValue=data.backdata.linkUrl;atachInfo.atachPropty.videoUrl=data.result.videoUrl;atachInfo.atachPropty.videoTitle=data.result.videoTitle;atachInfo.atachPropty.videoWidth=data.result.videoWidth;atachInfo.atachPropty.videoHeight=data.result.videoHeight;atachInfo.atachPropty.thumbUrl=data.result.thumbUrl;}else{atachInfo.atachSeq=Number(data.backdata.editingAtachSeq);atachInfo.atachType=__global.C_ATACH_TYPE_LINK_GENRL;atachInfo.atachValue=data.backdata.linkUrl;atachInfo.atachPropty.linkUrl=data.backdata.linkUrl;}worker.callback.atach.render(data.backdata.editingCmtSeq,atachInfo,false);worker.reset.atach.link(data.backdata.editingCmtSeq,true);__util.log("@worker.callback.atach.link() executed done.");};worker.callback.atach.render=function(cmtSeq,atachInfo,initialFlag){__util.log("@worker.callback.atach.render() executed. cmtSeq=["+cmtSeq+"]");var atachType=atachInfo.atachType,atachSeq=atachInfo.atachSeq;var atachEntryHtml=worker.render.atach.entry.edit(cmtSeq,atachInfo);__util.log("worker.callback.atach.render() executed. atachType=["+atachType+"], atachEntryHtml=["+atachEntryHtml+"]");__util.log("worker.callback.atach.render() executed. initialFlag=["+initialFlag+"]");var $cmtInputLayout=(Number(cmtSeq)===__global.C_EMPTY_KEY?$G_CONTAINER.find("#d_cmtpgn_cmt_write_box"):$G_CONTAINER.find("#d_cmtpgn_cmt_list_wrapper").find("ul>li").filter('[data-cmt-id="'+Number(cmtSeq)+'"]').find(".d_cmtpgn_cmt_edit_box"));var $atachInputLayout=$cmtInputLayout.find(".d_cmtpgn_cmt_edit_area");if(Number(cmtSeq)===__global.C_EMPTY_KEY){if($cmtInputLayout.find(".d_cmtpgn_cmt_guide").length>0&&$cmtInputLayout.find(".d_cmtpgn_cmt_guide").css("display")!=="none"){__util.log("worker.callback.atach.render() MAKING STARTING TEXTAREA");$cmtInputLayout.find(".d_cmtpgn_cmt_guide").trigger("click");}}if(initialFlag===true){$atachInputLayout.append(atachEntryHtml);}else{if(Number(cmtSeq)===__global.C_EMPTY_KEY){if(G_CHNL_INFO.atachMaxCnt===1&&G_ATACH_CONSTRAINT_REG_COUNT===1){$atachInputLayout.find(".d_cmtpgn_atach_box:not(textarea)").last().replaceWith(atachEntryHtml);G_ATACH_CONSTRAINT_REG_COUNT--;__util.log("worker.callback.atach.render() AVAILABLE ATACH COUNT == 1 LIMITED, G_ATACH_CONSTRAINT_REG_COUNT=["+G_ATACH_CONSTRAINT_REG_COUNT+"]");}else{$atachInputLayout.append(atachEntryHtml);}}else{if(G_CHNL_INFO.atachMaxCnt===1&&G_ATACH_CONSTRAINT_UPDT_COUNT===1){$atachInputLayout.find(".d_cmtpgn_atach_box:not(textarea)").last().replaceWith(atachEntryHtml);G_ATACH_CONSTRAINT_UPDT_COUNT--;__util.log("worker.callback.atach.render() AVAILABLE ATACH COUNT == 1 LIMITED, G_ATACH_CONSTRAINT_UPDT_COUNT=["+G_ATACH_CONSTRAINT_UPDT_COUNT+"]");}else{$atachInputLayout.append(atachEntryHtml);}}}if(Number(cmtSeq)===__global.C_EMPTY_KEY){if(atachType!==__global.C_ATACH_TYPE_TEXT){G_ATACH_CONSTRAINT_REG_COUNT++;}__util.log("worker.callback.atach.render() AVAILABLE ATACH COUNT++, G_ATACH_CONSTRAINT_REG_COUNT=["+G_ATACH_CONSTRAINT_REG_COUNT+"]");}else{if(atachType!==__global.C_ATACH_TYPE_TEXT){G_ATACH_CONSTRAINT_UPDT_COUNT++;}__util.log("worker.callback.atach.render() AVAILABLE ATACH COUNT++, G_ATACH_CONSTRAINT_UPDT_COUNT=["+G_ATACH_CONSTRAINT_UPDT_COUNT+"]");}if(atachType!==__global.C_ATACH_TYPE_TEXT){if(Number(atachSeq)===__global.C_EMPTY_KEY){__util.adjustCmtAtachText($atachInputLayout);}$atachInputLayout.find(".d_cmtpgn_atach_box").off(C_EVENT_TYPE_ATACH_DEL).on(C_EVENT_TYPE_ATACH_DEL,"button.d_cmtpgn_atach_del",function(e){e.preventDefault();var $editArea=$(this).closest(".d_cmtpgn_cmt_edit_area"),editSeq=$(this).closest(".d_cmtpgn_cmt_edit_box").attr("data-cmt-id");$(this).closest(".d_cmtpgn_atach_box").remove();if(Number(editSeq)===__global.C_EMPTY_KEY){G_ATACH_CONSTRAINT_REG_COUNT--;__util.log("worker.callback.atach.render() AVAILABLE ATACH COUNT++, G_ATACH_CONSTRAINT_REG_COUNT=["+G_ATACH_CONSTRAINT_REG_COUNT+"]");}else{G_ATACH_CONSTRAINT_UPDT_COUNT--;__util.log("worker.callback.atach.render() AVAILABLE ATACH COUNT++, G_ATACH_CONSTRAINT_UPDT_COUNT=["+G_ATACH_CONSTRAINT_UPDT_COUNT+"]");}setTimeout(function(){$editArea.find("textarea:first").focus();},0);return false;__util.log("worker.callback.atach.render() AVAILABLE ATACH COUNT--, G_ATACH_CONSTRAINT_UPDT_COUNT=["+G_ATACH_CONSTRAINT_UPDT_COUNT+"]");}).off(C_EVENT_TYPE_ATACH_EXECUTE).on(C_EVENT_TYPE_ATACH_EXECUTE,".d_cmtpgn_atach_content",function(e){__util.log("worker.callback.atach.render() C_EVENT_TYPE_ATACH_EXECUTE executed.");e.preventDefault();var $this=$(this),$atachBox=$this.closest(".d_cmtpgn_atach_box"),atachedType=$atachBox.attr("data-atach-type"),atachedId=$atachBox.attr("data-atach-id");__util.log("worker.callback.atach.render() C_EVENT_TYPE_ATACH_EXECUTE atachedType=["+atachedType+"], atachedId=["+atachedId+"]");var artistId,albumId,songId,videoId,videoLinkUrl,videoLinkTarget,videoLinkInfo,genrlLinkUrl,genrlLinkTarget;switch(atachedType){case __global.C_ATACH_TYPE_MUSIC_SONG:break;case __global.C_ATACH_TYPE_MUSIC_ALBUM:break;case __global.C_ATACH_TYPE_MUSIC_ARTIST:break;case __global.C_ATACH_TYPE_VIDEO:break;case __global.C_ATACH_TYPE_LINK_VIDEO:break;}__util.log("worker.callback.atach.render() C_EVENT_TYPE_ATACH_EXECUTE executed done.");});$atachInputLayout.scrollTop($atachInputLayout[0].scrollHeight);}if(initialFlag!==true){if(G_CHNL_INFO.textAtachUseFlag===true){if(G_CHNL_INFO.atachMaxCnt>1){__util.log("worker.callback.atach.render() MAKING TAILING TEXTAREA");worker.handler.atach.text(cmtSeq,__global.C_EMPTY_KEY);}else{if($atachInputLayout.find("textarea.d_cmtpgn_atach_box").length===1||$atachInputLayout.find(".d_cmtpgn_atach_box").last().is("textarea")!==true){__util.log("worker.callback.atach.render() MAKING TAILING TEXTAREA");worker.handler.atach.text(cmtSeq,__global.C_EMPTY_KEY);}}}}__util.log("@worker.callback.atach.render() executed done.");};worker.render={};worker.render.title=function(){__util.log("@worker.render.title() executed.");var $title=$G_CONTAINER.find("#d_cmtpgn_title_wrapper").hide();if(G_PAGE_TYPE!==__global.C_PAGE_TYPE_PHOTO){__util.log("worker.render.title() un-wrapping photo wrapper preceed.");$title.unwrap();if(__config.C_IS_LOCAL===true){var title=G_CHNL_INFO.pgnTitle+' (<span class="d_cmtpgn_cnt">0</span>)';$title.html(title).show();}else{$title.remove();}}worker.page.count();__util.log("@worker.render.title() executed done.");};worker.render.page=function(cmtList,topList){__util.log("@worker.render.page() executed.");worker.render.title();worker.render.cmt.dummy();worker.render.cmt.write();worker.render.cmt.count();worker.render.cmt.list(cmtList,topList);worker.render.cmt.navigator(cmtList);worker.render.cmt.srch();worker.render.cmt.reprtBind();worker.render.cmt.loading.finish(false,__util.isDefined(topList)===true&&topList.length>0||__util.isDefined(cmtList)===true&&cmtList.length>0);worker.bind.all();if(__util.isCmtpgnHashed()===true){__util.log("@worker.render.page() __util.isCmtpgnHashed() === true.");if($G_CONTAINER.prev().length>0){$(window).scrollTop($G_CONTAINER.prev().offset().top);}else{$(window).scrollTop($G_CONTAINER.offset().top);}}$("#d_cmtpgn").attr("class","d_cmtpgn ");__util.log("@worker.render.page() executed done.");};worker.render.cmt={};worker.render.cmt.loading={};worker.render.cmt.loading.start=function(){__util.log("@worker.render.cmt.loading.start() executed.");var $count=$G_CONTAINER.find("#d_cmtpgn_cmt_count_wrapper");var $list=$G_CONTAINER.find("#d_cmtpgn_cmt_list_wrapper");var $navigator=$G_CONTAINER.find("#d_cmtpgn_paginate_wrapper");var $srch=$G_CONTAINER.find("#d_cmtpgn_srch_wrapper");if(G_PAGE_TYPE===__global.C_PAGE_TYPE_PHOTO){$count.hide();$list.find(".d_cmtpgn_nodata").hide();}else{$count.hide();$list.show().find("ul").hide().andSelf().find(".d_cmtpgn_loading").show().andSelf().find(".d_cmtpgn_fallback").hide().andSelf().find(".d_cmtpgn_nodata").hide();$navigator.hide();$srch.hide();}__util.log("@worker.render.cmt.loading.start() executed done.");};worker.render.cmt.loading.finish=function(fallbackFlag,dataFlag){__util.log("@worker.render.cmt.loading.finish() executed. fallbackFlag=["+fallbackFlag+"], dataFlag=["+dataFlag+"]");if(fallbackFlag!==true){var $count=$G_CONTAINER.find("#d_cmtpgn_cmt_count_wrapper");var $sort=$count.find(".d_cmtpgn_sort_option_wrapper");var $list=$G_CONTAINER.find("#d_cmtpgn_cmt_list_wrapper");var $navigator=$G_CONTAINER.find("#d_cmtpgn_paginate_wrapper");var $srch=$G_CONTAINER.find("#d_cmtpgn_srch_wrapper");if(G_PAGE_TYPE!==__global.C_PAGE_TYPE_PHOTO){if(dataFlag===true){$sort.show();$count.show();$list.show().find("ul").show().andSelf().find(".d_cmtpgn_fallback").hide().andSelf().find(".d_cmtpgn_loading").hide().andSelf().find(".d_cmtpgn_nodata").hide();$navigator.show();$srch.show();}else{$sort.show();$count.show();$list.show().find("ul").hide().andSelf().find(".d_cmtpgn_fallback").hide().andSelf().find(".d_cmtpgn_loading").hide().andSelf().find(".d_cmtpgn_nodata").show();$navigator.hide();if(__util.isEmpty(G_PAGE_INFO)!==true){if(__util.isEmpty(G_PAGE_INFO.srchWord)===true){$srch.hide();}else{$srch.show();}}else{$srch.hide();}}}else{if(dataFlag===true){$sort.show();$count.show();$list.show().find("ul").show().andSelf().find(".d_cmtpgn_fallback").hide().andSelf().find(".d_cmtpgn_loading").hide().andSelf().find(".d_cmtpgn_nodata").hide();}else{$sort.show();$count.show();$list.show().find("ul").hide().andSelf().find(".d_cmtpgn_fallback").hide().andSelf().find(".d_cmtpgn_loading").hide().andSelf().find(".d_cmtpgn_nodata").show();}}if(dataFlag===true){__util.adjustCmtAtachText($list);}}__util.log("@worker.render.cmt.loading.finish() executed done.");};worker.render.cmt.navigator=function(cmtList){__util.log("@worker.render.cmt.navigator() executed.");if(G_CHNL_SEQ==105){if(G_PAGE_TYPE!==__global.C_PAGE_TYPE_PHOTO){__util.log("worker.render.cmt.navigator() totalCnt=["+G_PAGE_INFO.totalCnt+"], pageList=["+__util.isDefined(G_PAGING_INFO.pageList)+"], length=["+G_PAGING_INFO.pageList.length+"]");var $navigator=$G_CONTAINER.find("#d_cmtpgn_paginate_wrapper");if(G_PAGE_INFO.totalCnt>0&&(__util.isDefined(cmtList)===true&&cmtList.length>0)&&(__util.isDefined(G_PAGING_INFO.pageList)===true&&G_PAGING_INFO.pageList.length>0)){var pagingTemplatePropty={};pagingTemplatePropty.firstPageClassString=(Number(G_PAGE_INFO.pageNo)===Number(G_PAGING_INFO.firstPageNo)?' class="btn_first disabled d_cmtpgn_navigator_on_photo_first"':' class="btn_first d_cmtpgn_navigator_on_photo_first"');pagingTemplatePropty.prevPageClassString=(Number(G_PAGING_INFO.prevGroupPageNo)===0?' class="btn_pre disabled d_cmtpgn_navigator_on_photo_before"':' class="btn_pre d_cmtpgn_navigator_on_photo_before"');pagingTemplatePropty.nextPageClassString=(Number(G_PAGING_INFO.nextGroupPageNo)===0?' class="btn_next disabled d_cmtpgn_navigator_on_photo_next"':' class="btn_next d_cmtpgn_navigator_on_photo_next"');pagingTemplatePropty.lastPageClassString=(Number(G_PAGE_INFO.pageNo)===Number(G_PAGING_INFO.lastPageNo)?' class="btn_last disabled d_cmtpgn_navigator_on_photo_end"':' class="btn_last d_cmtpgn_navigator_on_photo_end"');var pagingEntryList=[],currentPage=G_PAGE_INFO.pageNo;for(var i=0,pageListSize=G_PAGING_INFO.pageList.length;i<pageListSize;i++){if(currentPage===G_PAGING_INFO.pageList[i].page){pagingEntryList.push('<strong><span class="none">현재페이지</span>'+G_PAGING_INFO.pageList[i].page+"</strong>");}else{pagingEntryList.push('<a href="" class="d_cmtpgn_navigator_on_photo">'+G_PAGING_INFO.pageList[i].page+"</a>");}}pagingTemplatePropty.pagingEntryListHtml=pagingEntryList.join("");$navigator.html(_widget.renderWithTemplate("d_cmtpgn_navigator_template_on_photo",pagingTemplatePropty));if(Number(G_PAGE_INFO.pageNo)===Number(G_PAGING_INFO.firstPageNo)){$navigator.find(".btn_first").removeAttr("href");}if(Number(G_PAGING_INFO.prevGroupPageNo)===0){$navigator.find(".btn_pre").removeAttr("href");}if(Number(G_PAGING_INFO.nextGroupPageNo)===0){$navigator.find(".btn_next").removeAttr("href");}if(Number(G_PAGE_INFO.pageNo)===Number(G_PAGING_INFO.lastPageNo)){$navigator.find(".btn_last").removeAttr("href");}}else{$navigator.html("");}}else{var $more=$G_CONTAINER.find("#d_cmtpgn_cmt_more_wrapper>button.d_cmtpgn_cmt_more");if($more.length<1){$G_CONTAINER.find("#d_cmtpgn_srch_wrapper,#d_cmtpgn_paginate_wrapper").remove();$G_CONTAINER.find("#d_cmtpgn_title_wrapper").replaceWith(_widget.renderWithTemplate("d_cmtpgn_photo_type_title_wrapper_template"));$G_CONTAINER.find("#d_cmtpgn_title_wrapper").html(G_CHNL_INFO.pgnTitle).show();$G_CONTAINER.find("#d_cmtpgn_photo_inner_wrapper").wrap(_widget.renderWithTemplate("d_cmtpgn_photo_type_outer_wrapper_template")).show();$G_CONTAINER.find("#d_cmtpgn_photo_inner_wrapper").after(_widget.renderWithTemplate("d_cmtpgn_photo_type_cmt_more_template",{pgnTitle:G_CHNL_INFO.pgnTitle}));}}}else{__util.log("worker.render.cmt.navigator() totalCnt=["+G_PAGE_INFO.totalCnt+"], pageList=["+__util.isDefined(G_PAGING_INFO.pageList)+"], length=["+G_PAGING_INFO.pageList.length+"]");var $navigator=$G_CONTAINER.find("#d_cmtpgn_paginate_wrapper");if(G_PAGE_INFO.totalCnt>0&&(__util.isDefined(cmtList)===true&&cmtList.length>0)&&(__util.isDefined(G_PAGING_INFO.pageList)===true&&G_PAGING_INFO.pageList.length>0)){var pagingTemplatePropty={};pagingTemplatePropty.firstPageHashString=__util.makeCmtpgnUrlHashString(worker.controller.value(),false,G_PAGING_INFO.firstPageNo,G_PAGE_INFO.sortType,G_PAGE_INFO.srchType,G_PAGE_INFO.srchWord);pagingTemplatePropty.prevPageHashString=__util.makeCmtpgnUrlHashString(worker.controller.value(),false,G_PAGING_INFO.prevGroupPageNo,G_PAGE_INFO.sortType,G_PAGE_INFO.srchType,G_PAGE_INFO.srchWord);pagingTemplatePropty.nextPageHashString=__util.makeCmtpgnUrlHashString(worker.controller.value(),false,G_PAGING_INFO.nextGroupPageNo,G_PAGE_INFO.sortType,G_PAGE_INFO.srchType,G_PAGE_INFO.srchWord);pagingTemplatePropty.lastPageHashString=__util.makeCmtpgnUrlHashString(worker.controller.value(),false,G_PAGING_INFO.lastPageNo,G_PAGE_INFO.sortType,G_PAGE_INFO.srchType,G_PAGE_INFO.srchWord);pagingTemplatePropty.firstPageClassString=(Number(G_PAGE_INFO.pageNo)===Number(G_PAGING_INFO.firstPageNo)?' class="btn_first disabled d_cmtpgn_navigator"':' class="btn_first d_cmtpgn_navigator"');pagingTemplatePropty.prevPageClassString=(Number(G_PAGING_INFO.prevGroupPageNo)===0?' class="btn_pre disabled d_cmtpgn_navigator"':' class="btn_pre d_cmtpgn_navigator"');pagingTemplatePropty.nextPageClassString=(Number(G_PAGING_INFO.nextGroupPageNo)===0?' class="btn_next disabled d_cmtpgn_navigator"':' class="btn_next d_cmtpgn_navigator"');pagingTemplatePropty.lastPageClassString=(Number(G_PAGE_INFO.pageNo)===Number(G_PAGING_INFO.lastPageNo)?' class="btn_last disabled d_cmtpgn_navigator"':' class="btn_last d_cmtpgn_navigator"');var pagingEntryList=[],currentPage=G_PAGE_INFO.pageNo;for(var i=0,pageListSize=G_PAGING_INFO.pageList.length;i<pageListSize;i++){if(currentPage===G_PAGING_INFO.pageList[i].page){pagingEntryList.push('<strong><span class="none">현재페이지</span>'+G_PAGING_INFO.pageList[i].page+"</strong>");}else{pagingEntryList.push('<a href="#'+__util.makeCmtpgnUrlHashString(worker.controller.value(),false,G_PAGING_INFO.pageList[i].page,G_PAGE_INFO.sortType,G_PAGE_INFO.srchType,G_PAGE_INFO.srchWord)+'" class="d_cmtpgn_navigator">'+G_PAGING_INFO.pageList[i].page+"</a>");}}pagingTemplatePropty.pagingEntryListHtml=pagingEntryList.join("");$navigator.html(_widget.renderWithTemplate("d_cmtpgn_navigator_template",pagingTemplatePropty));if(Number(G_PAGE_INFO.pageNo)===Number(G_PAGING_INFO.firstPageNo)){$navigator.find(".btn_first").removeAttr("href");}if(Number(G_PAGING_INFO.prevGroupPageNo)===0){$navigator.find(".btn_pre").removeAttr("href");}if(Number(G_PAGING_INFO.nextGroupPageNo)===0){$navigator.find(".btn_next").removeAttr("href");}if(Number(G_PAGE_INFO.pageNo)===Number(G_PAGING_INFO.lastPageNo)){$navigator.find(".btn_last").removeAttr("href");}}else{$navigator.html("");}}__util.log("@worker.render.cmt.navigator() executed done.");};worker.render.cmt.count=function(){__util.log("@worker.render.cmt.count() executed.");var $count=$G_CONTAINER.find("#d_cmtpgn_cmt_count_wrapper");var countTemplatePropty={};countTemplatePropty.totalCnt=__util.getNumericDsplyFormat(G_PAGE_INFO.totalCnt);countTemplatePropty.srchWord=__websvc.string.escapeHTML(G_PAGE_INFO.srchWord);if(G_CHNL_INFO.sortUseFlag===true){if(G_CHNL_SEQ==105&&G_PAGE_TYPE!==__global.C_PAGE_TYPE_PHOTO){if(G_PAGE_INFO.sortType===__global.C_CMT_SORT_TYPE_RECENT){countTemplatePropty.sortTypeRecentHtml='<li class="on"><strong title="최신순으로 보기">최신순</strong></li>';}else{countTemplatePropty.sortTypeRecentHtml='<li><a href="" class="sort_option_on_photo_recent" title="최신순으로 보기">최신순</a></li>';}if(G_CHNL_INFO.recmUseFlag===true){if(G_PAGE_INFO.sortType===__global.C_CMT_SORT_TYPE_RECM){countTemplatePropty.sortTypeRecmHtml='<li class="on"><strong title="추천순으로 보기">추천순</strong></li>';}else{countTemplatePropty.sortTypeRecmHtml='<li><a href="" class="sort_option_on_photo_recm" title="추천순으로 보기">추천순</a></li>';}}if(G_CHNL_INFO.adcmtUseFlag===true){if(G_PAGE_INFO.sortType===__global.C_CMT_SORT_TYPE_ADCMT){countTemplatePropty.sortTypeAdcmtHtml='<li class="on"><strong title="답글순으로 보기">답글순</strong></li>';}else{countTemplatePropty.sortTypeAdcmtHtml='<li><a href="" class="sort_option_on_photo_adcmt" title="답글순으로 보기">답글순</a></li>';}}}else{if(G_PAGE_INFO.sortType===__global.C_CMT_SORT_TYPE_RECENT){countTemplatePropty.sortTypeRecentHtml='<li class="on"><strong title="최신순으로 보기">최신순</strong></li>';}else{countTemplatePropty.sortTypeRecentHtml='<li><a href="#'+__util.makeCmtpgnUrlHashString(worker.controller.value(),false,__global.C_CMT_DFLT_PAGE_NO,__global.C_CMT_SORT_TYPE_RECENT,G_PAGE_INFO.srchType,G_PAGE_INFO.srchWord)+'" title="최신순으로 보기">최신순</a></li>';}if(G_CHNL_INFO.recmUseFlag===true){if(G_PAGE_INFO.sortType===__global.C_CMT_SORT_TYPE_RECM){countTemplatePropty.sortTypeRecmHtml='<li class="on"><strong title="추천순으로 보기">추천순</strong></li>';}else{countTemplatePropty.sortTypeRecmHtml='<li><a href="#'+__util.makeCmtpgnUrlHashString(worker.controller.value(),false,__global.C_CMT_DFLT_PAGE_NO,__global.C_CMT_SORT_TYPE_RECM,G_PAGE_INFO.srchType,G_PAGE_INFO.srchWord)+'" title="추천순으로 보기">추천순</a></li>';}}if(G_CHNL_INFO.adcmtUseFlag===true){if(G_PAGE_INFO.sortType===__global.C_CMT_SORT_TYPE_ADCMT){countTemplatePropty.sortTypeAdcmtHtml='<li class="on"><strong title="답글순으로 보기">답글순</strong></li>';}else{countTemplatePropty.sortTypeAdcmtHtml='<li><a href="#'+__util.makeCmtpgnUrlHashString(worker.controller.value(),false,__global.C_CMT_DFLT_PAGE_NO,__global.C_CMT_SORT_TYPE_ADCMT,G_PAGE_INFO.srchType,G_PAGE_INFO.srchWord)+'" title="답글순으로 보기">답글순</a></li>';}}}}if((G_PAGE_INFO.srchType===__global.C_CMT_SRCH_TYPE_MEMBER||G_PAGE_INFO.srchType===__global.C_CMT_SRCH_TYPE_CONTS)&&G_PAGE_INFO.srchWord.length>0){__util.log("worker.render.cmt.count() countTemplatePropty.srchWord=["+countTemplatePropty.srchWord+"]");$count.html(_widget.renderWithTemplate("d_cmtpgn_page_srch_template",countTemplatePropty));}else{$count.html(_widget.renderWithTemplate("d_cmtpgn_page_sort_template",countTemplatePropty));}$count.find(".d_cmtpgn_sort_option_wrapper").find("li:first").addClass("first_child");__util.log("@worker.render.cmt.count() executed done.");};worker.render.cmt.replaceCntOnParentPage=function(totalCnt){__util.log("@worker.render.cmt.replaceCntOnParentPage() executed. totalCnt=["+totalCnt+"]");var $parentPageRevCnt=$(".section_info").find("#revCnt");if(__util.isDefined($parentPageRevCnt)&&__util.isDefined(totalCnt)){var revCnt=MELON.WEBSVC.number.addComma(totalCnt);if(revCnt>999999){revCnt="999,999+";}$parentPageRevCnt.text(revCnt+"개");}__util.log("@worker.render.cmt.replaceCntOnParentPage() executed done.");};worker.render.cmt.srch=function(){__util.log("@worker.render.cmt.srch() executed. srchType=["+G_PAGE_INFO.srchType+"], G_PAGE_INFO.srchWord=["+G_PAGE_INFO.srchWord+"]");if(G_CHNL_INFO.srchUseFlag===true){var $srch=$G_CONTAINER.find("#d_cmtpgn_srch_wrapper");var srchOptionTemplatePropty={};if(__util.isEmpty(G_PAGE_INFO.srchType)!==true){switch(Number(G_PAGE_INFO.srchType)){case __global.C_CMT_SRCH_TYPE_MEMBER:srchOptionTemplatePropty.memberSrchSelectString=' selected="selected"';break;case __global.C_CMT_SRCH_TYPE_CONTS:srchOptionTemplatePropty.contsSrchSelectString=' selected="selected"';break;default:break;}}if($srch.find(".d_cmtpgn_srch_option_wrapper").length>0){$srch.html(_widget.renderWithTemplate("d_cmtpgn_srch_option_template",srchOptionTemplatePropty));}else{$srch.append(_widget.renderWithTemplate("d_cmtpgn_srch_option_template",srchOptionTemplatePropty));}$srch.find("input.d_cmtpgn_srch_input").val("").placeholder("update");if(__util.isEmpty(G_PAGE_INFO.srchWord)!==true){$srch.find("input.d_cmtpgn_srch_input").val(G_PAGE_INFO.srchWord);$srch.find("input.d_cmtpgn_srch_input").focus();if($G_CONTAINER.find("#d_cmtpgn_srch_cancel_wrapper").length<1){$G_CONTAINER.find("#d_cmtpgn_paginate_wrapper").before(_widget.renderWithTemplate("d_cmtpgn_srch_cancel_template"));}}else{$G_CONTAINER.find("#d_cmtpgn_srch_cancel_wrapper").remove();}}__util.log("@worker.render.cmt.srch() executed done.");};worker.render.cmt.reprtBind=function(){$("#d_cmtpgn_reprt_reson").attr("readonly","readonly").attr("placeholder","기타 항목 선택 후 입력해 주세요.").prop("disabled",true).val("");$("#reprt_popup > button").click(function(e){e.preventDefault();__util.log("worker.bind.reprt() C_EVENT_TYPE_CANCELPRT executed.");$("#reprt_popup input:radio[id=option1]").prop("checked",true);var $checked=$("#reprt_popup input:checked");$('#reprt_popup input:radio[name="reprt_radio"]').closest("li").removeClass("on");$checked.closest("li").addClass("on");$("#d_cmtpgn_reprt_reson").attr("readonly","readonly").attr("placeholder","기타 항목 선택 후 입력해 주세요.").prop("disabled",true).val("");REPRT_CMT_OBJ.cmtSeq=null;__util.log("worker.bind.reprt() C_EVENT_TYPE_CANCELPRT executed done.");});$("#reprt_popup > div > div > div > button").click(function(e){e.preventDefault();__util.log("worker.bind.reprt() C_EVENT_TYPE_REGPRT executed.");if(worker.constraint.readonly.reprt()!==true){return;}if(worker.constraint.login()!==true){return;}var reprtRegRequestFlag=false;if(reprtRegRequestFlag===true){alert(__msg.CMTPGN114);return;}var cmtPocType=G_CMT_POC_TYPE;var pocId=G_POC_ID;var chnlSeq=G_CHNL_SEQ;var contsRefValue=G_CONTS_REF_VALUE;var cmtSeq=REPRT_CMT_OBJ.cmtSeq;var reprtResonType=$(":input:radio[name=reprt_radio]:checked").val();var reprtReson=(reprtResonType==="etc"?$("body").find("#d_cmtpgn_reprt_reson").val().trim():"");if(__util.isEmpty(reprtResonType)===true){alert(__msg.CMTPGN112);return;}if(reprtResonType==="etc"&&__util.isEmpty(__util.getCmtTextEditFormat(reprtReson))===true){alert(__msg.CMTPGN113);$("#d_cmtpgn_reprt_reson").focus();return;}var data={};data.cmtPocType=cmtPocType;data.pocId=pocId;data.chnlSeq=Number(chnlSeq);data.contsRefValue=contsRefValue;data.cmtSeq=Number(cmtSeq);data.reprtResonType=reprtResonType;data.reprtReson=reprtReson;reprtRegRequestFlag=true;__api.reprt.reg(data,function(res){reprtRegRequestFlag=false;var msg;if(__util.isDefined(res)===true){if(__util.isDefined(res.STATUS)===true&&res.STATUS===__global.C_STATUS_SUCCESS){msg=__msg.MW067;}else{if(__util.isDefined(res.STATUS)===true&&res.STATUS===__global.C_STATUS_TIMEOUT){msg=__msg.CMTPGN998;}else{if(__util.isDefined(res.ERRORCODE)===true&&res.ERRORCODE===__global.C_ERROR_CODE_INTERNAL_ERROR){msg=__msg.CMTPGN998;}else{if(__util.isEmpty(res.ERRORMESSAGE)!==true){msg=res.ERRORMESSAGE;}else{msg=__msg.CMTPGN998;}}}}alert(msg);if(__util.isDefined(res.STATUS)===true&&res.STATUS===__global.C_STATUS_SUCCESS){$("#reprt_popup").modal("close");$("#reprt_popup input:radio[id=option1]").prop("checked",true);var $checked=$("#reprt_popup  input:checked");$('#reprt_popup input:radio[name="reprt_radio"]').closest("li").removeClass("on");$checked.closest("li").addClass("on");$("#d_cmtpgn_reprt_reson").attr("readonly","readonly").attr("placeholder","기타 항목 선택 후 입력해 주세요.").prop("disabled",true).val("");REPRT_CMT_OBJ.cmtSeq=null;}}else{alert(__msg.CMTPGN998);}});__util.log("worker.bind.reprt() C_EVENT_TYPE_REGPRT done.");});};worker.render.cmt.dummy=function(){if($G_CONTAINER.find("#"+__config.C_CMT_DUMMY_FORM_NAME).length<1){var textAreaRect=__util.getEditAreaRect(G_TEMPLATE_TYPE,G_TEXTAREA_TYPE,__global.C_TEXT_DUMMY_LEVEL_DSPLY);$G_CONTAINER.append(_widget.renderWithTemplate("d_cmtpgn_dummy_textarea_template",{textareaName:__config.C_CMT_DUMMY_TEXTAREA_NAME,textareaWidthValue:textAreaRect.width,textareaHeightValue:textAreaRect.height}));$G_CONTAINER.append('<form id="'+__config.C_CMT_DUMMY_FORM_NAME+'" name="'+__config.C_CMT_DUMMY_FORM_NAME+'"></form>');}};worker.render.cmt.write=function(){__util.log("@worker.render.cmt.write() executed.");if(G_CHNL_INFO.cmtWriteUseFlag===true){var cmtInputTemplatePropty={};cmtInputTemplatePropty.cmtSeq=__global.C_EMPTY_KEY;cmtInputTemplatePropty.pgnTitle=G_CHNL_INFO.pgnTitle;cmtInputTemplatePropty.cmtRegMaxLengthConf=G_CHNL_INFO.cmtRegMaxLength;cmtInputTemplatePropty.guideTextConf=__util.getGuideDsplyFormat(G_CHNL_INFO.cmtGuideText);if(G_TEXTAREA_TYPE==__global.C_TEXTAREA_TYPE_MEDIUM){cmtInputTemplatePropty.boxType="type02";$G_CONTAINER.find(".list_cmt").addClass("list_type_small");}if(Number(G_CHNL_SEQ)==11){$G_CONTAINER.find(".list_cmt").removeClass("list_type_small");$G_CONTAINER.find(".list_cmt").addClass("list_type_visitor");}cmtInputTemplatePropty.memberKey=G_MEMBER_KEY;cmtInputTemplatePropty.memberImage="";if(G_MEMBER_IMAGE!=null&&__util.isDefined(G_MEMBER_IMAGE)){cmtInputTemplatePropty.memberImage=G_MEMBER_IMAGE;}if(!__util.isDefined(cmtInputTemplatePropty.memberImage)||cmtInputTemplatePropty.memberImage==""){var profileImage=Math.floor(Math.random()*2);if(profileImage==0){cmtInputTemplatePropty.memberImage="//cdnimg.melon.co.kr/resource/image/cmt/web/common/noArtist01_300.jpg/melon/resize/120";}else{if(profileImage==1){cmtInputTemplatePropty.memberImage="//cdnimg.melon.co.kr/resource/image/cmt/web/common/noArtist02_300.jpg/melon/resize/120";}else{cmtInputTemplatePropty.memberImage="//cdnimg.melon.co.kr/resource/image/cmt/web/common/noArtist03_300.jpg/melon/resize/120";}}}if(G_MEMBER_ARTIST===true){cmtInputTemplatePropty.memberKey="artist_"+G_MEMBER_ARTIST_ID;cmtInputTemplatePropty.memberImage=G_MEMBER_ARTISTIMAGE;cmtInputTemplatePropty.cursorImage="";}else{if(G_MEMBER_ANCM==true){cmtInputTemplatePropty.memberKey="ancm_"+G_MEMBER_KEY;cmtInputTemplatePropty.memberImage=G_MEMBER_IMAGE;cmtInputTemplatePropty.cursorImage='style="cursor:default; text-decoration:none;"';}else{cmtInputTemplatePropty.memberKey=G_MEMBER_KEY;cmtInputTemplatePropty.cursorImage="";}}if(G_PAGE_TYPE!=__global.C_PAGE_TYPE_PHOTO){cmtInputTemplatePropty.memberImageArea=_widget.renderWithTemplate("d_cmtpgn_cmt_member_image_area_template",cmtInputTemplatePropty);cmtInputTemplatePropty.writeBoxClass="re_textarea_wrap";}else{cmtInputTemplatePropty.writeBoxClass="ancm";}if(G_CHNL_INFO.secrtUseFlag===true){cmtInputTemplatePropty.funcBtnHtml=_widget.renderWithTemplate("d_cmtpgn_secrt_check_box_template",{cmtSeq:"0"});}else{if(G_CHNL_INFO.atachUseFlag===true||G_CHNL_INFO.snsSyncpstUseFlag===true){if(G_CHNL_INFO.atachUseFlag===true){var atachBtnCount=0;var atachLayerLeftPositionValues=[0,-29,-59,-89];if(G_CHNL_INFO.musicAtachUseFlag===true){cmtInputTemplatePropty.atachMusicBtnHtml=_widget.renderWithTemplate("d_cmtpgn_atach_music_layer_btn_template",{layerLeftPositionValue:atachLayerLeftPositionValues[atachBtnCount++]});}if(G_CHNL_INFO.imageAtachUseFlag===true){cmtInputTemplatePropty.atachImageBtnHtml=_widget.renderWithTemplate("d_cmtpgn_atach_image_layer_btn_template",{layerLeftPositionValue:atachLayerLeftPositionValues[atachBtnCount++]});}if(G_CHNL_INFO.vdoAtachUseFlag===true){cmtInputTemplatePropty.atachVideoBtnHtml=_widget.renderWithTemplate("d_cmtpgn_atach_video_layer_btn_template",{layerLeftPositionValue:atachLayerLeftPositionValues[atachBtnCount++]});}if(G_CHNL_INFO.linkAtachUseFlag===true&&(G_CHNL_INFO.vdoLinkAtachUseFlag===true||G_CHNL_INFO.genrlLinkAtachUseFlag===true)){cmtInputTemplatePropty.atachLinkBtnHtml=_widget.renderWithTemplate("d_cmtpgn_atach_link_layer_btn_template",{layerLeftPositionValue:atachLayerLeftPositionValues[atachBtnCount++]});}}cmtInputTemplatePropty.funcBtnHtml=_widget.renderWithTemplate("d_cmtpgn_cmt_write_btn_box_template",cmtInputTemplatePropty);}}if(G_PAGE_TYPE===__global.C_PAGE_TYPE_PHOTO){cmtInputTemplatePropty.cmtBtnHtml=_widget.renderWithTemplate("d_cmtpgn_photo_type_cmt_reg_btn_box_template");}else{if(G_PAGE_TYPE===__global.C_PAGE_TYPE_GUESTBOOK){cmtInputTemplatePropty.cmtBtnHtml=_widget.renderWithTemplate("d_cmtpgn_guestbook_type_cmt_reg_btn_box_template");}else{cmtInputTemplatePropty.cmtBtnHtml=_widget.renderWithTemplate("d_cmtpgn_cmt_reg_btn_box_template");}}var $cmtInputLayout=$G_CONTAINER.find("#d_cmtpgn_cmt_write_box");if($cmtInputLayout.length>0){$cmtInputLayout.replaceWith(_widget.renderWithTemplate("d_cmtpgn_cmt_write_box_template",cmtInputTemplatePropty)).hide();}else{$G_CONTAINER.find("#d_cmtpgn_cmt_count_wrapper").before(_widget.renderWithTemplate("d_cmtpgn_cmt_write_box_template",cmtInputTemplatePropty)).hide();}$cmtInputLayout=$G_CONTAINER.find("#d_cmtpgn_cmt_write_box");if(G_CHNL_INFO.atachUseFlag!==true){$cmtInputLayout.find(".d_cmtpgn_atach_btn_wrapper").remove();}if(G_CHNL_INFO.snsSyncpstUseFlag!==true){}if(G_CHNL_INFO.atachUseFlag!==true&&G_CHNL_INFO.snsSyncpstUseFlag!==true&&G_PAGE_TYPE!==__global.C_PAGE_TYPE_GUESTBOOK&&G_PAGE_TYPE!==__global.C_PAGE_TYPE_PHOTO){$cmtInputLayout.addClass("no_btn_wrap");}$cmtInputLayout.show();worker.render.atach.layer(__global.C_EMPTY_KEY);}else{if(G_CHNL_INFO.blindContsCmtListFlag===true){$G_CONTAINER.find(".d_cmtpgn_nodata").text(G_CHNL_INFO.blindContsDsplyText).andSelf().show();}}__util.log("@worker.render.cmt.write() executed done.");};worker.render.cmt.modify=function(cmtInfo,atachList,memberInfo){__util.log("@worker.render.cmt.modify() executed.");__util.log("worker.render.cmt.modify() cmtInfo is",cmtInfo);__util.log("worker.render.cmt.modify() atachList is",atachList);__util.log("worker.render.cmt.modify() memberInfo is",memberInfo);var cmtModifyTemplatePropty={};cmtModifyTemplatePropty.cmtSeq=cmtInfo.cmtSeq;cmtModifyTemplatePropty.pgnTitle=G_CHNL_INFO.pgnTitle;cmtModifyTemplatePropty.cmtRegMaxLengthConf=G_CHNL_INFO.cmtRegMaxLength;var tempActFlag=cmtInfo.tempActFlag;if(G_CHNL_INFO.secrtUseFlag===true||cmtInfo.secrtFlag===true){var secrtCheckMarkString="";if(cmtInfo.secrtFlag===true){secrtCheckMarkString=' checked="checked" disabled="disabled"';}cmtModifyTemplatePropty.funcBtnHtml=_widget.renderWithTemplate("d_cmtpgn_secrt_check_box_template",{cmtSeq:cmtInfo.cmtSeq,secrtCheckMarkString:secrtCheckMarkString});}else{if(G_CHNL_INFO.atachUseFlag===true||G_CHNL_INFO.snsSyncpstUseFlag===true){if(G_CHNL_INFO.atachUseFlag===true){var atachBtnCount=0;var atachLayerLeftPositionValues=[0,-29,-59,-89];if(G_CHNL_INFO.musicAtachUseFlag===true){cmtModifyTemplatePropty.atachMusicBtnHtml=_widget.renderWithTemplate("d_cmtpgn_atach_music_layer_btn_template",{layerLeftPositionValue:atachLayerLeftPositionValues[atachBtnCount++]});}if(G_CHNL_INFO.imageAtachUseFlag===true){cmtModifyTemplatePropty.atachImageBtnHtml=_widget.renderWithTemplate("d_cmtpgn_atach_image_layer_btn_template",{layerLeftPositionValue:atachLayerLeftPositionValues[atachBtnCount++]});}if(G_CHNL_INFO.vdoAtachUseFlag===true){cmtModifyTemplatePropty.atachVideoBtnHtml=_widget.renderWithTemplate("d_cmtpgn_atach_video_layer_btn_template",{layerLeftPositionValue:atachLayerLeftPositionValues[atachBtnCount++]});}if(G_CHNL_INFO.linkAtachUseFlag===true&&(G_CHNL_INFO.vdoLinkAtachUseFlag===true||G_CHNL_INFO.genrlLinkAtachUseFlag===true)){cmtModifyTemplatePropty.atachLinkBtnHtml=_widget.renderWithTemplate("d_cmtpgn_atach_link_layer_btn_template",{layerLeftPositionValue:atachLayerLeftPositionValues[atachBtnCount++]});}}if(false){cmtModifyTemplatePropty.twitterSyncpstBtnHtml=_widget.renderWithTemplate("d_cmtpgn_syncpost_btn_template",{pgnTitle:G_CHNL_INFO.pgnTitle,snsName:"twitter",snsTitle:__global.C_SITE_NAME_MAP.twitter});}cmtModifyTemplatePropty.funcBtnHtml=_widget.renderWithTemplate("d_cmtpgn_cmt_modify_btn_box_template",cmtModifyTemplatePropty);}}if(G_PAGE_TYPE===__global.C_PAGE_TYPE_PHOTO){cmtModifyTemplatePropty.cmtBtnHtml=_widget.renderWithTemplate("d_cmtpgn_photo_type_cmt_updt_btn_box_template");}else{cmtModifyTemplatePropty.cmtBtnHtml=_widget.renderWithTemplate("d_cmtpgn_cmt_updt_btn_box_template");}var $cmtModifyTarget=$G_CONTAINER.find("#d_cmtpgn_cmt_list_wrapper").find("ul>li").filter('[data-cmt-id="'+cmtInfo.cmtSeq+'"]').last();var $cmtModifyLayout=$cmtModifyTarget.find(".d_cmtpgn_cmt_wrapper").append(_widget.renderWithTemplate("d_cmtpgn_cmt_modify_box_template",cmtModifyTemplatePropty)).hide();var $atachModifyLayout=$cmtModifyLayout.find(".d_cmtpgn_cmt_edit_area");if(G_CHNL_INFO.atachUseFlag!==true){$cmtModifyLayout.find(".d_cmtpgn_atach_btn_wrapper").remove();}if(G_CHNL_INFO.atachUseFlag!==true&&G_PAGE_TYPE!==__global.C_PAGE_TYPE_GUESTBOOK&&G_PAGE_TYPE!==__global.C_PAGE_TYPE_PHOTO){$cmtModifyLayout.find(".d_cmtpgn_cmt_edit_box").addClass("no_btn_wrap");}if(__util.isDefined(atachList)===true&&atachList.length>0&&tempActFlag!==true){if(atachList[0].atachType!==__global.C_ATACH_TYPE_TEXT){__util.log("worker.render.cmt.modify() MAKING STARTING TEXTAREA");worker.handler.atach.text(cmtInfo.cmtSeq,__global.C_EMPTY_KEY);}for(var j=0,atachListSize=atachList.length;j<atachListSize;j++){worker.callback.atach.render(cmtInfo.cmtSeq,atachList[j],true);if(G_CHNL_INFO.textAtachUseFlag===true&&atachList[j].atachType!==__global.C_ATACH_TYPE_TEXT&&(__util.isDefined(atachList[j+1])!==true||atachList[j+1].atachType!==__global.C_ATACH_TYPE_TEXT)){__util.log("worker.render.cmt.modify() MAKING TAILING TEXTAREA");worker.handler.atach.text(cmtInfo.cmtSeq,__global.C_EMPTY_KEY);}}}else{__util.log("worker.render.cmt.modify() MAKING STARTING TEXTAREA");worker.handler.atach.text(cmtInfo.cmtSeq,__global.C_EMPTY_KEY);}worker.render.atach.layer(cmtInfo.cmtSeq);$cmtModifyTarget.find(".d_cmtpgn_cmt_cont_wrapper").hide().next(".d_cmtpgn_cmt_info_wrapper").hide();$cmtModifyLayout.show();var $textarea=$atachModifyLayout.find("textarea");$textarea.cmtTextControl({limit:G_CHNL_INFO.cmtRegMaxLength,limitTarget:$cmtModifyLayout.find(".d_cmtpgn_char_cnt"),limitClassName:"textarea.d_cmtpgn_atach_box",allowPaste:G_CHNL_INFO.pastePermFlag});$textarea.autosize();$atachModifyLayout.scrollTop(0);setTimeout(function(){$atachModifyLayout.find("textarea:first").focus();},0);__util.log("@worker.render.cmt.modify() executed done.");};worker.render.cmt.list=function(cmtList,topList,refreshFlag){__util.log("@worker.render.cmt.list() executed.");var cmtEntryList=[];if(Number(G_PAGE_INFO.pageNo)===__global.C_CMT_DFLT_PAGE_NO){if(__util.isDefined(topList)===true&&topList.length>0){for(var i=0,topListSize=topList.length;i<topListSize;i++){if(topList[i].cmtInfo.delFlag!==true&&topList[i].cmtInfo.breakFlag!==true){cmtEntryList.push(worker.render.cmt.top(topList[i].cmtInfo,topList[i].atachList,topList[i].memberInfo));}}}}if(__util.isDefined(cmtList)===true&&cmtList.length>0){for(var j=0,cmtListSize=cmtList.length;j<cmtListSize;j++){cmtEntryList.push(worker.render.cmt.entry(cmtList[j].cmtInfo,cmtList[j].atachList,cmtList[j].memberInfo));}}var $list=$G_CONTAINER.find("#d_cmtpgn_cmt_list_wrapper");if(cmtEntryList.length>0){if(G_PAGE_TYPE===__global.C_PAGE_TYPE_PHOTO){if(refreshFlag===true){$list.find(">ul").remove();}if($list.find(">ul").length>0){$list.find(">ul").append(cmtEntryList.join(""));}else{$list.find(".d_cmtpgn_nodata").before('<ul style="display: none;">'+cmtEntryList.join("")+"</ul>");}}else{if($list.find(">ul").length>0){$list.find(">ul").replaceWith('<ul style="display: none;">'+cmtEntryList.join("")+"</ul>");}else{$list.find(".d_cmtpgn_nodata").before('<ul style="display: none;">'+cmtEntryList.join("")+"</ul>");}}$list.find(">ul>li:first").addClass("first_child");}else{$list.find(">ul").remove();}__util.log("@worker.render.cmt.list() executed done.");};worker.render.cmt.entry=function(cmtInfo,atachList,memberInfo){__util.log("@worker.render.cmt.entry() executed.");__util.log("worker.render.cmt.entry() cmtInfo is ",cmtInfo);__util.log("worker.render.cmt.entry() atachList is ",atachList);__util.log("worker.render.cmt.entry() memberInfo is ",memberInfo);var cmtEntryTemplatePropty={};cmtEntryTemplatePropty.cmtSeq=cmtInfo.cmtSeq;cmtEntryTemplatePropty.cmtNo=cmtInfo.cmtNo;cmtEntryTemplatePropty.memberNickname=memberInfo.memberNickname;if(cmtInfo.memberRecmFlag===true){cmtEntryTemplatePropty.memberRecmMarkClass=" on";}if(cmtInfo.memberNonRecmFlag===true){cmtEntryTemplatePropty.memberNonRecmMarkClass=" on";}cmtEntryTemplatePropty.viewCnt=__util.getNumericDsplyFormat(cmtInfo.viewCnt);cmtEntryTemplatePropty.recmCnt=__util.getNumericDsplyFormat(cmtInfo.recmCnt);cmtEntryTemplatePropty.nonRecmCnt=__util.getNumericDsplyFormat(cmtInfo.nonRecmCnt);cmtEntryTemplatePropty.adcmtCnt=__util.getNumericDsplyFormat(cmtInfo.validAdcmtCnt);var tempActFlag=cmtInfo.tempActFlag;if((G_CHNL_INFO.adcmtUseFlag===true||cmtInfo.validAdcmtCnt>0)&&tempActFlag!==true){cmtEntryTemplatePropty.adcmtBtnHtml=_widget.renderWithTemplate("d_cmtpgn_cmt_adcmt_btn_template",cmtEntryTemplatePropty);}if(G_CHNL_INFO.recmUseFlag===true&&cmtInfo.breakFlag!==true&&cmtInfo.delFlag!==true&&tempActFlag!==true){cmtEntryTemplatePropty.recmBtnHtml=_widget.renderWithTemplate("d_cmtpgn_cmt_recm_btn_template",cmtEntryTemplatePropty);}if(__util.isEmpty(cmtEntryTemplatePropty.adcmtBtnHtml)!==true&&__util.isEmpty(cmtEntryTemplatePropty.recmBtnHtml)!==true&&tempActFlag!==true){cmtEntryTemplatePropty.barBtnHtml=_widget.renderWithTemplate("d_cmtpgn_cmt_bar_btn_template");}if(tempActFlag!==true){if(G_PAGE_TYPE!=__global.C_PAGE_TYPE_PHOTO){cmtEntryTemplatePropty.funcBtnHtml=_widget.renderWithTemplate("d_cmtpgn_cmt_func_btn_box_template",cmtEntryTemplatePropty);}else{cmtEntryTemplatePropty.funcBtnHtml=_widget.renderWithTemplate("d_cmtpgn_cmt_func_btn_box_photo_template",cmtEntryTemplatePropty);}}if(memberInfo.artistFlag===true){cmtEntryTemplatePropty.atistMarkClass=" atist";cmtEntryTemplatePropty.atistMarkHtml=_widget.renderWithTemplate("d_cmtpgn_atist_mark_template");}if(memberInfo.memberDjIconType==="DJORANGE"){cmtEntryTemplatePropty.djMarkHtml=_widget.renderWithTemplate("d_cmtpgn_powerdj_mark_template");}else{if(memberInfo.memberDjIconType==="DJGREEN"){cmtEntryTemplatePropty.djMarkHtml=_widget.renderWithTemplate("d_cmtpgn_dj_mark_template");}}if(memberInfo.official===true){cmtEntryTemplatePropty.djVerifyMarkHtml=_widget.renderWithTemplate("d_cmtpgn_dj_verify_mark_template");}if(cmtInfo.mobleFlag===true){cmtEntryTemplatePropty.mobleMarkHtml=_widget.renderWithTemplate("d_cmtpgn_moble_mark_template");}if(cmtInfo.newFlag===true){cmtEntryTemplatePropty.newMarkHtml=_widget.renderWithTemplate("d_cmtpgn_new_mark_template");}if(cmtInfo.secrtFlag===true){cmtEntryTemplatePropty.secrtMarkHtml=_widget.renderWithTemplate("d_cmtpgn_secrt_mark_template");cmtEntryTemplatePropty.dataCmtSecrtString=' data-cmt-secrt="on"';}if(cmtInfo.breakFlag===true||cmtInfo.delFlag===true){cmtEntryTemplatePropty.replaceCont=cmtInfo.cmtCont;cmtEntryTemplatePropty.cmtReplaceHtml=_widget.renderWithTemplate("d_cmtpgn_cmt_replace_dsply_template",cmtEntryTemplatePropty);if(cmtInfo.breakFlag===true){cmtEntryTemplatePropty.cmtBreak="on";}else{cmtEntryTemplatePropty.cmtBreak="off";}if(cmtInfo.delFlag===true){cmtEntryTemplatePropty.cmtDel="on";}else{cmtEntryTemplatePropty.cmtDel="off";}}else{if(cmtInfo.memberCmtFlag===true){cmtEntryTemplatePropty.cmtOwner="on";cmtEntryTemplatePropty.personally="personally";if(G_CHNL_INFO.cmtModifyUseFlag===true&&tempActFlag!==true){if(G_PAGE_TYPE!=__global.C_PAGE_TYPE_PHOTO){cmtEntryTemplatePropty.modifyBtnHtml=_widget.renderWithTemplate("d_cmtpgn_cmt_modify_btn_template");}else{cmtEntryTemplatePropty.modifyBtnHtml=_widget.renderWithTemplate("d_cmtpgn_cmt_modify_btn_photo_template");}}if(G_CHNL_INFO.cmtDelUseFlag===true&&tempActFlag!==true){cmtEntryTemplatePropty.ownerBtnHtml=_widget.renderWithTemplate("d_cmtpgn_cmt_owner_btn_box_template",cmtEntryTemplatePropty);}}else{cmtEntryTemplatePropty.cmtOwner="off";if(G_CHNL_INFO.reprtUseFlag===true&&cmtInfo.memberReprtFlag!==true&&memberInfo.artistFlag!==true&&tempActFlag!==true){if(G_PAGE_TYPE===__global.C_PAGE_TYPE_GUESTBOOK){if(__websvc.Auth.isMelonLogin()===true&&Number(__websvc.Auth.getMemberKey())===Number(G_MYMUSIC_KEY)){cmtEntryTemplatePropty.reprtBtnHtml=_widget.renderWithTemplate("d_cmtpgn_cmt_reprt_btn_box_template",cmtEntryTemplatePropty);}else{cmtEntryTemplatePropty.reprtBtnHtml=_widget.renderWithTemplate("d_cmtpgn_cmt_reprt_btn_box_template",cmtEntryTemplatePropty);}}else{cmtEntryTemplatePropty.reprtBtnHtml=_widget.renderWithTemplate("d_cmtpgn_cmt_reprt_btn_box_template",cmtEntryTemplatePropty);}}}cmtEntryTemplatePropty.dsplyDate=cmtInfo.dsplyDate;cmtEntryTemplatePropty.dsplyTime=cmtInfo.dsplyTime;var textAtachCnt=0,constraintAtachCnt=0,lastTextAtachInfoIdx=-1,lastConstraintAtachInfoIdx=-1;if(__util.isDefined(atachList)===true&&atachList.length>0&&tempActFlag!==true){for(var i=0,atachListSize=atachList.length;i<atachListSize;i++){if(atachList[i].atachType===__global.C_ATACH_TYPE_TEXT){textAtachCnt++;lastTextAtachInfoIdx=i;}else{constraintAtachCnt++;lastConstraintAtachInfoIdx=i;}}}cmtEntryTemplatePropty.textFullCont=cmtInfo.cmtCont||"";cmtEntryTemplatePropty.textFullCont=cmtEntryTemplatePropty.textFullCont.replace(/\n/gi,"<br />");var needExpandBtn=false;if(cmtInfo.secrtFlag===true&&cmtInfo.memberCmtFlag!==true){cmtEntryTemplatePropty.textSumryCont=cmtInfo.cmtCont||"";}else{var sumryDsplyInfo=__util.getCmtSumryDsplyInfo(G_TEMPLATE_TYPE,G_TEXTAREA_TYPE,cmtInfo.cmtCont);needExpandBtn=sumryDsplyInfo.expandBtn;cmtEntryTemplatePropty.textSumryCont=sumryDsplyInfo.dsplyText;if(G_PAGE_INFO.srchType===__global.C_CMT_SRCH_TYPE_CONTS&&G_PAGE_INFO.srchWord.length>0){__util.log("worker.render.cmt.entry() HIGHLITING SRCH WORD");cmtEntryTemplatePropty.textSumryCont=__util.getHighlightDsplyFormat(cmtEntryTemplatePropty.textSumryCont,G_PAGE_INFO.srchWord,"span");}}if(__util.isDefined(cmtInfo.atachSumry)===true&&cmtInfo.atachSumry.length>0&&tempActFlag!==true){cmtEntryTemplatePropty.atachSumryCont=worker.render.atach.entry.dsply(cmtInfo.atachSumry[0]);}if(needExpandBtn===true||textAtachCnt>1||constraintAtachCnt>1){needExpandBtn=true;}if(cmtInfo.secrtFlag===true&&cmtInfo.memberCmtFlag!==true){cmtEntryTemplatePropty.cmtSumryHtml=_widget.renderWithTemplate("d_cmtpgn_cmt_sumry_dsply_template",cmtEntryTemplatePropty);cmtEntryTemplatePropty.sumryDsplyStyle="block";cmtEntryTemplatePropty.fullDsplyStyle="none";}else{if(G_CHNL_INFO.sumryUseFlag===true){if(needExpandBtn===true){cmtEntryTemplatePropty.sumryDsplyStyle="block";cmtEntryTemplatePropty.fullDsplyStyle="none";cmtEntryTemplatePropty.expandBtnHtml=_widget.renderWithTemplate("d_cmtpgn_cmt_expand_btn_template",{pgnTitle:G_CHNL_INFO.pgnTitle});cmtEntryTemplatePropty.cmtSumryHtml=_widget.renderWithTemplate("d_cmtpgn_cmt_sumry_dsply_template",cmtEntryTemplatePropty);}else{cmtEntryTemplatePropty.sumryDsplyStyle="none";cmtEntryTemplatePropty.fullDsplyStyle="block";}}else{cmtEntryTemplatePropty.sumryDsplyStyle="none";cmtEntryTemplatePropty.fullDsplyStyle="block";}}var atachEntryFullHtmlList=[];if(__util.isDefined(atachList)===true&&atachList.length>0&&tempActFlag!==true){for(var j=0,atachFullListSize=atachList.length;j<atachFullListSize;j++){if(__util.isDefined(cmtEntryTemplatePropty.expandBtnHtml)===true){if(textAtachCnt>0){atachEntryFullHtmlList.push(worker.render.atach.entry.dsply(atachList[j]));if(lastTextAtachInfoIdx===j){atachEntryFullHtmlList.push(_widget.renderWithTemplate("d_cmtpgn_cmt_collapse_btn_template",{pgnTitle:G_CHNL_INFO.pgnTitle}));cmtEntryTemplatePropty.closeBtnHtml=_widget.renderWithTemplate("d_cmtpgn_cmt_collapse_btn_template",{pgnTitle:G_CHNL_INFO.pgnTitle});}else{if(atachList[j].atachType===__global.C_ATACH_TYPE_TEXT){atachEntryFullHtmlList.push("<br />");}}}else{if(j===0){atachEntryFullHtmlList.push(_widget.renderWithTemplate("d_cmtpgn_cmt_collapse_btn_template",{pgnTitle:G_CHNL_INFO.pgnTitle}));}atachEntryFullHtmlList.push(worker.render.atach.entry.dsply(atachList[j]));}}else{atachEntryFullHtmlList.push(worker.render.atach.entry.dsply(atachList[j]));}}cmtEntryTemplatePropty.atachFullCont=atachEntryFullHtmlList.join("");cmtEntryTemplatePropty.cmtFullHtml=_widget.renderWithTemplate("d_cmtpgn_cmt_full_dsply_template",cmtEntryTemplatePropty);}if(tempActFlag===true){cmtEntryTemplatePropty.textFullCont+='<a href="'+G_CHNL_INFO.tempActLinkUrlText+'"><span></span>관련 내용 보기 &gt;</a>';cmtEntryTemplatePropty.atachFullCont=cmtEntryTemplatePropty.textFullCont;cmtEntryTemplatePropty.cmtFullHtml=_widget.renderWithTemplate("d_cmtpgn_cmt_full_dsply_template",cmtEntryTemplatePropty);}}var profileImage=Math.floor(Math.random()*2);cmtEntryTemplatePropty.memberKey=memberInfo.memberKey;if(__util.isDefined(memberInfo.mypageImg)){cmtEntryTemplatePropty.memberImage=memberInfo.mypageImg;}if(!__util.isDefined(cmtEntryTemplatePropty.memberImage)||cmtEntryTemplatePropty.memberImage==""){var profileImage=Math.floor(Math.random()*2);if(profileImage==0){cmtEntryTemplatePropty.memberImage="//cdnimg.melon.co.kr/resource/image/cmt/web/common/noArtist01_300.jpg/melon/resize/120";}else{if(profileImage==1){cmtEntryTemplatePropty.memberImage="//cdnimg.melon.co.kr/resource/image/cmt/web/common/noArtist02_300.jpg/melon/resize/120";}else{cmtEntryTemplatePropty.memberImage="//cdnimg.melon.co.kr/resource/image/cmt/web/common/noArtist03_300.jpg/melon/resize/120";}}}var cursorStyle=Number(memberInfo.memberKey)<0?'style="cursor:default;text-decoration:none;"':'style="cursor:pointer;text-decoration:none;"';cmtEntryTemplatePropty.cursorImage=cursorStyle;cmtEntryTemplatePropty.nickCursor=cursorStyle;if(memberInfo.artistFlag===true){cmtEntryTemplatePropty.memberKey="artist_"+memberInfo.artistId;cmtEntryTemplatePropty.memberImage=memberInfo.artistImage;}else{if(cmtInfo.ancmFlag==true){cmtEntryTemplatePropty.memberKey="ancm_"+memberInfo.memberKey;cmtEntryTemplatePropty.memberImage=memberInfo.mypageImg;}else{cmtEntryTemplatePropty.memberKey=memberInfo.memberKey;}}if(G_PAGE_TYPE!=__global.C_PAGE_TYPE_PHOTO){cmtEntryTemplatePropty.memberImageArea=_widget.renderWithTemplate("d_cmtpgn_cmt_valid_entry_member_image_area_template",cmtEntryTemplatePropty);}if(cmtInfo.delFlag===true||cmtInfo.breakFlag===true){return _widget.renderWithTemplate("d_cmtpgn_cmt_invalid_entry_template",cmtEntryTemplatePropty);}else{if(G_PAGE_TYPE!=__global.C_PAGE_TYPE_PHOTO){__util.log("@worker.render.cmt.entry() executed done.");return _widget.renderWithTemplate("d_cmtpgn_cmt_valid_entry_template",cmtEntryTemplatePropty);}else{__util.log("@worker.render.cmt.entry() executed done.");return _widget.renderWithTemplate("d_cmtpgn_cmt_valid_entry_photo_template",cmtEntryTemplatePropty);}}};worker.render.cmt.top=function(cmtInfo,atachList,memberInfo){__util.log("@worker.render.cmt.top() executed.");__util.log("worker.render.cmt.top() cmtInfo is ",cmtInfo);__util.log("worker.render.cmt.top() atachList is ",atachList);__util.log("worker.render.cmt.top() memberInfo is ",memberInfo);var cmtEntryTemplatePropty={};cmtEntryTemplatePropty.topMarkString="top_";cmtEntryTemplatePropty.cmtSeq=cmtInfo.cmtSeq;cmtEntryTemplatePropty.memberNickname=memberInfo.memberNickname;cmtEntryTemplatePropty.dsplyDate=cmtInfo.dsplyDate;cmtEntryTemplatePropty.dsplyTime=cmtInfo.dsplyTime;var tempActFlag=cmtInfo.tempActFlag;if(memberInfo.artistFlag===true){cmtEntryTemplatePropty.atistMarkClass=" atist";cmtEntryTemplatePropty.atistMarkHtml=_widget.renderWithTemplate("d_cmtpgn_atist_mark_template");}if(memberInfo.memberDjIconType==="DJORANGE"){cmtEntryTemplatePropty.djMarkHtml=_widget.renderWithTemplate("d_cmtpgn_powerdj_mark_template");}else{if(memberInfo.memberDjIconType==="DJGREEN"){cmtEntryTemplatePropty.djMarkHtml=_widget.renderWithTemplate("d_cmtpgn_dj_mark_template");}}if(memberInfo.official===true){cmtEntryTemplatePropty.djVerifyMarkHtml=_widget.renderWithTemplate("d_cmtpgn_dj_verify_mark_template");}if(cmtInfo.ancmFlag===true){cmtEntryTemplatePropty.ancmMarkHtml=_widget.renderWithTemplate("d_cmtpgn_ancm_mark_template");cmtEntryTemplatePropty.ancmMarkStrongTagStartString="<strong>";cmtEntryTemplatePropty.ancmMarkStrongTagEndString="</strong>";}if(cmtInfo.recmFlag===true){cmtEntryTemplatePropty.bestMarkHtml=_widget.renderWithTemplate("d_cmtpgn_best_mark_template",{pgnTitle:G_CHNL_INFO.pgnTitle});}if(cmtInfo.secrtFlag===true){cmtEntryTemplatePropty.secrtMarkHtml=_widget.renderWithTemplate("d_cmtpgn_secrt_mark_template");cmtEntryTemplatePropty.dataCmtSecrtString=' data-cmt-secrt="on"';}if(cmtInfo.ancmFlag!==true){if(cmtInfo.memberRecmFlag===true){cmtEntryTemplatePropty.memberRecmMarkClass=" on";}if(cmtInfo.memberNonRecmFlag===true){cmtEntryTemplatePropty.memberNonRecmMarkClass=" on";}if(cmtInfo.memberCmtFlag!==true){if(G_CHNL_INFO.reprtUseFlag===true&&cmtInfo.memberReprtFlag!==true&&memberInfo.artistFlag!==true&&tempActFlag!==true){cmtEntryTemplatePropty.reprtBtnHtml=_widget.renderWithTemplate("d_cmtpgn_cmt_reprt_btn_box_template",cmtEntryTemplatePropty);}}cmtEntryTemplatePropty.viewCnt=__util.getNumericDsplyFormat(cmtInfo.viewCnt);cmtEntryTemplatePropty.recmCnt=__util.getNumericDsplyFormat(cmtInfo.recmCnt);cmtEntryTemplatePropty.nonRecmCnt=__util.getNumericDsplyFormat(cmtInfo.nonRecmCnt);cmtEntryTemplatePropty.adcmtCnt=__util.getNumericDsplyFormat(cmtInfo.validAdcmtCnt);if(G_CHNL_INFO.adcmtUseFlag===true||cmtInfo.validAdcmtCnt>0){cmtEntryTemplatePropty.adcmtBtnHtml=_widget.renderWithTemplate("d_cmtpgn_cmt_adcmt_btn_template",cmtEntryTemplatePropty);}if(tempActFlag!==true){if(G_CHNL_INFO.recmUseFlag===true&&(cmtInfo.breakFlag!==true&&cmtInfo.delFlag!==true)){cmtEntryTemplatePropty.recmBtnHtml=_widget.renderWithTemplate("d_cmtpgn_cmt_recm_btn_template",cmtEntryTemplatePropty);}if(__util.isEmpty(cmtEntryTemplatePropty.adcmtBtnHtml)!==true&&__util.isEmpty(cmtEntryTemplatePropty.recmBtnHtml)!==true){cmtEntryTemplatePropty.barBtnHtml=_widget.renderWithTemplate("d_cmtpgn_cmt_bar_btn_template");}}if(G_PAGE_TYPE!==__global.C_PAGE_TYPE_PHOTO){cmtEntryTemplatePropty.funcBtnHtml=_widget.renderWithTemplate("d_cmtpgn_cmt_func_btn_box_template",cmtEntryTemplatePropty);}else{cmtEntryTemplatePropty.funcBtnHtml=_widget.renderWithTemplate("d_cmtpgn_cmt_func_btn_box_photo_template",cmtEntryTemplatePropty);}if(cmtInfo.memberCmtFlag===true){cmtEntryTemplatePropty.cmtOwner="on";cmtEntryTemplatePropty.personally="personally";}else{cmtEntryTemplatePropty.cmtOwner="off";}}else{cmtEntryTemplatePropty.cmtOwner="off";cmtEntryTemplatePropty.funcBtnHtml=_widget.renderWithTemplate("d_cmtpgn_cmt_func_btn_box_ancm_template",cmtEntryTemplatePropty);}var textAtachCnt=0,constraintAtachCnt=0,lastTextAtachInfoIdx=-1,lastConstraintAtachInfoIdx=-1;if(__util.isDefined(atachList)===true&&atachList.length>0&&tempActFlag!==true){for(var i=0,atachListSize=atachList.length;i<atachListSize;i++){if(atachList[i].atachType===__global.C_ATACH_TYPE_TEXT){textAtachCnt++;lastTextAtachInfoIdx=i;}else{constraintAtachCnt++;lastConstraintAtachInfoIdx=i;}}}cmtEntryTemplatePropty.textFullCont=cmtInfo.cmtCont||"";cmtEntryTemplatePropty.textFullCont=cmtEntryTemplatePropty.textFullCont.replace(/\n/gi,"<br />");var needExpandBtn=false;if(cmtInfo.secrtFlag===true&&cmtInfo.memberCmtFlag!==true){cmtEntryTemplatePropty.textSumryCont=cmtInfo.cmtCont||"";}else{var sumryDsplyInfo=__util.getCmtSumryDsplyInfo(G_TEMPLATE_TYPE,G_TEXTAREA_TYPE,cmtInfo.cmtCont);needExpandBtn=sumryDsplyInfo.expandBtn;cmtEntryTemplatePropty.textSumryCont=sumryDsplyInfo.dsplyText;if(G_PAGE_INFO.srchType===__global.C_CMT_SRCH_TYPE_CONTS&&G_PAGE_INFO.srchWord.length>0){cmtEntryTemplatePropty.textSumryCont=__util.getHighlightDsplyFormat(cmtEntryTemplatePropty.textSumryCont,G_PAGE_INFO.srchWord,"span");}}if(__util.isDefined(cmtInfo.atachSumry)===true&&cmtInfo.atachSumry.length>0&&tempActFlag!==true){cmtEntryTemplatePropty.atachSumryCont=worker.render.atach.entry.dsply(cmtInfo.atachSumry[0]);}if(needExpandBtn===true||textAtachCnt>1||constraintAtachCnt>1){needExpandBtn=true;}if(cmtInfo.secrtFlag===true&&cmtInfo.memberCmtFlag!==true){cmtEntryTemplatePropty.cmtSumryHtml=_widget.renderWithTemplate("d_cmtpgn_cmt_sumry_dsply_template",cmtEntryTemplatePropty);cmtEntryTemplatePropty.sumryDsplyStyle="block";cmtEntryTemplatePropty.fullDsplyStyle="none";}else{if(G_CHNL_INFO.sumryUseFlag===true){if(needExpandBtn===true){cmtEntryTemplatePropty.sumryDsplyStyle="block";cmtEntryTemplatePropty.fullDsplyStyle="none";cmtEntryTemplatePropty.expandBtnHtml=_widget.renderWithTemplate("d_cmtpgn_cmt_expand_btn_template",{pgnTitle:G_CHNL_INFO.pgnTitle});cmtEntryTemplatePropty.cmtSumryHtml=_widget.renderWithTemplate("d_cmtpgn_cmt_sumry_dsply_template",cmtEntryTemplatePropty);}else{cmtEntryTemplatePropty.sumryDsplyStyle="none";cmtEntryTemplatePropty.fullDsplyStyle="block";}}else{cmtEntryTemplatePropty.sumryDsplyStyle="none";cmtEntryTemplatePropty.fullDsplyStyle="block";}}var atachEntryFullHtmlList=[];if(__util.isDefined(atachList)===true&&atachList.length>0){for(var j=0,atachFullListSize=atachList.length;j<atachFullListSize;j++){if(__util.isDefined(cmtEntryTemplatePropty.expandBtnHtml)===true){if(textAtachCnt>0){atachEntryFullHtmlList.push(worker.render.atach.entry.dsply(atachList[j]));if(lastTextAtachInfoIdx===j){atachEntryFullHtmlList.push(_widget.renderWithTemplate("d_cmtpgn_cmt_collapse_btn_template",{pgnTitle:G_CHNL_INFO.pgnTitle}));cmtEntryTemplatePropty.closeBtnHtml=_widget.renderWithTemplate("d_cmtpgn_cmt_collapse_btn_template",{pgnTitle:G_CHNL_INFO.pgnTitle});}else{if(atachList[j].atachType===__global.C_ATACH_TYPE_TEXT){atachEntryFullHtmlList.push("<br />");}}}else{if(j===0){atachEntryFullHtmlList.push(_widget.renderWithTemplate("d_cmtpgn_cmt_collapse_btn_template",{pgnTitle:G_CHNL_INFO.pgnTitle}));}atachEntryFullHtmlList.push(worker.render.atach.entry.dsply(atachList[j]));}}else{atachEntryFullHtmlList.push(worker.render.atach.entry.dsply(atachList[j]));}}cmtEntryTemplatePropty.atachFullCont=atachEntryFullHtmlList.join("");cmtEntryTemplatePropty.cmtFullHtml=_widget.renderWithTemplate("d_cmtpgn_cmt_full_dsply_template",cmtEntryTemplatePropty);}cmtEntryTemplatePropty.memberKey=memberInfo.memberKey;if(__util.isDefined(memberInfo.mypageImg)){cmtEntryTemplatePropty.memberImage=memberInfo.mypageImg;}if(!__util.isDefined(cmtEntryTemplatePropty.memberImage)||cmtEntryTemplatePropty.memberImage==""){var profileImage=Math.floor(Math.random()*2);if(profileImage==0){cmtEntryTemplatePropty.memberImage="//cdnimg.melon.co.kr/resource/image/cmt/web/common/noArtist01_300.jpg/melon/resize/120";}else{if(profileImage==1){cmtEntryTemplatePropty.memberImage="//cdnimg.melon.co.kr/resource/image/cmt/web/common/noArtist02_300.jpg/melon/resize/120";}else{cmtEntryTemplatePropty.memberImage="//cdnimg.melon.co.kr/resource/image/cmt/web/common/noArtist03_300.jpg/melon/resize/120";}}}var cursorStyle=Number(memberInfo.memberKey)<0?'style="cursor:default;text-decoration:none;"':'style="cursor:pointer;text-decoration:none;"';cmtEntryTemplatePropty.cursorImage=cursorStyle;cmtEntryTemplatePropty.nickCursor=cursorStyle;if(memberInfo.artistFlag===true){cmtEntryTemplatePropty.memberKey="artist_"+memberInfo.artistId;cmtEntryTemplatePropty.memberImage=memberInfo.artistImage;}else{if(cmtInfo.ancmFlag==true){cmtEntryTemplatePropty.memberKey="ancm_"+memberInfo.memberKey;cmtEntryTemplatePropty.memberImage=memberInfo.mypageImg;}else{cmtEntryTemplatePropty.memberKey=memberInfo.memberKey;}}if(G_PAGE_TYPE!=__global.C_PAGE_TYPE_PHOTO){cmtEntryTemplatePropty.memberImageArea=_widget.renderWithTemplate("d_cmtpgn_cmt_valid_entry_member_image_area_template",cmtEntryTemplatePropty);__util.log("@worker.render.cmt.top() executed done.");return _widget.renderWithTemplate("d_cmtpgn_cmt_valid_entry_template",cmtEntryTemplatePropty);}else{__util.log("@worker.render.cmt.top() executed done.");return _widget.renderWithTemplate("d_cmtpgn_cmt_valid_entry_photo_template",cmtEntryTemplatePropty);}};worker.render.adcmt={};worker.render.adcmt.list=function($btn,$target,adcmtList){__util.log("@worker.render.adcmt.list() executed.");__util.log("worker.render.adcmt.list() $target id=["+$target.attr("id")+"]");$target.hide();var validAdcmtCnt=0;var adcmtEntryList=[];if(__util.isDefined(adcmtList)===true&&adcmtList.length>0){for(var i=0,adcmtListSize=adcmtList.length;i<adcmtListSize;i++){if(!(adcmtList[i].adcmtInfo.ancmFlag===true&&adcmtList[i].adcmtInfo.delFlag===true)){adcmtEntryList.push(worker.render.adcmt.entry(adcmtList[i].adcmtInfo,adcmtList[i].memberInfo));}if(adcmtList[i].adcmtInfo.delFlag!==true&&adcmtList[i].adcmtInfo.breakFlag!==true&&adcmtList.length<1000){validAdcmtCnt++;}}$target.html(adcmtEntryList.join(""));}var cmtSeq=$btn.closest("li").attr("data-cmt-id"),breakFlag=($btn.closest("li").attr("data-cmt-break")==="on"),delFlag=($btn.closest("li").attr("data-cmt-del")==="on"),secrtFlag=($btn.closest("li").attr("data-cmt-secrt")==="on");if(G_CHNL_INFO.adcmtWriteUseFlag===true&&breakFlag!==true&&delFlag!==true){if($target.next().hasClass("d_cmtpgn_adcmt_write_box")!==true){var adcmtInputTemplatePropty={};adcmtInputTemplatePropty.inputWidthValue=__util.getAdcmtInputWidth(G_TEMPLATE_TYPE,G_TEXTAREA_TYPE);adcmtInputTemplatePropty.adcmtRegMaxLengthConf=G_CHNL_INFO.adcmtRegMaxLength;adcmtInputTemplatePropty.adcmtPlaceholderConf=G_CHNL_INFO.adcmtPlaceholderText;switch(G_TEXTAREA_TYPE){case __global.C_TEXTAREA_TYPE_LARGE:break;case __global.C_TEXTAREA_TYPE_MEDIUM:break;case __global.C_TEXTAREA_TYPE_SMALL:break;default:break;}if(Number(G_CHNL_SEQ)==11){adcmtInputTemplatePropty.inputWidthValue=424;adcmtInputTemplatePropty.adcmtWrapStyleString=' style="width:529px;"';}if(G_PAGE_TYPE===__global.C_PAGE_TYPE_PHOTO){adcmtInputTemplatePropty.adcmtBtnHtml=_widget.renderWithTemplate("d_cmtpgn_photo_type_adcmt_reg_btn_box_template");}else{if(G_PAGE_TYPE===__global.C_PAGE_TYPE_GUESTBOOK){adcmtInputTemplatePropty.adcmtWrapAllStyleValue=" wide";var secrtCheckMarkString="";if(G_CHNL_INFO.secrtUseFlag===true||secrtFlag===true){if(secrtFlag===true){secrtCheckMarkString=' checked="checked" disabled="disabled"';}adcmtInputTemplatePropty.funcBtnHtml=_widget.renderWithTemplate("d_cmtpgn_secrt_check_box_template",{cmtSeq:cmtSeq,secrtCheckMarkString:secrtCheckMarkString});}adcmtInputTemplatePropty.adcmtBtnHtml=_widget.renderWithTemplate("d_cmtpgn_guestbook_type_adcmt_reg_btn_template",adcmtInputTemplatePropty);}else{adcmtInputTemplatePropty.adcmtWrapAllStyleValue=" wide";adcmtInputTemplatePropty.adcmtBtnHtml=_widget.renderWithTemplate("d_cmtpgn_adcmt_reg_btn_box_template",adcmtInputTemplatePropty);}}adcmtInputTemplatePropty.adcmtInputHtml=_widget.renderWithTemplate("d_cmtpgn_adcmt_input_template",adcmtInputTemplatePropty);$target.after(_widget.renderWithTemplate("d_cmtpgn_adcmt_input_box_template",adcmtInputTemplatePropty));$target.next().find("input.d_cmtpgn_adcmt_input").placeholder();}else{$target.next().find("input.d_cmtpgn_adcmt_input").val("").placeholder("update");}$target.next().show();}$target.show();if(__websvc.Auth.isMelonLogin()===true){$target.next().find("input.d_cmtpgn_adcmt_input").focus();setTimeout(function(){$("#cmt_adcmt_"+cmtSeq).next().find(".wrap_bg_insert").focus();},0);}__util.log("worker.render.adcmt.list() data-cmt-id=["+$btn.closest("li").attr("data-cmt-id")+"]");__util.log("worker.render.adcmt.list() data-cmt-break=["+$btn.closest("li").attr("data-cmt-break")+"]");__util.log("worker.render.adcmt.list() data-cmt-del=["+$btn.closest("li").attr("data-cmt-del")+"]");__util.log("worker.render.adcmt.list() data-cmt-owner=["+$btn.closest("li").attr("data-cmt-owner")+"]");__util.log("worker.render.adcmt.list() data-cmt-secret=["+$btn.closest("li").attr("data-cmt-secrt")+"]");if(adcmtList.length<1000){$btn.find(".d_cmtpgn_adcmt_cnt").html(validAdcmtCnt);}__util.log("@worker.render.adcmt.list() executed done.");};worker.render.adcmt.entry=function(adcmtInfo,memberInfo){__util.log("@worker.render.adcmt.entry() executed.");__util.log("worker.render.adcmt.entry() adcmtInfo is ",adcmtInfo);__util.log("worker.render.adcmt.entry() memberInfo is ",memberInfo);var adcmtEntryTemplatePropty={};adcmtEntryTemplatePropty.cmtSeq=adcmtInfo.cmtSeq;adcmtEntryTemplatePropty.memberNickname=memberInfo.memberNickname;adcmtEntryTemplatePropty.memberKey=memberInfo.memberKey;var tempActFlag=adcmtInfo.tempActFlag;if(adcmtInfo.memberCmtFlag===true){if(Number(__websvc.Auth.getMemberKey())===Number(memberInfo.memberKey)){adcmtEntryTemplatePropty.cmtOwner="on";if(G_CHNL_INFO.adcmtDelUseFlag===true&&tempActFlag!==true){if(Number(G_CHNL_SEQ)==11){adcmtEntryTemplatePropty.ownerBtnHtml=_widget.renderWithTemplate("d_cmtpgn_adcmt_owner_btn_box_visitor_template");}else{adcmtEntryTemplatePropty.ownerBtnHtml=_widget.renderWithTemplate("d_cmtpgn_adcmt_owner_btn_box_template");}}}}else{adcmtEntryTemplatePropty.cmtOwner="off";}if(adcmtInfo.memberRecmFlag===true){adcmtEntryTemplatePropty.memberRecmMarkClass=" on";}if(adcmtInfo.memberNonRecmFlag===true){adcmtEntryTemplatePropty.memberNonRecmMarkClass=" on";}adcmtEntryTemplatePropty.recmCnt=__util.getNumericDsplyFormat(adcmtInfo.recmCnt);adcmtEntryTemplatePropty.nonRecmCnt=__util.getNumericDsplyFormat(adcmtInfo.nonRecmCnt);if(G_CHNL_INFO.recmUseFlag===true&&adcmtInfo.ancmFlag!==true&&tempActFlag!==true){adcmtEntryTemplatePropty.recmBtnHtml=_widget.renderWithTemplate("d_cmtpgn_adcmt_recm_btn_template",adcmtEntryTemplatePropty);}if(memberInfo.artistFlag===true){adcmtEntryTemplatePropty.atistMarkClass=" atist";adcmtEntryTemplatePropty.atistMarkHtml=_widget.renderWithTemplate("d_cmtpgn_atist_mark_template");}if(memberInfo.memberDjIconType==="DJORANGE"){adcmtEntryTemplatePropty.djMarkHtml=_widget.renderWithTemplate("d_cmtpgn_powerdj_mark_template");}else{if(memberInfo.memberDjIconType==="DJGREEN"){adcmtEntryTemplatePropty.djMarkHtml=_widget.renderWithTemplate("d_cmtpgn_dj_mark_template");}}if(memberInfo.official===true){adcmtEntryTemplatePropty.djVerifyMarkHtml=_widget.renderWithTemplate("d_cmtpgn_dj_verify_mark_template");}if(adcmtInfo.mobleFlag===true){adcmtEntryTemplatePropty.mobleMarkHtml=_widget.renderWithTemplate("d_cmtpgn_moble_mark_template");}if(adcmtInfo.ancmFlag===true){adcmtEntryTemplatePropty.ancmMarkHtml=_widget.renderWithTemplate("d_cmtpgn_ancm_mark_template");adcmtEntryTemplatePropty.ancmMarkStrongTagStartString="<strong>";adcmtEntryTemplatePropty.ancmMarkStrongTagEndString="</strong>";}if(adcmtInfo.newFlag===true){adcmtEntryTemplatePropty.newMarkHtml=_widget.renderWithTemplate("d_cmtpgn_new_mark_template");}if(adcmtInfo.secrtFlag===true){adcmtEntryTemplatePropty.secrtMarkHtml=_widget.renderWithTemplate("d_cmtpgn_secrt_mark_template");adcmtEntryTemplatePropty.dataCmtSecrtString=' data-cmt-secrt="on"';}if(adcmtInfo.breakFlag===true||adcmtInfo.delFlag===true){adcmtEntryTemplatePropty.replaceCont=adcmtInfo.cmtCont;adcmtEntryTemplatePropty.adcmtReplaceHtml=_widget.renderWithTemplate("d_cmtpgn_adcmt_invalid_dsply_template",adcmtEntryTemplatePropty);if(adcmtInfo.breakFlag===true){adcmtEntryTemplatePropty.cmtBreak="on";}else{adcmtEntryTemplatePropty.cmtBreak="off";}if(adcmtInfo.delFlag===true){adcmtEntryTemplatePropty.cmtDel="on";}else{adcmtEntryTemplatePropty.cmtDel="off";}}else{adcmtEntryTemplatePropty.dsplyDate=adcmtInfo.dsplyDate;adcmtEntryTemplatePropty.dsplyTime=adcmtInfo.dsplyTime;adcmtEntryTemplatePropty.adcmtCont=adcmtInfo.cmtCont;if(tempActFlag===true){adcmtEntryTemplatePropty.adcmtCont+='<a href="'+G_CHNL_INFO.tempActLinkUrlText+'"><span></span>관련 내용 보기 &gt;</a>';}adcmtEntryTemplatePropty.adcmtContHtml=_widget.renderWithTemplate("d_cmtpgn_adcmt_valid_dsply_template",adcmtEntryTemplatePropty);if(adcmtInfo.memberCmtFlag!==true){if(G_CHNL_INFO.reprtUseFlag===true&&adcmtInfo.ancmFlag!==true&&adcmtInfo.memberReprtFlag!==true&&memberInfo.artistFlag!==true&&tempActFlag!==true){if(G_PAGE_TYPE===__global.C_PAGE_TYPE_GUESTBOOK){if(__websvc.Auth.isMelonLogin()===true&&Number(__websvc.Auth.getMemberKey())===Number(G_MYMUSIC_KEY)){adcmtEntryTemplatePropty.reprtBtnHtml=_widget.renderWithTemplate("d_cmtpgn_adcmt_reprt_btn_box_template",adcmtEntryTemplatePropty);}else{adcmtEntryTemplatePropty.reprtBtnHtml=_widget.renderWithTemplate("d_cmtpgn_adcmt_reprt_btn_box_template",adcmtEntryTemplatePropty);}}else{adcmtEntryTemplatePropty.reprtBtnHtml=_widget.renderWithTemplate("d_cmtpgn_adcmt_reprt_btn_box_template",adcmtEntryTemplatePropty);}}}else{adcmtEntryTemplatePropty.personally="personally";}}var cursorStyle=Number(memberInfo.memberKey)<0?'style="cursor:default;text-decoration:none;"':'style="cursor:pointer;text-decoration:none;"';adcmtEntryTemplatePropty.cursorImage=cursorStyle;adcmtEntryTemplatePropty.nickCursor=cursorStyle;if(memberInfo.artistFlag===true){adcmtEntryTemplatePropty.memberKey="artist_"+memberInfo.artistId;adcmtEntryTemplatePropty.memberImage=memberInfo.artistImage;}else{if(Number(memberInfo.memberKey)==-1){adcmtEntryTemplatePropty.memberKey="ancm_"+memberInfo.memberKey;}else{adcmtEntryTemplatePropty.memberKey=memberInfo.memberKey;}}__util.log("@worker.render.adcmt.entry() executed done.");if(adcmtInfo.delFlag===true||adcmtInfo.breakFlag===true){return _widget.renderWithTemplate("d_cmtpgn_adcmt_invalid_entry_template",adcmtEntryTemplatePropty);}else{return _widget.renderWithTemplate("d_cmtpgn_adcmt_valid_entry_template",adcmtEntryTemplatePropty);}};worker.render.atach={};worker.render.atach.layer=function(editingCmtSeq){__util.log("@worker.render.atach.layer() executed. editingCmtSeq=["+editingCmtSeq+"]");if(G_CHNL_INFO.atachUseFlag===true){var $cmtInputLayout=(Number(editingCmtSeq)===__global.C_EMPTY_KEY?$G_CONTAINER.find("#d_cmtpgn_cmt_write_box"):$G_CONTAINER.find("#d_cmtpgn_cmt_list_wrapper").find("ul>li").filter('[data-cmt-id="'+Number(editingCmtSeq)+'"]').find(".d_cmtpgn_cmt_edit_box"));var atachLayerCount=0;var atachLayerBulletLeftPositionValues=[9,38,68,97];if(G_CHNL_INFO.musicAtachUseFlag===true){var atachMusicLayerTemplatePropty={};atachMusicLayerTemplatePropty.bulletLeftPositionValue=atachLayerBulletLeftPositionValues[atachLayerCount++];var $atachMusicLayer=$cmtInputLayout.find(".d_cmtpgn_atach_music_layer");$atachMusicLayer.html(_widget.renderWithTemplate("d_cmtpgn_atach_music_layer_template",atachMusicLayerTemplatePropty));}if(G_CHNL_INFO.imageAtachUseFlag===true){var atachImageLayerTemplatePropty={};atachImageLayerTemplatePropty.bulletLeftPositionValue=atachLayerBulletLeftPositionValues[atachLayerCount++];atachImageLayerTemplatePropty.cdnUploadUrl=__config.F_CDN_UPLOAD_URL()+"?callback=parent._imageAtachUploadHandler";var $atachImageLayer=$cmtInputLayout.find(".d_cmtpgn_atach_image_layer");$atachImageLayer.html(_widget.renderWithTemplate("d_cmtpgn_atach_image_layer_template",atachImageLayerTemplatePropty));}if(G_CHNL_INFO.vdoAtachUseFlag===true){var atachVideoLayerTemplatePropty={};atachVideoLayerTemplatePropty.bulletLeftPositionValue=atachLayerBulletLeftPositionValues[atachLayerCount++];var $atachVideoLayer=$cmtInputLayout.find(".d_cmtpgn_atach_video_layer");$atachVideoLayer.html(_widget.renderWithTemplate("d_cmtpgn_atach_video_layer_template",atachVideoLayerTemplatePropty));}if(G_CHNL_INFO.linkAtachUseFlag===true&&(G_CHNL_INFO.vdoLinkAtachUseFlag===true||G_CHNL_INFO.genrlLinkAtachUseFlag===true)){var atachLinkLayerTemplatePropty={};atachLinkLayerTemplatePropty.bulletLeftPositionValue=atachLayerBulletLeftPositionValues[atachLayerCount++];if(G_CHNL_INFO.vdoLinkAtachUseFlag===true&&G_CHNL_INFO.genrlLinkAtachUseFlag===true){atachLinkLayerTemplatePropty.inputTextWidthValue=304;}else{atachLinkLayerTemplatePropty.inputTextWidthValue=408;}var $atachLinkLayer=$cmtInputLayout.find(".d_cmtpgn_atach_link_layer");$atachLinkLayer.html(_widget.renderWithTemplate("d_cmtpgn_atach_link_layer_template",atachLinkLayerTemplatePropty));if(G_CHNL_INFO.vdoLinkAtachUseFlag!==true||G_CHNL_INFO.genrlLinkAtachUseFlag!==true){$atachLinkLayer.find(".d_cmtpgn_atach_link_option_wrapper").hide();if(G_CHNL_INFO.vdoLinkAtachUseFlag!==true){$atachLinkLayer.find('option[value="'+__global.C_ATACH_TYPE_LINK_VIDEO+'"]').remove();$atachLinkLayer.find(".d_atach_video_link_guide").remove();}if(G_CHNL_INFO.genrlLinkAtachUseFlag!==true){$atachLinkLayer.find('option[value="'+__global.C_ATACH_TYPE_LINK_GENRL+'"]').remove();}}}}__util.log("@worker.render.atach.layer() executed done.");};worker.render.atach.music={};worker.render.atach.music.srch=function(editingCmtSeq,pageInfo,srchList,pagingInfo){__util.log("@worker.render.atach.music.srch() executed.");var $cmtInputLayout=(Number(editingCmtSeq)===__global.C_EMPTY_KEY?$G_CONTAINER.find("#d_cmtpgn_cmt_write_box"):$G_CONTAINER.find("#d_cmtpgn_cmt_list_wrapper").find("ul>li").filter('[data-cmt-id="'+Number(editingCmtSeq)+'"]').find(".d_cmtpgn_cmt_edit_box"));var $atachMusicLayer=$cmtInputLayout.find(".d_cmtpgn_atach_music_layer");var srchEntryList=[],srchPageTemplatePropty={};srchPageTemplatePropty.cmtSeq=editingCmtSeq;srchPageTemplatePropty.songCnt=__util.getNumericDsplyFormat(pageInfo.songCnt);srchPageTemplatePropty.albumCnt=__util.getNumericDsplyFormat(pageInfo.albumCnt);srchPageTemplatePropty.artistCnt=__util.getNumericDsplyFormat(pageInfo.artistCnt);srchPageTemplatePropty.videoCnt=__util.getNumericDsplyFormat(pageInfo.videoCnt);srchPageTemplatePropty.srchWord=pageInfo.srchWord;if(__util.isDefined(srchList)===true&&srchList.length>0){for(var i=0,srchListSize=srchList.length;i<srchListSize;i++){srchEntryList.push(worker.render.atach.entry.srch(pageInfo,srchList[i]));}srchPageTemplatePropty.musicListHtmlString=srchEntryList.join("");if(__util.isDefined(pagingInfo.pageList)===true&&pagingInfo.pageList.length>0){var pagingTemplatePropty={};pagingTemplatePropty.firstPageHashString=__util.makeMusicSrchHashString(pagingInfo.firstPageNo,pageInfo.musicType,pageInfo.sortType,pageInfo.srchWord);pagingTemplatePropty.prevPageHashString=__util.makeMusicSrchHashString(pagingInfo.prevGroupPageNo,pageInfo.musicType,pageInfo.sortType,pageInfo.srchWord);pagingTemplatePropty.nextPageHashString=__util.makeMusicSrchHashString(pagingInfo.nextGroupPageNo,pageInfo.musicType,pageInfo.sortType,pageInfo.srchWord);pagingTemplatePropty.lastPageHashString=__util.makeMusicSrchHashString(pagingInfo.lastPageNo,pageInfo.musicType,pageInfo.sortType,pageInfo.srchWord);pagingTemplatePropty.firstPageClassString=(Number(pageInfo.pageNo)===Number(pagingInfo.firstPageNo)?' class="btn_first disabled d_cmtpgn_navigator"':' class="btn_first d_cmtpgn_navigator"');pagingTemplatePropty.prevPageClassString=(Number(pagingInfo.prevGroupPageNo)===0?' class="btn_pre disabled d_cmtpgn_navigator"':' class="btn_pre d_cmtpgn_navigator"');pagingTemplatePropty.nextPageClassString=(Number(pagingInfo.nextGroupPageNo)===0?' class="btn_next disabled d_cmtpgn_navigator"':' class="btn_next d_cmtpgn_navigator"');pagingTemplatePropty.lastPageClassString=(Number(pageInfo.pageNo)===Number(pagingInfo.lastPageNo)?' class="btn_last disabled d_cmtpgn_navigator"':' class="btn_last d_cmtpgn_navigator"');var pagingEntryList=[],currentPage=pageInfo.pageNo;for(var i=0,pageListSize=pagingInfo.pageList.length;i<pageListSize;i++){if(currentPage===pagingInfo.pageList[i].page){pagingEntryList.push('<strong><span class="none">현재페이지</span>'+pagingInfo.pageList[i].page+"</strong>");}else{pagingEntryList.push('<a href="#'+__util.makeMusicSrchHashString(pagingInfo.pageList[i].page,pageInfo.musicType,pageInfo.sortType,pageInfo.srchWord)+'" class="d_cmtpgn_navigator">'+pagingInfo.pageList[i].page+"</a>");}}pagingTemplatePropty.pagingEntryListHtml=pagingEntryList.join("");srchPageTemplatePropty.musicNavigatorHtmlString=_widget.renderWithTemplate("d_cmtpgn_navigator_template",pagingTemplatePropty);}}if($atachMusicLayer.find(".d_cmtpgn_noresult").length>0){$atachMusicLayer.find(".d_cmtpgn_noresult").hide();}$atachMusicLayer.find(".d_cmtpgn_atach_music_srch_list, .d_cmtpgn_atach_music_srch_navigator").remove();var $srchInputLayout=$atachMusicLayer.find(".d_cmtpgn_atach_srch_box");var $srchOptionLayout=$atachMusicLayer.find(".d_cmtpgn_atach_music_srch_option");if(Number(pageInfo.totalCnt)>0){if($srchOptionLayout.length>0){switch(pageInfo.musicType){case __global.C_ATACH_MELON_SRCH_TYPE_SONG:$srchOptionLayout.after(_widget.renderWithTemplate("d_cmtpgn_atach_song_srch_list_template",srchPageTemplatePropty));$srchOptionLayout.replaceWith(_widget.renderWithTemplate("d_cmtpgn_atach_song_srch_result_template",srchPageTemplatePropty));break;case __global.C_ATACH_MELON_SRCH_TYPE_ALBUM:$srchOptionLayout.after(_widget.renderWithTemplate("d_cmtpgn_atach_album_srch_list_template",srchPageTemplatePropty));$srchOptionLayout.replaceWith(_widget.renderWithTemplate("d_cmtpgn_atach_album_srch_result_template",srchPageTemplatePropty));break;case __global.C_ATACH_MELON_SRCH_TYPE_ARTIST:$srchOptionLayout.after(_widget.renderWithTemplate("d_cmtpgn_atach_artist_srch_list_template",srchPageTemplatePropty));$srchOptionLayout.replaceWith(_widget.renderWithTemplate("d_cmtpgn_atach_artist_srch_result_template",srchPageTemplatePropty));break;}}else{switch(pageInfo.musicType){case __global.C_ATACH_MELON_SRCH_TYPE_SONG:$srchInputLayout.after(_widget.renderWithTemplate("d_cmtpgn_atach_song_srch_list_template",srchPageTemplatePropty));$srchInputLayout.after(_widget.renderWithTemplate("d_cmtpgn_atach_song_srch_result_template",srchPageTemplatePropty));break;case __global.C_ATACH_MELON_SRCH_TYPE_ALBUM:$srchInputLayout.after(_widget.renderWithTemplate("d_cmtpgn_atach_album_srch_list_template",srchPageTemplatePropty));$srchInputLayout.after(_widget.renderWithTemplate("d_cmtpgn_atach_album_srch_result_template",srchPageTemplatePropty));break;case __global.C_ATACH_MELON_SRCH_TYPE_ARTIST:$srchInputLayout.after(_widget.renderWithTemplate("d_cmtpgn_atach_artist_srch_list_template",srchPageTemplatePropty));$srchInputLayout.after(_widget.renderWithTemplate("d_cmtpgn_atach_artist_srch_result_template",srchPageTemplatePropty));break;}}$atachMusicLayer.find(".d_cmtpgn_atach_music_srch_list").find(">table>tbody>tr:first").addClass("first_child");if(__util.isDefined(pagingInfo.pageList)===true&&pagingInfo.pageList.length>0){var $srchNavigatorLayout=$atachMusicLayer.find(".d_cmtpgn_atach_music_srch_navigator");if(Number(pageInfo.pageNo)===Number(pagingInfo.firstPageNo)){$srchNavigatorLayout.find(".btn_first").removeAttr("href");}if(Number(pagingInfo.prevGroupPageNo)===0){$srchNavigatorLayout.find(".btn_pre").removeAttr("href");}if(Number(pagingInfo.nextGroupPageNo)===0){$srchNavigatorLayout.find(".btn_next").removeAttr("href");}if(Number(pageInfo.pageNo)===Number(pagingInfo.lastPageNo)){$srchNavigatorLayout.find(".btn_last").removeAttr("href");}}}else{if($srchOptionLayout.length>0){switch(pageInfo.musicType){case __global.C_ATACH_MELON_SRCH_TYPE_SONG:$srchOptionLayout.replaceWith(_widget.renderWithTemplate("d_cmtpgn_atach_song_srch_result_template",srchPageTemplatePropty));break;case __global.C_ATACH_MELON_SRCH_TYPE_ALBUM:$srchOptionLayout.replaceWith(_widget.renderWithTemplate("d_cmtpgn_atach_album_srch_result_template",srchPageTemplatePropty));break;case __global.C_ATACH_MELON_SRCH_TYPE_ARTIST:$srchOptionLayout.replaceWith(_widget.renderWithTemplate("d_cmtpgn_atach_artist_srch_result_template",srchPageTemplatePropty));break;}}else{switch(pageInfo.musicType){case __global.C_ATACH_MELON_SRCH_TYPE_SONG:$srchInputLayout.after(_widget.renderWithTemplate("d_cmtpgn_atach_song_srch_result_template",srchPageTemplatePropty));break;case __global.C_ATACH_MELON_SRCH_TYPE_ALBUM:$srchInputLayout.after(_widget.renderWithTemplate("d_cmtpgn_atach_album_srch_result_template",srchPageTemplatePropty));break;case __global.C_ATACH_MELON_SRCH_TYPE_ARTIST:$srchInputLayout.after(_widget.renderWithTemplate("d_cmtpgn_atach_artist_srch_result_template",srchPageTemplatePropty));break;}}if($atachMusicLayer.find(".d_cmtpgn_atach_music_srch_list").length>0||$atachMusicLayer.find(".d_cmtpgn_atach_music_srch_navigator").length>0){$atachMusicLayer.find(".d_cmtpgn_atach_music_srch_list").hide().remove();$atachMusicLayer.find(".d_cmtpgn_atach_music_srch_navigator").hide().remove();}}$srchOptionLayout=$atachMusicLayer.find(".d_cmtpgn_atach_music_srch_option");$atachMusicLayer.find("input.d_cmtpgn_atach_music_srch_hidden").val(pageInfo.srchWord);$atachMusicLayer.find("input.d_cmtpgn_atach_music_srch_input").val(pageInfo.srchWord);if($srchOptionLayout.length>0){$.each($srchOptionLayout.find("input:radio"),function(i,item){if(item.value===pageInfo.musicType){$srchOptionLayout.find("input:radio").prop("checked",false).removeAttr("checked").eq(i).prop("checked",true).attr("checked","checked");}});$srchOptionLayout.find("select").selectbox("value",pageInfo.sortType);$srchOptionLayout.show();}$atachMusicLayer.off(C_EVENT_TYPE_MULTIPLE_ARTIST).on(C_EVENT_TYPE_MULTIPLE_ARTIST,"button.d_cmtpgn_multiple_artist_btn",function(e){__util.log("worker.render.atach.music.srch() C_EVENT_TYPE_MULTIPLE_ARTIST executed.");e.preventDefault();var $this=$(this);var $layer=$this.next(".d_cmtpgn_multiple_artist_layer");$layer.off(C_EVENT_TYPE_CLOSE_LAYER).on(C_EVENT_TYPE_CLOSE_LAYER,"button.d_cmtpgn_layer_close_btn",function(e){__util.log("worker.render.atach.music.srch() C_EVENT_TYPE_CLOSE_LAYER executed.");e.preventDefault();$(this).closest(".d_cmtpgn_multiple_artist_layer").hide();return false;__util.log("worker.render.atach.music.srch() C_EVENT_TYPE_CLOSE_LAYER executed done.");});if($layer.css("display")==="block"){$layer.hide();}else{$layer.closest(".d_cmtpgn_atach_music_layer").find(".d_cmtpgn_multiple_artist_layer").hide();$layer.show();}__util.log("worker.render.atach.music.srch() C_EVENT_TYPE_MULTIPLE_ARTIST executed done.");});__util.log("@worker.render.atach.music.srch() executed done.");};worker.render.atach.music.loading={};worker.render.atach.music.loading.start=function(editingCmtSeq){var $cmtInputLayout=(Number(editingCmtSeq)===__global.C_EMPTY_KEY?$G_CONTAINER.find("#d_cmtpgn_cmt_write_box"):$G_CONTAINER.find("#d_cmtpgn_cmt_list_wrapper").find("ul>li").filter('[data-cmt-id="'+Number(editingCmtSeq)+'"]').find(".d_cmtpgn_cmt_edit_box"));var $atachMusicLayer=$cmtInputLayout.find(".d_cmtpgn_atach_music_layer");if($atachMusicLayer.find(".d_cmtpgn_atach_music_srch_option").length>0){$atachMusicLayer.find(".d_cmtpgn_loading").show().andSelf().find(".d_cmtpgn_noresult").hide().andSelf().find(".d_cmtpgn_fallback").hide().andSelf().find(".d_cmtpgn_atach_music_srch_list, .d_cmtpgn_atach_music_srch_navigator").hide();}else{$atachMusicLayer.find(".d_cmtpgn_loading").show().andSelf().find(".d_cmtpgn_noresult").hide().andSelf().find(".d_cmtpgn_fallback").hide();}};worker.render.atach.music.loading.finish=function(fallbackFlag,editingCmtSeq){__util.log("@worker.render.atach.music.loading.finish() executed. fallbackFlag=["+fallbackFlag+"]");var $cmtInputLayout=(Number(editingCmtSeq)===__global.C_EMPTY_KEY?$G_CONTAINER.find("#d_cmtpgn_cmt_write_box"):$G_CONTAINER.find("#d_cmtpgn_cmt_list_wrapper").find("ul>li").filter('[data-cmt-id="'+Number(editingCmtSeq)+'"]').find(".d_cmtpgn_cmt_edit_box"));var $atachMusicLayer=$cmtInputLayout.find(".d_cmtpgn_atach_music_layer");if(fallbackFlag!==true){if($atachMusicLayer.find(".d_cmtpgn_atach_music_srch_list").length>0){__util.log("worker.render.atach.music.loading.finish() d_cmtpgn_atach_music_srch_list EXISTS.");__util.adjustMultipleArtistDsply($atachMusicLayer);$atachMusicLayer.find(".d_cmtpgn_atach_music_srch_list, .d_cmtpgn_atach_music_srch_navigator").show().andSelf().find(".d_cmtpgn_loading").hide();}else{__util.log("worker.render.atach.music.loading.finish() d_cmtpgn_atach_music_srch_list NOT EXISTS.");$atachMusicLayer.find(".d_cmtpgn_noresult").show().andSelf().find(".d_cmtpgn_loading").hide();}}else{$atachMusicLayer.find(".d_cmtpgn_fallback").show().andSelf().find(".d_cmtpgn_noresult").hide().andSelf().find(".d_cmtpgn_loading").hide();}$G_CONTAINER.find(".d_cmtpgn_atach_suggest_keyword").hide();__util.log("@worker.render.atach.music.loading.finish() executed done.");};worker.render.atach.video={};worker.render.atach.video.srch=function(editingCmtSeq,pageInfo,srchList,pagingInfo){__util.log("@worker.render.atach.video.srch() executed.");var $cmtInputLayout=(Number(editingCmtSeq)===__global.C_EMPTY_KEY?$G_CONTAINER.find("#d_cmtpgn_cmt_write_box"):$G_CONTAINER.find("#d_cmtpgn_cmt_list_wrapper").find("ul>li").filter('[data-cmt-id="'+Number(editingCmtSeq)+'"]').find(".d_cmtpgn_cmt_edit_box"));var $atachVideoLayer=$cmtInputLayout.find(".d_cmtpgn_atach_video_layer");var srchEntryList=[],srchPageTemplatePropty={};srchPageTemplatePropty.songCnt=__util.getNumericDsplyFormat(pageInfo.songCnt);srchPageTemplatePropty.albumCnt=__util.getNumericDsplyFormat(pageInfo.albumCnt);srchPageTemplatePropty.artistCnt=__util.getNumericDsplyFormat(pageInfo.artistCnt);srchPageTemplatePropty.videoCnt=__util.getNumericDsplyFormat(pageInfo.videoCnt);srchPageTemplatePropty.srchWord=pageInfo.srchWord;if(__util.isDefined(srchList)===true&&srchList.length>0){for(var i=0,srchListSize=srchList.length;i<srchListSize;i++){srchEntryList.push(worker.render.atach.entry.srch(pageInfo,srchList[i]));}srchPageTemplatePropty.videoListHtmlString=srchEntryList.join("");if(__util.isDefined(pagingInfo.pageList)===true&&pagingInfo.pageList.length>0){var pagingTemplatePropty={};pagingTemplatePropty.firstPageHashString=__util.makeMusicSrchHashString(pagingInfo.firstPageNo,pageInfo.musicType,pageInfo.sortType,pageInfo.srchWord);pagingTemplatePropty.prevPageHashString=__util.makeMusicSrchHashString(pagingInfo.prevGroupPageNo,pageInfo.musicType,pageInfo.sortType,pageInfo.srchWord);pagingTemplatePropty.nextPageHashString=__util.makeMusicSrchHashString(pagingInfo.nextGroupPageNo,pageInfo.musicType,pageInfo.sortType,pageInfo.srchWord);pagingTemplatePropty.lastPageHashString=__util.makeMusicSrchHashString(pagingInfo.lastPageNo,pageInfo.musicType,pageInfo.sortType,pageInfo.srchWord);pagingTemplatePropty.firstPageClassString=(Number(pageInfo.pageNo)===Number(pagingInfo.firstPageNo)?' class="btn_first disabled d_cmtpgn_navigator"':' class="btn_first d_cmtpgn_navigator"');pagingTemplatePropty.prevPageClassString=(Number(pagingInfo.prevGroupPageNo)===0?' class="btn_pre disabled d_cmtpgn_navigator"':' class="btn_pre d_cmtpgn_navigator"');pagingTemplatePropty.nextPageClassString=(Number(pagingInfo.nextGroupPageNo)===0?' class="btn_next disabled d_cmtpgn_navigator"':' class="btn_next d_cmtpgn_navigator"');pagingTemplatePropty.lastPageClassString=(Number(pageInfo.pageNo)===Number(pagingInfo.lastPageNo)?' class="btn_last disabled d_cmtpgn_navigator"':' class="btn_last d_cmtpgn_navigator"');var pagingEntryList=[],currentPage=pageInfo.pageNo;for(var i=0,pageListSize=pagingInfo.pageList.length;i<pageListSize;i++){if(currentPage===pagingInfo.pageList[i].page){pagingEntryList.push('<strong><span class="none">현재페이지</span>'+pagingInfo.pageList[i].page+"</strong>");}else{pagingEntryList.push('<a href="#'+__util.makeMusicSrchHashString(pagingInfo.pageList[i].page,pageInfo.musicType,pageInfo.sortType,pageInfo.srchWord)+'" class="d_cmtpgn_navigator">'+pagingInfo.pageList[i].page+"</a>");}}pagingTemplatePropty.pagingEntryListHtml=pagingEntryList.join("");srchPageTemplatePropty.videoNavigatorHtmlString=_widget.renderWithTemplate("d_cmtpgn_navigator_template",pagingTemplatePropty);}}if($atachVideoLayer.find(".d_cmtpgn_noresult").length>0){$atachVideoLayer.find(".d_cmtpgn_noresult").hide();}$atachVideoLayer.find(".d_cmtpgn_atach_video_srch_list, .d_cmtpgn_atach_video_srch_navigator").hide().remove();var $srchInputLayout=$atachVideoLayer.find(".d_cmtpgn_atach_srch_box");var $srchOptionLayout=$atachVideoLayer.find(".d_cmtpgn_atach_video_srch_option");if(Number(pageInfo.totalCnt)>0){if($srchOptionLayout.length>0){$srchOptionLayout.after(_widget.renderWithTemplate("d_cmtpgn_atach_video_srch_list_template",srchPageTemplatePropty));$srchOptionLayout.replaceWith(_widget.renderWithTemplate("d_cmtpgn_atach_video_srch_result_template",srchPageTemplatePropty));}else{$srchInputLayout.after(_widget.renderWithTemplate("d_cmtpgn_atach_video_srch_list_template",srchPageTemplatePropty));$srchInputLayout.after(_widget.renderWithTemplate("d_cmtpgn_atach_video_srch_result_template",srchPageTemplatePropty));}$atachVideoLayer.find(".d_cmtpgn_atach_video_srch_list").find(">table>tbody>tr:first").addClass("first_child");if(__util.isDefined(pagingInfo.pageList)===true&&pagingInfo.pageList.length>0){var $srchNavigatorLayout=$atachVideoLayer.find(".d_cmtpgn_atach_video_srch_navigator");if(Number(pageInfo.pageNo)===Number(pagingInfo.firstPageNo)){$srchNavigatorLayout.find(".btn_first").removeAttr("href");}if(Number(pagingInfo.prevGroupPageNo)===0){$srchNavigatorLayout.find(".btn_pre").removeAttr("href");}if(Number(pagingInfo.nextGroupPageNo)===0){$srchNavigatorLayout.find(".btn_next").removeAttr("href");}if(Number(pageInfo.pageNo)===Number(pagingInfo.lastPageNo)){$srchNavigatorLayout.find(".btn_last").removeAttr("href");}}}else{$srchInputLayout.parent().find(".d_cmtpgn_atach_video_srch_option").hide().remove();}$srchOptionLayout=$atachVideoLayer.find(".d_cmtpgn_atach_video_srch_option");$atachVideoLayer.find("input.d_cmtpgn_atach_video_srch_hidden").val(pageInfo.srchWord);$atachVideoLayer.find("input.d_cmtpgn_atach_video_srch_input").val(pageInfo.srchWord);if($srchOptionLayout.length>0){$srchOptionLayout.find("select").selectbox("value",pageInfo.sortType);$srchOptionLayout.show();}$atachVideoLayer.off(C_EVENT_TYPE_MULTIPLE_ARTIST).on(C_EVENT_TYPE_MULTIPLE_ARTIST,"button.d_cmtpgn_multiple_artist_btn",function(e){__util.log("worker.render.atach.video.srch() C_EVENT_TYPE_MULTIPLE_ARTIST executed.");e.preventDefault();var $this=$(this);var $layer=$this.next(".d_cmtpgn_multiple_artist_layer");$layer.off(C_EVENT_TYPE_CLOSE_LAYER).on(C_EVENT_TYPE_CLOSE_LAYER,"button.d_cmtpgn_layer_close_btn",function(e){__util.log("worker.render.atach.video.srch() C_EVENT_TYPE_CLOSE_LAYER executed.");e.preventDefault();$(this).closest(".d_cmtpgn_multiple_artist_layer").hide();return false;__util.log("worker.render.atach.video.srch() C_EVENT_TYPE_CLOSE_LAYER executed done.");});if($layer.css("display")==="block"){$layer.hide();}else{$layer.closest(".d_cmtpgn_atach_video_layer").find(".d_cmtpgn_multiple_artist_layer").hide();$layer.show();}__util.log("worker.render.atach.video.srch() C_EVENT_TYPE_MULTIPLE_ARTIST executed done.");});__util.log("@worker.render.atach.video.srch() executed done.");};worker.render.atach.video.loading={};worker.render.atach.video.loading.start=function(editingCmtSeq){var $cmtInputLayout=(Number(editingCmtSeq)===__global.C_EMPTY_KEY?$G_CONTAINER.find("#d_cmtpgn_cmt_write_box"):$G_CONTAINER.find("#d_cmtpgn_cmt_list_wrapper").find("ul>li").filter('[data-cmt-id="'+Number(editingCmtSeq)+'"]').find(".d_cmtpgn_cmt_edit_box"));var $atachVideoLayer=$cmtInputLayout.find(".d_cmtpgn_atach_video_layer");if($atachVideoLayer.find(".d_cmtpgn_atach_video_srch_option").length>0){$atachVideoLayer.find(".d_cmtpgn_loading").show().andSelf().find(".d_cmtpgn_noresult").hide().andSelf().find(".d_cmtpgn_fallback").hide().andSelf().find(".d_cmtpgn_atach_video_srch_list, .d_cmtpgn_atach_video_srch_navigator").hide();}else{$atachVideoLayer.find(".d_cmtpgn_loading").show().andSelf().find(".d_cmtpgn_noresult").hide().andSelf().find(".d_cmtpgn_fallback").hide();}};worker.render.atach.video.loading.finish=function(fallbackFlag,editingCmtSeq){__util.log("@worker.render.atach.video.loading.finish() executed. fallbackFlag=["+fallbackFlag+"]");var $cmtInputLayout=(Number(editingCmtSeq)===__global.C_EMPTY_KEY?$G_CONTAINER.find("#d_cmtpgn_cmt_write_box"):$G_CONTAINER.find("#d_cmtpgn_cmt_list_wrapper").find("ul>li").filter('[data-cmt-id="'+Number(editingCmtSeq)+'"]').find(".d_cmtpgn_cmt_edit_box"));var $atachVideoLayer=$cmtInputLayout.find(".d_cmtpgn_atach_video_layer");if(fallbackFlag!==true){if($atachVideoLayer.find(".d_cmtpgn_atach_video_srch_list").length>0){__util.adjustMultipleArtistDsply($atachVideoLayer);$atachVideoLayer.find(".d_cmtpgn_atach_video_srch_list, .d_cmtpgn_atach_video_srch_navigator").show().andSelf().find(".d_cmtpgn_loading").hide();}else{$atachVideoLayer.find(".d_cmtpgn_noresult").show().andSelf().find(".d_cmtpgn_loading").hide();}}else{$atachVideoLayer.find(".d_cmtpgn_fallback").show().andSelf().find(".d_cmtpgn_noresult").hide().andSelf().find(".d_cmtpgn_loading").hide();}$G_CONTAINER.find(".d_cmtpgn_atach_suggest_keyword").hide();};worker.render.atach.entry={};worker.render.atach.entry.srch=function(pageInfo,atachInfo){__util.log("@worker.render.atach.entry.srch() executed.");if(__util.isEmpty(atachInfo)!==true){__util.log("worker.render.atach.entry.srch() musicType=["+pageInfo.musicType+"], srchWord=["+pageInfo.srchWord+"]");var atachEntryTemplatePropty,multipleArtistListHtml,firstMultipleArtistFlag=true,firstChildClassString;switch(pageInfo.musicType){case __global.C_ATACH_MELON_SRCH_TYPE_SONG:atachEntryTemplatePropty={};atachEntryTemplatePropty.artistId="";atachEntryTemplatePropty.artistName="";$.each(atachInfo.artistList,function(index){atachEntryTemplatePropty.artistId+=atachInfo.artistList[index].artistId+", ";atachEntryTemplatePropty.artistName+=atachInfo.artistList[index].artistName+", ";});if(__util.isEmpty(atachEntryTemplatePropty.artistId)!==true){atachEntryTemplatePropty.artistId=atachEntryTemplatePropty.artistId.substring(0,atachEntryTemplatePropty.artistId.lastIndexOf(", "));}if(__util.isEmpty(atachEntryTemplatePropty.artistName)!==true){atachEntryTemplatePropty.artistName=atachEntryTemplatePropty.artistName.substring(0,atachEntryTemplatePropty.artistName.lastIndexOf(", "));}if(__util.isDefined(atachInfo.artistList)===true&&atachInfo.artistList.length>1){multipleArtistListHtml="";$.each(atachInfo.artistList,function(index){firstChildClassString="";if(firstMultipleArtistFlag===true){firstChildClassString=' class="first_child"';firstMultipleArtistFlag=false;}multipleArtistListHtml+=_widget.renderWithTemplate("d_cmtpgn_atach_multiple_artist_srch_entry_template",{firstChildClassString:firstChildClassString,artistName:atachInfo.artistList[index].artistName});});atachEntryTemplatePropty.multipleArtistLayerHtml=_widget.renderWithTemplate("d_cmtpgn_atach_multiple_artist_srch_layer_template",{artistListHtml:multipleArtistListHtml});atachEntryTemplatePropty.maxWidthValue="80";}else{atachEntryTemplatePropty.maxWidthValue="90";}atachEntryTemplatePropty.albumId=atachInfo.albumId;atachEntryTemplatePropty.albumName=atachInfo.albumName;atachEntryTemplatePropty.albumThumbUrl=atachInfo.albumImagePath||__global.C_ALBUM_DFLT_SRCH_IMG;atachEntryTemplatePropty.albumDsplyThumbUrl=atachInfo.albumImageDsplyPath||__global.C_ALBUM_DFLT_DSPLY_IMG;atachEntryTemplatePropty.songId=atachInfo.songId;atachEntryTemplatePropty.songName=atachInfo.songName;atachEntryTemplatePropty.songAdultFlag=atachInfo.adultFlag;atachEntryTemplatePropty.songAvailFlag=atachInfo.svcAvailFlag;atachEntryTemplatePropty.songHoldBackFlag=atachInfo.holdBackFlag;atachEntryTemplatePropty.songFreezoneFlag=atachInfo.freezoneFlag;atachEntryTemplatePropty.songHotSongFlag=atachInfo.hotSongFlag;atachEntryTemplatePropty.dimClassString="";atachEntryTemplatePropty.disableClass="";if(__util.isEmpty(atachInfo.svcAvailFlag)===true||Number(atachInfo.svcAvailFlag)>1){atachEntryTemplatePropty.dimClassString=' class="no_result"';atachEntryTemplatePropty.disableClass=" disabled";}__util.log("worker.render.atach.entry.srch() C_ATACH_TYPE_MUSIC_SONG atachInfo.adultFlag=["+(atachInfo.adultFlag)+"]");atachEntryTemplatePropty.songAgeAdultHtml="";if(atachInfo.adultFlag===true){atachEntryTemplatePropty.songAgeAdultHtml=_widget.renderWithTemplate("d_cmtpgn_atach_song_age_adult_template");}atachEntryTemplatePropty.songHoldBackHtml="";if(atachInfo.holdBackFlag===true){atachEntryTemplatePropty.songHoldBackHtml=_widget.renderWithTemplate("d_cmtpgn_atach_song_hold_back_template");}atachEntryTemplatePropty.songFreezoneHtml="";if(atachInfo.freezoneFlag===true){atachEntryTemplatePropty.songFreezoneHtml=_widget.renderWithTemplate("d_cmtpgn_atach_song_free_zone_template");}atachEntryTemplatePropty.songHighlightName=__util.getHighlightDsplyFormat(atachEntryTemplatePropty.songName,pageInfo.srchWord,"strong");return _widget.renderWithTemplate("d_cmtpgn_atach_song_srch_entry_template",atachEntryTemplatePropty);case __global.C_ATACH_MELON_SRCH_TYPE_ALBUM:atachEntryTemplatePropty={};atachEntryTemplatePropty.artistId="";atachEntryTemplatePropty.artistName="";$.each(atachInfo.artistList,function(index){atachEntryTemplatePropty.artistId+=atachInfo.artistList[index].artistId+", ";atachEntryTemplatePropty.artistName+=atachInfo.artistList[index].artistName+", ";});if(__util.isEmpty(atachEntryTemplatePropty.artistId)!==true){atachEntryTemplatePropty.artistId=atachEntryTemplatePropty.artistId.substring(0,atachEntryTemplatePropty.artistId.lastIndexOf(", "));}if(__util.isEmpty(atachEntryTemplatePropty.artistName)!==true){atachEntryTemplatePropty.artistName=atachEntryTemplatePropty.artistName.substring(0,atachEntryTemplatePropty.artistName.lastIndexOf(", "));}if(__util.isDefined(atachInfo.artistList)===true&&atachInfo.artistList.length>1){multipleArtistListHtml="";$.each(atachInfo.artistList,function(index){firstChildClassString="";if(firstMultipleArtistFlag===true){firstChildClassString=' class="first_child"';firstMultipleArtistFlag=false;}multipleArtistListHtml+=_widget.renderWithTemplate("d_cmtpgn_atach_multiple_artist_srch_entry_template",{firstChildClassString:firstChildClassString,artistName:atachInfo.artistList[index].artistName});});atachEntryTemplatePropty.multipleArtistLayerHtml=_widget.renderWithTemplate("d_cmtpgn_atach_multiple_artist_srch_layer_template",{artistListHtml:multipleArtistListHtml});atachEntryTemplatePropty.maxWidthValue="80";}else{atachEntryTemplatePropty.maxWidthValue="90";}atachEntryTemplatePropty.albumId=atachInfo.albumId;atachEntryTemplatePropty.albumName=atachInfo.albumName;atachEntryTemplatePropty.albumThumbUrl=atachInfo.albumImagePath||__global.C_ALBUM_DFLT_DSPLY_IMG;atachEntryTemplatePropty.albumDsplyThumbUrl=atachInfo.albumImageDsplyPath||__global.C_ALBUM_DFLT_DSPLY_IMG;atachEntryTemplatePropty.albumIssueDate=atachInfo.dsplyIssueDate;atachEntryTemplatePropty.albumAvailFlag=atachInfo.svcAvailFlag;atachEntryTemplatePropty.dimClassString="";atachEntryTemplatePropty.disableClass="";if(__util.isEmpty(atachInfo.svcAvailFlag)===true||Number(atachInfo.svcAvailFlag)>1){atachEntryTemplatePropty.dimClassString=' class="no_result"';atachEntryTemplatePropty.disableClass=" disabled";}atachEntryTemplatePropty.albumHighlightName=__util.getHighlightDsplyFormat(atachEntryTemplatePropty.albumName,pageInfo.srchWord,"strong");return _widget.renderWithTemplate("d_cmtpgn_atach_album_srch_entry_template",atachEntryTemplatePropty);case __global.C_ATACH_MELON_SRCH_TYPE_ARTIST:atachEntryTemplatePropty={};atachEntryTemplatePropty.artistId=atachInfo.artistId;atachEntryTemplatePropty.artistName=atachInfo.artistName;atachEntryTemplatePropty.artistThumbUrl=atachInfo.artistImagePath||__global.C_ARTIST_DFLT_SRCH_IMG;atachEntryTemplatePropty.artistDsplyThumbUrl=atachInfo.artistImageDsplyPath||__global.C_ARTIST_DFLT_DSPLY_IMG;atachEntryTemplatePropty.artistNationalityName=atachInfo.nationalityName;atachEntryTemplatePropty.artistSexTypeName=atachInfo.sex;atachEntryTemplatePropty.artistActTypeName=atachInfo.actTypeName;atachEntryTemplatePropty.artistAddInfos=[atachInfo.nationalityName,atachInfo.sex,atachInfo.actTypeName];atachEntryTemplatePropty.artistAddInfo=[];for(var i=0;i<atachEntryTemplatePropty.artistAddInfos.length;i++){if(""!=atachEntryTemplatePropty.artistAddInfos[i]){atachEntryTemplatePropty.artistAddInfo.push(atachEntryTemplatePropty.artistAddInfos[i]);}}atachEntryTemplatePropty.artistAddInfo=atachEntryTemplatePropty.artistAddInfo.join("/");atachEntryTemplatePropty.artistGnrTypeName=atachInfo.gnr;atachEntryTemplatePropty.artistFanCnt=atachInfo.fanCnt;atachEntryTemplatePropty.artistHighlightName=__util.getHighlightDsplyFormat(atachEntryTemplatePropty.artistName,pageInfo.srchWord,"strong");return _widget.renderWithTemplate("d_cmtpgn_atach_artist_srch_entry_template",atachEntryTemplatePropty);case __global.C_ATACH_MELON_SRCH_TYPE_VIDEO:atachEntryTemplatePropty={};atachEntryTemplatePropty.artistId="";atachEntryTemplatePropty.artistName="";$.each(atachInfo.artistList,function(index){atachEntryTemplatePropty.artistId+=atachInfo.artistList[index].artistId+", ";atachEntryTemplatePropty.artistName+=atachInfo.artistList[index].artistName+", ";});if(__util.isEmpty(atachEntryTemplatePropty.artistId)!==true){atachEntryTemplatePropty.artistId=atachEntryTemplatePropty.artistId.substring(0,atachEntryTemplatePropty.artistId.lastIndexOf(", "));}if(__util.isEmpty(atachEntryTemplatePropty.artistName)!==true){atachEntryTemplatePropty.artistName=atachEntryTemplatePropty.artistName.substring(0,atachEntryTemplatePropty.artistName.lastIndexOf(", "));}if(__util.isDefined(atachInfo.artistList)===true&&atachInfo.artistList.length>1){multipleArtistListHtml="";$.each(atachInfo.artistList,function(index){firstChildClassString="";if(firstMultipleArtistFlag===true){firstChildClassString=' class="first_child"';firstMultipleArtistFlag=false;}multipleArtistListHtml+=_widget.renderWithTemplate("d_cmtpgn_atach_multiple_artist_srch_entry_template",{firstChildClassString:firstChildClassString,artistName:atachInfo.artistList[index].artistName});});atachEntryTemplatePropty.multipleArtistLayerHtml=_widget.renderWithTemplate("d_cmtpgn_atach_multiple_artist_srch_layer_template",{artistListHtml:multipleArtistListHtml});atachEntryTemplatePropty.maxWidthValue="80";}else{atachEntryTemplatePropty.maxWidthValue="90";}atachEntryTemplatePropty.videoId=atachInfo.videoId;atachEntryTemplatePropty.videoTitle=atachInfo.videoTitle;atachEntryTemplatePropty.videoThumbUrl=atachInfo.videoImagePath||__global.C_VIDEO_DFLT_SRCH_IMG;atachEntryTemplatePropty.videoDsplyThumbUrl=atachInfo.videoImageDsplyPath||__global.C_VIDEO_DFLT_DSPLY_IMG;atachEntryTemplatePropty.videoAdultFlag=atachInfo.videoAdultFlag;atachEntryTemplatePropty.videoAgeLevel=atachInfo.videoAgeLevel;atachEntryTemplatePropty.videoAgeLevelHtml="";switch(atachInfo.videoAgeLevel){case 1:atachEntryTemplatePropty.videoAgeLevelHtml=_widget.renderWithTemplate("d_cmtpgn_atach_video_age_level_1_template");break;case 2:atachEntryTemplatePropty.videoAgeLevelHtml=_widget.renderWithTemplate("d_cmtpgn_atach_video_age_level_2_template");break;case 3:atachEntryTemplatePropty.videoAgeLevelHtml=_widget.renderWithTemplate("d_cmtpgn_atach_video_age_level_3_template");break;case 4:atachEntryTemplatePropty.videoAgeLevelHtml=_widget.renderWithTemplate("d_cmtpgn_atach_video_age_level_4_template");break;default:atachEntryTemplatePropty.videoAgeLevelHtml=_widget.renderWithTemplate("d_cmtpgn_atach_video_age_level_0_template");break;}atachEntryTemplatePropty.videoPlayTime=atachInfo.dsplyPlayTime;atachEntryTemplatePropty.videoViewCnt=atachInfo.videoViewCnt;atachEntryTemplatePropty.videoIssueDate=atachInfo.dsplyVideoIssueDate;atachEntryTemplatePropty.songId=atachInfo.songIdId;atachEntryTemplatePropty.videoAvailFlag=atachInfo.svcAvailFlag;atachEntryTemplatePropty.dimClassString="";atachEntryTemplatePropty.disableClass="";if(__util.isEmpty(atachInfo.svcAvailFlag)===true||Number(atachInfo.svcAvailFlag)>1){atachEntryTemplatePropty.dimClassString=' class="no_result"';atachEntryTemplatePropty.disableClass=" disabled";}atachEntryTemplatePropty.videoHighlightTitle=__util.getHighlightDsplyFormat(atachEntryTemplatePropty.videoTitle,pageInfo.srchWord,"strong");return _widget.renderWithTemplate("d_cmtpgn_atach_video_srch_entry_template",atachEntryTemplatePropty);}}__util.log("@worker.render.atach.entry.srch() executed done.");return"";};worker.render.atach.entry.edit=function(editingCmtSeq,atachInfo){__util.log("@worker.render.atach.entry.edit() executed. editingCmtSeq=["+editingCmtSeq+"]");__util.log("@worker.render.atach.entry.edit() executed. atachInfo is",atachInfo);if(__util.isEmpty(atachInfo)!==true){__util.log("worker.render.atach.entry.edit() atachType=["+atachInfo.atachType+"]");var atachEntryTemplatePropty,multipleArtistListHtml="",firstChildClassString="";switch(atachInfo.atachType){case __global.C_ATACH_TYPE_TEXT:atachEntryTemplatePropty={};atachEntryTemplatePropty.atachSeq=atachInfo.atachSeq;atachEntryTemplatePropty.atachType=atachInfo.atachType;atachEntryTemplatePropty.atachValue=__util.getCmtTextDsplyFormat(atachInfo.atachValue);if(__util.isDefined(atachInfo.atachPropty)===true){atachEntryTemplatePropty.textCont=__util.getCmtTextDsplyFormat(atachInfo.atachPropty.textCont);}var textAreaRect=__util.getEditAreaRect(G_TEMPLATE_TYPE,G_TEXTAREA_TYPE,(Number(editingCmtSeq)===__global.C_EMPTY_KEY?__global.C_TEXT_DUMMY_LEVEL_WRITE:__global.C_TEXT_DUMMY_LEVEL_MODIFY));atachEntryTemplatePropty.textareaWidthValue=textAreaRect.width;atachEntryTemplatePropty.textareaHeightValue=textAreaRect.height;__util.log("worker.render.atach.entry.edit() atachEntryHtml=["+(_widget.renderWithTemplate("d_cmtpgn_atach_text_edit_template",atachEntryTemplatePropty))+"]");return _widget.renderWithTemplate("d_cmtpgn_atach_text_edit_template",atachEntryTemplatePropty);case __global.C_ATACH_TYPE_MUSIC_SONG:atachEntryTemplatePropty={};atachEntryTemplatePropty.atachSeq=atachInfo.atachSeq;atachEntryTemplatePropty.atachType=atachInfo.atachType;atachEntryTemplatePropty.atachValue=atachInfo.atachValue;atachEntryTemplatePropty.multipleArtistDsplyMaxWidthValue=__util.getAtachMultipleArtistDsplyMaxWidth(G_TEMPLATE_TYPE,G_TEXTAREA_TYPE,atachInfo.atachType);if(__util.isDefined(atachInfo.atachPropty)===true){atachEntryTemplatePropty.artistListHtml="";atachEntryTemplatePropty.multipleArtistLayerHtml="";if(__util.isDefined(atachInfo.atachPropty.artistList)===true){$.each(atachInfo.atachPropty.artistList,function(index){atachEntryTemplatePropty.artistListHtml+=atachInfo.atachPropty.artistList[index].artistName+", ";if(atachInfo.atachPropty.artistList.length>1){firstChildClassString="";if(index===0){firstChildClassString=' class="first_child"';}multipleArtistListHtml+=_widget.renderWithTemplate("d_cmtpgn_atach_multiple_artist_edit_entry_template",{firstChildClassString:firstChildClassString,artistName:atachInfo.atachPropty.artistList[index].artistName});}});}if(__util.isEmpty(atachEntryTemplatePropty.artistListHtml)!==true){atachEntryTemplatePropty.artistListHtml=atachEntryTemplatePropty.artistListHtml.substring(0,atachEntryTemplatePropty.artistListHtml.lastIndexOf(", "));if(__util.isEmpty(multipleArtistListHtml)!==true){atachEntryTemplatePropty.multipleArtistLayerHtml=_widget.renderWithTemplate("d_cmtpgn_atach_multiple_artist_edit_layer_template",{artistListHtml:multipleArtistListHtml});}}atachEntryTemplatePropty.albumId=atachInfo.atachPropty.albumId;atachEntryTemplatePropty.albumName=atachInfo.atachPropty.albumName;atachEntryTemplatePropty.albumThumbUrl=atachInfo.atachPropty.albumImagePath||__global.C_ALBUM_DFLT_DSPLY_IMG;atachEntryTemplatePropty.songId=atachInfo.atachPropty.songId;atachEntryTemplatePropty.songName=atachInfo.atachPropty.songName;atachEntryTemplatePropty.songAdultFlag=(atachInfo.atachPropty.adultFlag==="true"?"1":"0");atachEntryTemplatePropty.songAvailFlag=atachInfo.atachPropty.svcAvailFlag;atachEntryTemplatePropty.stAvailFlag=atachInfo.atachPropty.stAvailFlag;atachEntryTemplatePropty.dlAvailFlag=atachInfo.atachPropty.dlAvailFlag;atachEntryTemplatePropty.albumOnlyFlag=atachInfo.atachPropty.albumOnlyFlag;atachEntryTemplatePropty.songHoldBackFlag=atachInfo.atachPropty.holdBackFlag;atachEntryTemplatePropty.songFreezoneFlag=atachInfo.atachPropty.freezoneFlag;atachEntryTemplatePropty.songHotSongFlag=atachInfo.atachPropty.hotSongFlag;__util.log("worker.render.atach.entry.edit() C_ATACH_TYPE_MUSIC_SONG adultFlag=["+(atachInfo.atachPropty.adultFlag)+"], holdBackFlag=["+(atachInfo.atachPropty.holdBackFlag)+"], freezoneFlag=["+(atachInfo.atachPropty.freezoneFlag)+"], hotSongFlag=["+(atachInfo.atachPropty.hotSongFlag)+"]");atachEntryTemplatePropty.songAgeAdultHtml="";if(atachInfo.atachPropty.adultFlag==="true"){atachEntryTemplatePropty.songAgeAdultHtml=_widget.renderWithTemplate("d_cmtpgn_atach_song_age_adult_template");__util.log("worker.render.atach.entry.edit() songAgeAdultHtml=["+(_widget.renderWithTemplate("d_cmtpgn_atach_song_age_adult_template"))+"]");}atachEntryTemplatePropty.songHoldBackHtml="";if(atachInfo.atachPropty.holdBackFlag==="true"){atachEntryTemplatePropty.songHoldBackHtml=_widget.renderWithTemplate("d_cmtpgn_atach_song_hold_back_template");__util.log("worker.render.atach.entry.edit() songHoldBackHtml=["+(_widget.renderWithTemplate("d_cmtpgn_atach_song_hold_back_template"))+"]");}atachEntryTemplatePropty.songFreezoneHtml="";if(atachInfo.atachPropty.freezoneFlag==="true"){atachEntryTemplatePropty.songFreezoneHtml=_widget.renderWithTemplate("d_cmtpgn_atach_song_free_zone_template");__util.log("worker.render.atach.entry.edit() songHoldBackHtml=["+(_widget.renderWithTemplate("d_cmtpgn_atach_song_free_zone_template"))+"]");}}else{atachEntryTemplatePropty.albumThumbUrl=__global.C_ALBUM_DFLT_DSPLY_IMG;}__util.log("worker.render.atach.entry.edit() atachEntryHtml=["+(_widget.renderWithTemplate("d_cmtpgn_atach_song_edit_template",atachEntryTemplatePropty))+"]");return _widget.renderWithTemplate("d_cmtpgn_atach_song_edit_template",atachEntryTemplatePropty);case __global.C_ATACH_TYPE_MUSIC_ALBUM:atachEntryTemplatePropty={};atachEntryTemplatePropty.atachSeq=atachInfo.atachSeq;atachEntryTemplatePropty.atachType=atachInfo.atachType;atachEntryTemplatePropty.atachValue=atachInfo.atachValue;atachEntryTemplatePropty.multipleArtistDsplyMaxWidthValue=__util.getAtachMultipleArtistDsplyMaxWidth(G_TEMPLATE_TYPE,G_TEXTAREA_TYPE,atachInfo.atachType);if(__util.isDefined(atachInfo.atachPropty)===true){atachEntryTemplatePropty.artistListHtml="";atachEntryTemplatePropty.multipleArtistLayerHtml="";if(__util.isDefined(atachInfo.atachPropty.artistList)===true){$.each(atachInfo.atachPropty.artistList,function(index){atachEntryTemplatePropty.artistListHtml+=atachInfo.atachPropty.artistList[index].artistName+", ";if(atachInfo.atachPropty.artistList.length>1){firstChildClassString="";if(index===0){firstChildClassString=' class="first_child"';}multipleArtistListHtml+=_widget.renderWithTemplate("d_cmtpgn_atach_multiple_artist_edit_entry_template",{firstChildClassString:firstChildClassString,artistName:atachInfo.atachPropty.artistList[index].artistName});}});}if(__util.isEmpty(atachEntryTemplatePropty.artistListHtml)!==true){atachEntryTemplatePropty.artistListHtml=atachEntryTemplatePropty.artistListHtml.substring(0,atachEntryTemplatePropty.artistListHtml.lastIndexOf(", "));if(__util.isEmpty(multipleArtistListHtml)!==true){atachEntryTemplatePropty.multipleArtistLayerHtml=_widget.renderWithTemplate("d_cmtpgn_atach_multiple_artist_edit_layer_template",{artistListHtml:multipleArtistListHtml});}}atachEntryTemplatePropty.albumId=atachInfo.atachPropty.albumId;atachEntryTemplatePropty.albumName=atachInfo.atachPropty.albumName;atachEntryTemplatePropty.albumThumbUrl=atachInfo.atachPropty.albumImagePath||__global.C_ALBUM_DFLT_DSPLY_IMG;atachEntryTemplatePropty.albumIssueDate=atachInfo.atachPropty.dsplyIssueDate;atachEntryTemplatePropty.albumAvailFlag=atachInfo.atachPropty.svcAvailFlag;atachEntryTemplatePropty.albumOnlyFlag=atachInfo.atachPropty.albumOnlyFlag;atachEntryTemplatePropty.albumDiscountFlag=atachInfo.atachPropty.albumDiscountFlag;atachEntryTemplatePropty.totalSongCnt=atachInfo.atachPropty.totalSongCnt;}else{atachEntryTemplatePropty.albumThumbUrl=__global.C_ALBUM_DFLT_DSPLY_IMG;}__util.log("worker.render.atach.entry.edit() atachEntryHtml=["+(_widget.renderWithTemplate("d_cmtpgn_atach_album_edit_template",atachEntryTemplatePropty))+"]");return _widget.renderWithTemplate("d_cmtpgn_atach_album_edit_template",atachEntryTemplatePropty);case __global.C_ATACH_TYPE_MUSIC_ARTIST:atachEntryTemplatePropty={};atachEntryTemplatePropty.atachSeq=atachInfo.atachSeq;atachEntryTemplatePropty.atachType=atachInfo.atachType;atachEntryTemplatePropty.atachValue=atachInfo.atachValue;if(__util.isDefined(atachInfo.atachPropty)===true){atachEntryTemplatePropty.artistId=atachInfo.atachPropty.artistId;atachEntryTemplatePropty.artistName=atachInfo.atachPropty.artistName;atachEntryTemplatePropty.artistThumbUrl=atachInfo.atachPropty.artistImagePath||__global.C_ARTIST_DFLT_DSPLY_IMG;atachEntryTemplatePropty.artistNationalityName=atachInfo.atachPropty.nationalityName;atachEntryTemplatePropty.artistSexTypeName=atachInfo.atachPropty.sex;atachEntryTemplatePropty.artistActTypeName=atachInfo.atachPropty.actTypeName;var tempAddInfo=[atachEntryTemplatePropty.artistNationalityName,atachEntryTemplatePropty.artistSexTypeName,atachEntryTemplatePropty.artistActTypeName];var addInfo=[];for(var i=0;i<tempAddInfo.length;i++){if(""!=tempAddInfo[i]&&typeof tempAddInfo[i]!="undefined"){addInfo.push('<span class="none"></span><span>'+tempAddInfo[i]+"</span>");}}atachEntryTemplatePropty.aritstAddInfoHtml=addInfo.join('<span class="bar">|</span>');if(addInfo.length>0&&""!=atachInfo.atachPropty.gnr&&typeof atachInfo.atachPropty.gnr!="undefined"){atachEntryTemplatePropty.aritstAddInfoHtml+='<span class="bar">|</span>';}atachEntryTemplatePropty.artistGnrTypeName=atachInfo.atachPropty.gnr;if(""==atachInfo.atachPropty.gnr){atachEntryTemplatePropty.artistGnrDisplay="display:none";}atachEntryTemplatePropty.artistFanCnt=atachInfo.atachPropty.fanCnt;}else{atachEntryTemplatePropty.artistThumbUrl=__global.C_ALBUM_DFLT_DSPLY_IMG;}__util.log("worker.render.atach.entry.edit() atachEntryHtml=["+(_widget.renderWithTemplate("d_cmtpgn_atach_artist_edit_template",atachEntryTemplatePropty))+"]");return _widget.renderWithTemplate("d_cmtpgn_atach_artist_edit_template",atachEntryTemplatePropty);case __global.C_ATACH_TYPE_IMAGE:atachEntryTemplatePropty={};atachEntryTemplatePropty.atachSeq=atachInfo.atachSeq;atachEntryTemplatePropty.atachType=atachInfo.atachType;atachEntryTemplatePropty.atachValue=atachInfo.atachValue;atachEntryTemplatePropty.atachName=atachInfo.atachValue;atachEntryTemplatePropty.atachName=atachInfo.atachName;if(__util.isDefined(atachInfo.atachPropty)===true){atachEntryTemplatePropty.imageOriginalUrl=atachInfo.atachPropty.originalUrl||__global.C_PHOTO_DFLT_DSPLY_IMG;atachEntryTemplatePropty.imageThumbUrl=atachInfo.atachPropty.thumbUrl||__global.C_PHOTO_DFLT_DSPLY_IMG;__util.log("worker.render.atach.entry.edit() originalUrl=["+atachEntryTemplatePropty.imageOriginalUrl+"], thumbUrl=["+atachEntryTemplatePropty.imageThumbUrl+"]");}else{atachEntryTemplatePropty.imageOriginalUrl=__global.C_PHOTO_DFLT_DSPLY_IMG;atachEntryTemplatePropty.imageThumbUrl=__global.C_PHOTO_DFLT_DSPLY_IMG;}__util.log("worker.render.atach.entry.edit() atachEntryHtml=["+(_widget.renderWithTemplate("d_cmtpgn_atach_image_edit_template",atachEntryTemplatePropty))+"]");return _widget.renderWithTemplate("d_cmtpgn_atach_image_edit_template",atachEntryTemplatePropty);case __global.C_ATACH_TYPE_VIDEO:atachEntryTemplatePropty={};atachEntryTemplatePropty.atachSeq=atachInfo.atachSeq;atachEntryTemplatePropty.atachType=atachInfo.atachType;atachEntryTemplatePropty.atachValue=atachInfo.atachValue;atachEntryTemplatePropty.multipleArtistDsplyMaxWidthValue=__util.getAtachMultipleArtistDsplyMaxWidth(G_TEMPLATE_TYPE,G_TEXTAREA_TYPE,atachInfo.atachType);if(__util.isDefined(atachInfo.atachPropty)===true){atachEntryTemplatePropty.artistListHtml="";atachEntryTemplatePropty.multipleArtistLayerHtml="";if(__util.isDefined(atachInfo.atachPropty.artistList)===true){$.each(atachInfo.atachPropty.artistList,function(index){atachEntryTemplatePropty.artistListHtml+=atachInfo.atachPropty.artistList[index].artistName+", ";if(atachInfo.atachPropty.artistList.length>1){firstChildClassString="";if(index===0){firstChildClassString=' class="first_child"';}multipleArtistListHtml+=_widget.renderWithTemplate("d_cmtpgn_atach_multiple_artist_edit_entry_template",{firstChildClassString:firstChildClassString,artistName:atachInfo.atachPropty.artistList[index].artistName});}});}if(__util.isEmpty(atachEntryTemplatePropty.artistListHtml)!==true){atachEntryTemplatePropty.artistListHtml=atachEntryTemplatePropty.artistListHtml.substring(0,atachEntryTemplatePropty.artistListHtml.lastIndexOf(", "));if(__util.isEmpty(multipleArtistListHtml)!==true){atachEntryTemplatePropty.multipleArtistLayerHtml=_widget.renderWithTemplate("d_cmtpgn_atach_multiple_artist_edit_layer_template",{artistListHtml:multipleArtistListHtml});}}atachEntryTemplatePropty.videoId=atachInfo.atachPropty.videoId;atachEntryTemplatePropty.videoTitle=atachInfo.atachPropty.videoTitle;atachEntryTemplatePropty.videoThumbUrl=atachInfo.atachPropty.videoImagePath||__global.C_VIDEO_DFLT_DSPLY_IMG;atachEntryTemplatePropty.videoAdultFlag=atachInfo.atachPropty.videoAdultFlag;atachEntryTemplatePropty.videoAgeLevel=atachInfo.atachPropty.videoAgeLevel;atachEntryTemplatePropty.videoAgeLevelHtml="";switch(atachInfo.atachPropty.videoAgeLevel){case"1":atachEntryTemplatePropty.videoAgeLevelHtml=_widget.renderWithTemplate("d_cmtpgn_atach_video_age_level_1_template");break;case"2":atachEntryTemplatePropty.videoAgeLevelHtml=_widget.renderWithTemplate("d_cmtpgn_atach_video_age_level_2_template");break;case"3":atachEntryTemplatePropty.videoAgeLevelHtml=_widget.renderWithTemplate("d_cmtpgn_atach_video_age_level_3_template");break;case"4":atachEntryTemplatePropty.videoAgeLevelHtml=_widget.renderWithTemplate("d_cmtpgn_atach_video_age_level_4_template");break;default:atachEntryTemplatePropty.videoAgeLevelHtml=_widget.renderWithTemplate("d_cmtpgn_atach_video_age_level_0_template");break;}atachEntryTemplatePropty.videoPlayTime=atachInfo.atachPropty.dsplyPlayTime;atachEntryTemplatePropty.videoViewCnt=__util.getNumericDsplyFormat(atachInfo.atachPropty.videoViewCnt);atachEntryTemplatePropty.videoIssueDate=atachInfo.atachPropty.dsplyVideoIssueDate;atachEntryTemplatePropty.songId=atachInfo.atachPropty.songId;atachEntryTemplatePropty.videoAvailFlag=atachInfo.atachPropty.svcAvailFlag;}else{atachEntryTemplatePropty.videoThumbUrl=__global.C_VIDEO_DFLT_DSPLY_IMG;atachEntryTemplatePropty.videoPlayTime="00:00";atachEntryTemplatePropty.videoViewCnt="0";}__util.log("worker.render.atach.entry.edit() atachEntryHtml=["+(_widget.renderWithTemplate("d_cmtpgn_atach_video_edit_template",atachEntryTemplatePropty))+"]");return _widget.renderWithTemplate("d_cmtpgn_atach_video_edit_template",atachEntryTemplatePropty);case __global.C_ATACH_TYPE_LINK_VIDEO:atachEntryTemplatePropty={};atachEntryTemplatePropty.atachSeq=atachInfo.atachSeq;atachEntryTemplatePropty.atachType=atachInfo.atachType;atachEntryTemplatePropty.atachValue=atachInfo.atachValue;if(__util.isDefined(atachInfo.atachPropty)===true){atachEntryTemplatePropty.atachTitle=atachInfo.atachPropty.videoTitle;atachEntryTemplatePropty.atachWidth=atachInfo.atachPropty.videoWidth;atachEntryTemplatePropty.atachHeight=atachInfo.atachPropty.videoHeight;atachEntryTemplatePropty.videoSiteName=__global.C_SITE_NAME_MAP[(__global.C_SITE_URL_TITLE_MAP[(__util.parseUrl(atachInfo.atachPropty.videoUrl).host)]).toLowerCase()];atachEntryTemplatePropty.videoTitle=atachInfo.atachPropty.videoTitle;atachEntryTemplatePropty.videoSource=__global.C_SITE_URL_TITLE_MAP[(__util.parseUrl(atachInfo.atachPropty.videoUrl).host)];atachEntryTemplatePropty.videoThumbUrl=atachInfo.atachPropty.thumbUrl;}__util.log("worker.render.atach.entry.edit() atachEntryHtml=["+(_widget.renderWithTemplate("d_cmtpgn_atach_link_video_edit_template",atachEntryTemplatePropty))+"]");return _widget.renderWithTemplate("d_cmtpgn_atach_link_video_edit_template",atachEntryTemplatePropty);case __global.C_ATACH_TYPE_LINK_GENRL:atachEntryTemplatePropty={};atachEntryTemplatePropty.atachSeq=atachInfo.atachSeq;atachEntryTemplatePropty.atachType=atachInfo.atachType;atachEntryTemplatePropty.atachValue=atachInfo.atachValue;if(__util.isDefined(atachInfo.atachPropty)===true){atachEntryTemplatePropty.linkUrl=atachInfo.atachPropty.linkUrl;}__util.log("worker.render.atach.entry.edit() atachEntryHtml=["+(_widget.renderWithTemplate("d_cmtpgn_atach_link_genrl_edit_template",atachEntryTemplatePropty))+"]");return _widget.renderWithTemplate("d_cmtpgn_atach_link_genrl_edit_template",atachEntryTemplatePropty);}}__util.log("@worker.render.atach.entry.edit() executed done.");return"";};worker.render.atach.entry.dsply=function(atachInfo){__util.log("@worker.render.atach.entry.dsply() executed. atachInfo is",atachInfo);if(__util.isEmpty(atachInfo)!==true){__util.log("worker.render.atach.entry.dsply() atachSeq=["+atachInfo.atachSeq+"], atachType=["+atachInfo.atachType+"]");var atachEntryTemplatePropty,multipleArtistListHtml="",firstChildClassString="";if(G_PAGE_TYPE==__global.C_PAGE_TYPE_PHOTO){if(atachInfo.atachType==__global.C_ATACH_TYPE_TEXT){atachEntryTemplatePropty={};atachEntryTemplatePropty.atachSeq=atachInfo.atachSeq;atachEntryTemplatePropty.atachType=atachInfo.atachType;atachEntryTemplatePropty.atachValue=__util.getCmtTextDsplyFormat(atachInfo.atachValue);if(__util.isDefined(atachInfo.atachPropty)===true){atachEntryTemplatePropty.textCont=__util.replaceAll(__util.getCmtTextDsplyFormat(atachInfo.atachPropty.textCont),/\r*\n/,"<br />");if(G_PAGE_INFO.srchType===__global.C_CMT_SRCH_TYPE_CONTS&&G_PAGE_INFO.srchWord.length>0){atachEntryTemplatePropty.textCont=__util.getHighlightDsplyFormat(atachEntryTemplatePropty.textCont,G_PAGE_INFO.srchWord,"span");}}return _widget.renderWithTemplate("d_cmtpgn_atach_text_dsply_template",atachEntryTemplatePropty);}}else{switch(atachInfo.atachType){case __global.C_ATACH_TYPE_TEXT:atachEntryTemplatePropty={};atachEntryTemplatePropty.atachSeq=atachInfo.atachSeq;atachEntryTemplatePropty.atachType=atachInfo.atachType;atachEntryTemplatePropty.atachValue=__util.getCmtTextDsplyFormat(atachInfo.atachValue);if(__util.isDefined(atachInfo.atachPropty)===true){atachEntryTemplatePropty.textCont=__util.replaceAll(__util.getCmtTextDsplyFormat(atachInfo.atachPropty.textCont),/\r*\n/,"<br />");if(G_PAGE_INFO.srchType===__global.C_CMT_SRCH_TYPE_CONTS&&G_PAGE_INFO.srchWord.length>0){atachEntryTemplatePropty.textCont=__util.getHighlightDsplyFormat(atachEntryTemplatePropty.textCont,G_PAGE_INFO.srchWord,"span");}}return _widget.renderWithTemplate("d_cmtpgn_atach_text_dsply_template",atachEntryTemplatePropty);case __global.C_ATACH_TYPE_MUSIC_SONG:atachEntryTemplatePropty={};atachEntryTemplatePropty.atachSeq=atachInfo.atachSeq;atachEntryTemplatePropty.atachType=atachInfo.atachType;atachEntryTemplatePropty.atachValue=atachInfo.atachValue;atachEntryTemplatePropty.multipleArtistDsplyMaxWidthValue=__util.getAtachMultipleArtistDsplyMaxWidth(G_TEMPLATE_TYPE,G_TEXTAREA_TYPE,atachInfo.atachType);if(__util.isDefined(atachInfo.atachPropty)===true){atachEntryTemplatePropty.artistListHtml="";atachEntryTemplatePropty.multipleArtistLayerHtml="";if(__util.isDefined(atachInfo.atachPropty.artistList)===true){$.each(atachInfo.atachPropty.artistList,function(index){if(Number(atachInfo.atachPropty.artistList[index].artistId)===__config.C_ALBUM_VA_REP_ARTIST_ID){atachEntryTemplatePropty.artistListHtml+=_widget.renderWithTemplate("d_cmtpgn_atach_artist_dim_entry_template",{artistName:atachInfo.atachPropty.artistList[index].artistName});}else{atachEntryTemplatePropty.artistListHtml+=_widget.renderWithTemplate("d_cmtpgn_atach_artist_dsply_entry_template",{artistPageUrl:__config.C_MELON_LANDING_BASE_URL_MAP[__global.C_MELON_LANDING_TYPE_ARTIST_PAGE]+atachInfo.atachPropty.artistList[index].artistId,artistName:atachInfo.atachPropty.artistList[index].artistName});}atachEntryTemplatePropty.artistListHtml+=", ";if(atachInfo.atachPropty.artistList.length>1){firstChildClassString="";if(index===0){firstChildClassString=' class="first_child"';}multipleArtistListHtml+=_widget.renderWithTemplate("d_cmtpgn_atach_multiple_artist_dsply_entry_template",{firstChildClassString:firstChildClassString,artistPageUrl:__config.C_MELON_LANDING_BASE_URL_MAP[__global.C_MELON_LANDING_TYPE_ARTIST_PAGE]+atachInfo.atachPropty.artistList[index].artistId,artistName:atachInfo.atachPropty.artistList[index].artistName});}});}if(__util.isEmpty(atachEntryTemplatePropty.artistListHtml)!==true){atachEntryTemplatePropty.artistListHtml=atachEntryTemplatePropty.artistListHtml.substring(0,atachEntryTemplatePropty.artistListHtml.lastIndexOf(", "));if(__util.isEmpty(multipleArtistListHtml)!==true){atachEntryTemplatePropty.multipleArtistLayerHtml=_widget.renderWithTemplate("d_cmtpgn_atach_multiple_artist_dsply_layer_template",{artistListHtml:multipleArtistListHtml});}}atachEntryTemplatePropty.albumId=atachInfo.atachPropty.albumId;atachEntryTemplatePropty.albumName=atachInfo.atachPropty.albumName;atachEntryTemplatePropty.albumThumbUrl=atachInfo.atachPropty.albumImagePath||__global.C_ALBUM_DFLT_DSPLY_IMG;atachEntryTemplatePropty.albumPageUrl=__config.C_MELON_LANDING_BASE_URL_MAP[__global.C_MELON_LANDING_TYPE_ALBUM_PAGE]+atachInfo.atachPropty.albumId;atachEntryTemplatePropty.songId=atachInfo.atachPropty.songId;atachEntryTemplatePropty.songName=atachInfo.atachPropty.songName;atachEntryTemplatePropty.songAdultFlag=(atachInfo.atachPropty.adultFlag===true?"1":"0");atachEntryTemplatePropty.songAvailFlag=atachInfo.atachPropty.svcAvailFlag;atachEntryTemplatePropty.stAvailFlag=atachInfo.atachPropty.stAvailFlag;atachEntryTemplatePropty.dlAvailFlag=atachInfo.atachPropty.dlAvailFlag;atachEntryTemplatePropty.albumOnlyFlag=atachInfo.atachPropty.albumOnlyFlag;atachEntryTemplatePropty.songHoldBackFlag=atachInfo.atachPropty.holdBackFlag;atachEntryTemplatePropty.songFreezoneFlag=atachInfo.atachPropty.freezoneFlag;atachEntryTemplatePropty.songHotSongFlag=atachInfo.atachPropty.hotSongFlag;__util.log("worker.render.atach.entry.dsply() C_ATACH_TYPE_MUSIC_SONG atachInfo.atachPropty.adultFlag=["+(atachInfo.atachPropty.adultFlag)+"]");atachEntryTemplatePropty.songAgeAdultHtml="";if(atachInfo.atachPropty.adultFlag===true){atachEntryTemplatePropty.songAgeAdultHtml=_widget.renderWithTemplate("d_cmtpgn_atach_song_age_adult_template");}atachEntryTemplatePropty.songHoldBackHtml="";if(atachInfo.atachPropty.holdBackFlag===true){atachEntryTemplatePropty.songHoldBackHtml=_widget.renderWithTemplate("d_cmtpgn_atach_song_hold_back_template");}atachEntryTemplatePropty.songFreezoneHtml="";if(atachInfo.atachPropty.freezoneFlag===true){atachEntryTemplatePropty.songFreezoneHtml=_widget.renderWithTemplate("d_cmtpgn_atach_song_free_zone_template");}atachEntryTemplatePropty.songPageUrl=__config.C_MELON_LANDING_BASE_URL_MAP[__global.C_MELON_LANDING_TYPE_SONG_PAGE]+atachInfo.atachPropty.songId;if(__util.isEmpty(atachInfo.atachPropty.albumOnlyFlag)!==true&&atachInfo.atachPropty.albumOnlyFlag==="1"){atachEntryTemplatePropty.dtlClassValue=" d_cmtpgn_atach_content_melon_album";}}else{atachEntryTemplatePropty.albumThumbUrl=__global.C_ALBUM_DFLT_DSPLY_IMG;}if(__util.isDefined(atachInfo.atachPropty)===true&&__util.isEmpty(atachInfo.atachPropty.svcAvailFlag)!==true&&Number(atachInfo.atachPropty.svcAvailFlag)<=1){if(__util.isEmpty(atachInfo.atachPropty.stAvailFlag)!==true&&atachInfo.atachPropty.stAvailFlag===true&&__util.isEmpty(atachInfo.atachPropty.dlAvailFlag)!==true&&atachInfo.atachPropty.dlAvailFlag===true){return _widget.renderWithTemplate("d_cmtpgn_atach_song_dsply_template",atachEntryTemplatePropty);}else{if(__util.isEmpty(atachInfo.atachPropty.albumOnlyFlag)!==true&&atachInfo.atachPropty.albumOnlyFlag==="1"){if(__util.isEmpty(atachInfo.atachPropty.stAvailFlag)!==true&&atachInfo.atachPropty.stAvailFlag===true){return _widget.renderWithTemplate("d_cmtpgn_atach_song_dsply_template",atachEntryTemplatePropty);}else{if(__util.isEmpty(atachInfo.atachPropty.dlAvailFlag)!==true&&atachInfo.atachPropty.dlAvailFlag===true){return _widget.renderWithTemplate("d_cmtpgn_atach_song_dl_only_template",atachEntryTemplatePropty);}else{return _widget.renderWithTemplate("d_cmtpgn_atach_song_dl_only_template",atachEntryTemplatePropty);}}}else{if(__util.isEmpty(atachInfo.atachPropty.stAvailFlag)!==true&&atachInfo.atachPropty.stAvailFlag===true){return _widget.renderWithTemplate("d_cmtpgn_atach_song_st_only_template",atachEntryTemplatePropty);}else{if(__util.isEmpty(atachInfo.atachPropty.dlAvailFlag)!==true&&atachInfo.atachPropty.dlAvailFlag===true){return _widget.renderWithTemplate("d_cmtpgn_atach_song_dl_only_template",atachEntryTemplatePropty);}else{return _widget.renderWithTemplate("d_cmtpgn_atach_song_dim_template",atachEntryTemplatePropty);}}}}}else{return _widget.renderWithTemplate("d_cmtpgn_atach_song_dim_template",atachEntryTemplatePropty);}case __global.C_ATACH_TYPE_MUSIC_ALBUM:atachEntryTemplatePropty={};atachEntryTemplatePropty.atachSeq=atachInfo.atachSeq;atachEntryTemplatePropty.atachType=atachInfo.atachType;atachEntryTemplatePropty.atachValue=atachInfo.atachValue;atachEntryTemplatePropty.multipleArtistDsplyMaxWidthValue=__util.getAtachMultipleArtistDsplyMaxWidth(G_TEMPLATE_TYPE,G_TEXTAREA_TYPE,atachInfo.atachType);if(__util.isDefined(atachInfo.atachPropty)===true){atachEntryTemplatePropty.artistListHtml="";atachEntryTemplatePropty.multipleArtistLayerHtml="";if(__util.isDefined(atachInfo.atachPropty.artistList)===true){$.each(atachInfo.atachPropty.artistList,function(index){if(Number(atachInfo.atachPropty.artistList[index].artistId)===__config.C_ALBUM_VA_REP_ARTIST_ID){atachEntryTemplatePropty.artistListHtml+=_widget.renderWithTemplate("d_cmtpgn_atach_artist_dim_entry_template",{artistName:atachInfo.atachPropty.artistList[index].artistName});}else{atachEntryTemplatePropty.artistListHtml+=_widget.renderWithTemplate("d_cmtpgn_atach_artist_dsply_entry_template",{artistPageUrl:__config.C_MELON_LANDING_BASE_URL_MAP[__global.C_MELON_LANDING_TYPE_ARTIST_PAGE]+atachInfo.atachPropty.artistList[index].artistId,artistName:atachInfo.atachPropty.artistList[index].artistName});}atachEntryTemplatePropty.artistListHtml+=", ";if(atachInfo.atachPropty.artistList.length>1){firstChildClassString="";if(index===0){firstChildClassString=' class="first_child"';}multipleArtistListHtml+=_widget.renderWithTemplate("d_cmtpgn_atach_multiple_artist_dsply_entry_template",{firstChildClassString:firstChildClassString,artistPageUrl:__config.C_MELON_LANDING_BASE_URL_MAP[__global.C_MELON_LANDING_TYPE_ARTIST_PAGE]+atachInfo.atachPropty.artistList[index].artistId,artistName:atachInfo.atachPropty.artistList[index].artistName});}});}if(__util.isEmpty(atachEntryTemplatePropty.artistListHtml)!==true){atachEntryTemplatePropty.artistListHtml=atachEntryTemplatePropty.artistListHtml.substring(0,atachEntryTemplatePropty.artistListHtml.lastIndexOf(", "));if(__util.isEmpty(multipleArtistListHtml)!==true){atachEntryTemplatePropty.multipleArtistLayerHtml=_widget.renderWithTemplate("d_cmtpgn_atach_multiple_artist_dsply_layer_template",{artistListHtml:multipleArtistListHtml});}}atachEntryTemplatePropty.albumId=atachInfo.atachPropty.albumId;atachEntryTemplatePropty.albumName=atachInfo.atachPropty.albumName;atachEntryTemplatePropty.albumThumbUrl=atachInfo.atachPropty.albumImagePath||__global.C_ALBUM_DFLT_DSPLY_IMG;atachEntryTemplatePropty.albumIssueDate=atachInfo.atachPropty.dsplyIssueDate;atachEntryTemplatePropty.albumAvailFlag=atachInfo.atachPropty.svcAvailFlag;atachEntryTemplatePropty.albumOnlyFlag=atachInfo.atachPropty.albumOnlyFlag;atachEntryTemplatePropty.albumDiscountFlag=atachInfo.atachPropty.albumDiscountFlag;atachEntryTemplatePropty.totalSongCnt=atachInfo.atachPropty.totalSongCnt;atachEntryTemplatePropty.albumPageUrl=__config.C_MELON_LANDING_BASE_URL_MAP[__global.C_MELON_LANDING_TYPE_ALBUM_PAGE]+atachInfo.atachPropty.albumId;if((__util.isEmpty(atachInfo.atachPropty.albumOnlyFlag)!==true&&atachInfo.atachPropty.albumOnlyFlag==="1")||(__util.isEmpty(atachInfo.atachPropty.albumDiscountFlag)!==true&&atachInfo.atachPropty.albumDiscountFlag==="1")||(__util.isEmpty(atachInfo.atachPropty.totalSongCnt)!==true&&Number(atachInfo.atachPropty.totalSongCnt)>__config.C_POC_CONTS_DOWNLOAD_AVAIL_COUNT)){atachEntryTemplatePropty.dtlClassValue=" d_cmtpgn_atach_content_melon_album";}}else{atachEntryTemplatePropty.albumThumbUrl=__global.C_ALBUM_DFLT_DSPLY_IMG;}if(__util.isDefined(atachInfo.atachPropty)===true&&__util.isEmpty(atachInfo.atachPropty.svcAvailFlag)!==true&&Number(atachInfo.atachPropty.svcAvailFlag)<=1){return _widget.renderWithTemplate("d_cmtpgn_atach_album_dsply_template",atachEntryTemplatePropty);}else{return _widget.renderWithTemplate("d_cmtpgn_atach_album_dim_template",atachEntryTemplatePropty);}case __global.C_ATACH_TYPE_MUSIC_ARTIST:atachEntryTemplatePropty={};atachEntryTemplatePropty.atachSeq=atachInfo.atachSeq;atachEntryTemplatePropty.atachType=atachInfo.atachType;atachEntryTemplatePropty.atachValue=atachInfo.atachValue;if(__util.isDefined(atachInfo.atachPropty)===true){atachEntryTemplatePropty.artistId=atachInfo.atachPropty.artistId;atachEntryTemplatePropty.artistName=atachInfo.atachPropty.artistName;atachEntryTemplatePropty.artistThumbUrl=atachInfo.atachPropty.artistImagePath||__global.C_ARTIST_DFLT_DSPLY_IMG;atachEntryTemplatePropty.artistNationalityName=atachInfo.atachPropty.nationalityName;atachEntryTemplatePropty.artistSexTypeName=atachInfo.atachPropty.sex;atachEntryTemplatePropty.artistActTypeName=atachInfo.atachPropty.actTypeName;var tempAddInfo=[atachEntryTemplatePropty.artistNationalityName,atachEntryTemplatePropty.artistSexTypeName,atachEntryTemplatePropty.artistActTypeName];var addInfo=[];for(var i=0;i<tempAddInfo.length;i++){if(""!=tempAddInfo[i]&&typeof tempAddInfo[i]!="undefined"){addInfo.push('<span class="none"></span><span>'+tempAddInfo[i]+"</span>");}}atachEntryTemplatePropty.aritstAddInfoHtml=addInfo.join('<span class="bar">|</span>');if(addInfo.length>0&&""!=atachInfo.atachPropty.gnr&&typeof atachInfo.atachPropty.gnr!="undefined"){atachEntryTemplatePropty.aritstAddInfoHtml+='<span class="bar">|</span>';}atachEntryTemplatePropty.artistGnrTypeName=atachInfo.atachPropty.gnr;if(""==atachInfo.atachPropty.gnr){atachEntryTemplatePropty.artistGnrDisplay="display:none";}atachEntryTemplatePropty.artistGnrTypeName=atachInfo.atachPropty.gnr;atachEntryTemplatePropty.artistFanCnt=atachInfo.atachPropty.fanCnt;atachEntryTemplatePropty.artistPageUrl=__config.C_MELON_LANDING_BASE_URL_MAP[__global.C_MELON_LANDING_TYPE_ARTIST_PAGE]+atachInfo.atachPropty.artistId;}else{atachEntryTemplatePropty.artistThumbUrl=__global.C_ARTIST_DFLT_DSPLY_IMG;}return _widget.renderWithTemplate("d_cmtpgn_atach_artist_dsply_template",atachEntryTemplatePropty);case __global.C_ATACH_TYPE_IMAGE:atachEntryTemplatePropty={};atachEntryTemplatePropty.atachSeq=atachInfo.atachSeq;atachEntryTemplatePropty.atachType=atachInfo.atachType;atachEntryTemplatePropty.atachValue=atachInfo.atachValue;if(__util.isDefined(atachInfo.atachPropty)===true){atachEntryTemplatePropty.imageOriginalUrl=atachInfo.atachPropty.originalUrl||__global.C_PHOTO_DFLT_DSPLY_IMG;atachEntryTemplatePropty.imageThumbUrl=atachInfo.atachPropty.thumbUrl||__global.C_PHOTO_DFLT_DSPLY_IMG;__util.log("worker.render.atach.entry.dsply() originalUrl=["+atachEntryTemplatePropty.imageOriginalUrl+"], thumbUrl=["+atachEntryTemplatePropty.imageThumbUrl+"]");}else{atachEntryTemplatePropty.imageOriginalUrl=__global.C_PHOTO_DFLT_DSPLY_IMG;atachEntryTemplatePropty.imageThumbUrl=__global.C_PHOTO_DFLT_DSPLY_IMG;}worker.bind.atach.image(atachEntryTemplatePropty.imageOriginalUrl);return _widget.renderWithTemplate("d_cmtpgn_atach_image_dsply_template",atachEntryTemplatePropty);case __global.C_ATACH_TYPE_VIDEO:atachEntryTemplatePropty={};atachEntryTemplatePropty.atachSeq=atachInfo.atachSeq;atachEntryTemplatePropty.atachType=atachInfo.atachType;atachEntryTemplatePropty.atachValue=atachInfo.atachValue;atachEntryTemplatePropty.multipleArtistDsplyMaxWidthValue=__util.getAtachMultipleArtistDsplyMaxWidth(G_TEMPLATE_TYPE,G_TEXTAREA_TYPE,atachInfo.atachType);if(__util.isDefined(atachInfo.atachPropty)===true){atachEntryTemplatePropty.artistListHtml="";atachEntryTemplatePropty.multipleArtistLayerHtml="";if(__util.isDefined(atachInfo.atachPropty.artistList)===true){$.each(atachInfo.atachPropty.artistList,function(index){if(Number(atachInfo.atachPropty.artistList[index].artistId)===__config.C_ALBUM_VA_REP_ARTIST_ID){atachEntryTemplatePropty.artistListHtml+=_widget.renderWithTemplate("d_cmtpgn_atach_artist_dim_entry_template",{artistName:atachInfo.atachPropty.artistList[index].artistName});}else{atachEntryTemplatePropty.artistListHtml+=_widget.renderWithTemplate("d_cmtpgn_atach_artist_dsply_entry_template",{artistPageUrl:__config.C_MELON_LANDING_BASE_URL_MAP[__global.C_MELON_LANDING_TYPE_ARTIST_PAGE]+atachInfo.atachPropty.artistList[index].artistId,artistName:atachInfo.atachPropty.artistList[index].artistName});}atachEntryTemplatePropty.artistListHtml+=", ";if(atachInfo.atachPropty.artistList.length>1){firstChildClassString="";if(index===0){firstChildClassString=' class="first_child"';}multipleArtistListHtml+=_widget.renderWithTemplate("d_cmtpgn_atach_multiple_artist_dsply_entry_template",{firstChildClassString:firstChildClassString,artistPageUrl:__config.C_MELON_LANDING_BASE_URL_MAP[__global.C_MELON_LANDING_TYPE_ARTIST_PAGE]+atachInfo.atachPropty.artistList[index].artistId,artistName:atachInfo.atachPropty.artistList[index].artistName});}});}if(__util.isEmpty(atachEntryTemplatePropty.artistListHtml)!==true){atachEntryTemplatePropty.artistListHtml=atachEntryTemplatePropty.artistListHtml.substring(0,atachEntryTemplatePropty.artistListHtml.lastIndexOf(", "));if(__util.isEmpty(multipleArtistListHtml)!==true){atachEntryTemplatePropty.multipleArtistLayerHtml=_widget.renderWithTemplate("d_cmtpgn_atach_multiple_artist_dsply_layer_template",{artistListHtml:multipleArtistListHtml});}}atachEntryTemplatePropty.videoId=atachInfo.atachPropty.videoId;atachEntryTemplatePropty.videoTitle=atachInfo.atachPropty.videoTitle;atachEntryTemplatePropty.videoThumbUrl=atachInfo.atachPropty.videoImagePath||__global.C_VIDEO_DFLT_DSPLY_IMG;atachEntryTemplatePropty.videoAdultFlag=atachInfo.atachPropty.videoAdultFlag;atachEntryTemplatePropty.videoAgeLevel=atachInfo.atachPropty.videoAgeLevel;atachEntryTemplatePropty.videoAgeLevelHtml="";switch(atachInfo.atachPropty.videoAgeLevel){case 1:atachEntryTemplatePropty.videoAgeLevelHtml=_widget.renderWithTemplate("d_cmtpgn_atach_video_age_level_1_template");break;case 2:atachEntryTemplatePropty.videoAgeLevelHtml=_widget.renderWithTemplate("d_cmtpgn_atach_video_age_level_2_template");break;case 3:atachEntryTemplatePropty.videoAgeLevelHtml=_widget.renderWithTemplate("d_cmtpgn_atach_video_age_level_3_template");break;case 4:atachEntryTemplatePropty.videoAgeLevelHtml=_widget.renderWithTemplate("d_cmtpgn_atach_video_age_level_4_template");break;default:atachEntryTemplatePropty.videoAgeLevelHtml=_widget.renderWithTemplate("d_cmtpgn_atach_video_age_level_0_template");break;}atachEntryTemplatePropty.videoPlayTime=atachInfo.atachPropty.dsplyPlayTime;atachEntryTemplatePropty.videoViewCnt=__util.getNumericDsplyFormat(atachInfo.atachPropty.videoViewCnt);atachEntryTemplatePropty.videoIssueDate=atachInfo.atachPropty.dsplyVideoIssueDate;atachEntryTemplatePropty.songId=atachInfo.atachPropty.songId;atachEntryTemplatePropty.videoPageUrl=__config.C_MELON_LANDING_BASE_URL_MAP[__global.C_MELON_LANDING_TYPE_VIDEO_PAGE]+atachInfo.atachPropty.videoId;atachEntryTemplatePropty.songPageUrl=__config.C_MELON_LANDING_BASE_URL_MAP[__global.C_MELON_LANDING_TYPE_SONG_PAGE]+atachInfo.atachPropty.songId;}else{atachEntryTemplatePropty.videoThumbUrl=__global.C_VIDEO_DFLT_DSPLY_IMG;atachEntryTemplatePropty.videoPlayTime="00:00";atachEntryTemplatePropty.videoViewCnt="0";}if(__util.isDefined(atachInfo.atachPropty)===true&&__util.isEmpty(atachInfo.atachPropty.svcAvailFlag)!==true&&Number(atachInfo.atachPropty.svcAvailFlag)<=1){if(atachInfo.atachPropty.mvFlag===true&&__util.isEmpty(atachInfo.atachPropty.songId)!==true&&atachInfo.atachPropty.songId!==-1){return _widget.renderWithTemplate("d_cmtpgn_atach_video_song_dsply_template",atachEntryTemplatePropty);}else{return _widget.renderWithTemplate("d_cmtpgn_atach_video_dsply_template",atachEntryTemplatePropty);}}else{return _widget.renderWithTemplate("d_cmtpgn_atach_video_dim_template",atachEntryTemplatePropty);}case __global.C_ATACH_TYPE_LINK_VIDEO:atachEntryTemplatePropty={};atachEntryTemplatePropty.atachSeq=atachInfo.atachSeq;atachEntryTemplatePropty.atachType=atachInfo.atachType;atachEntryTemplatePropty.atachValue=atachInfo.atachValue;if(__util.isDefined(atachInfo.atachPropty)===true){atachEntryTemplatePropty.videoViewUrlString=__config.C_YOUTUBE_HTML_URL+"?videoWidth="+window.escape(atachInfo.atachPropty.videoWidth||"480")+"&videoHeight="+window.escape(atachInfo.atachPropty.videoHeight||"320")+"&videoTitle="+window.escape(atachInfo.atachPropty.videoTitle||"")+"&videoUrl="+window.escape(atachInfo.atachPropty.videoUrl);atachEntryTemplatePropty.videoLinkUrl=atachInfo.atachPropty.videoUrl;atachEntryTemplatePropty.videoSiteName=__global.C_SITE_NAME_MAP[(__global.C_SITE_URL_TITLE_MAP[(__util.parseUrl(atachInfo.atachPropty.videoUrl).host)]).toLowerCase()];atachEntryTemplatePropty.videoTitle=atachInfo.atachPropty.videoTitle;atachEntryTemplatePropty.videoSource=__global.C_SITE_URL_TITLE_MAP[(__util.parseUrl(atachInfo.atachPropty.videoUrl).host)];atachEntryTemplatePropty.videoThumbUrl=atachInfo.atachPropty.thumbUrl;}return _widget.renderWithTemplate("d_cmtpgn_atach_link_video_dsply_template",atachEntryTemplatePropty);case __global.C_ATACH_TYPE_LINK_GENRL:atachEntryTemplatePropty={};atachEntryTemplatePropty.atachSeq=atachInfo.atachSeq;atachEntryTemplatePropty.atachType=atachInfo.atachType;atachEntryTemplatePropty.atachValue=atachInfo.atachValue;if(__util.isDefined(atachInfo.atachPropty)===true){atachEntryTemplatePropty.linkUrl=atachInfo.atachPropty.linkUrl;}return _widget.renderWithTemplate("d_cmtpgn_atach_link_genrl_dsply_template",atachEntryTemplatePropty);}}}__util.log("@worker.render.atach.entry.dsply() executed done.");return"";};worker.bind={};worker.bind.all=function(){__util.log("@worker.bind.all executed.");worker.bind.page();worker.bind.cmt.view();worker.bind.cmt.write();worker.bind.cmt.modify();worker.bind.cmt.del();worker.bind.cmt.atach();worker.bind.adcmt.view();worker.bind.adcmt.write();worker.bind.adcmt.del();worker.bind.cmt.profile();worker.bind.atach();worker.bind.recm();worker.bind.reprt();__util.log("@worker.bind.all executed. done");};worker.bind.list=function(){__util.log("@worker.bind.list executed.");worker.bind.page();worker.bind.cmt.view();worker.bind.cmt.modify();worker.bind.cmt.del();worker.bind.adcmt.view();worker.bind.adcmt.write();worker.bind.adcmt.del();worker.bind.cmt.profile();worker.bind.atach();worker.bind.recm();worker.bind.reprt();__util.log("@worker.bind.list executed. done");};worker.bind.page=function(){$G_CONTAINER.find("select").selectbox();if(G_CHNL_SEQ==105){$G_CONTAINER.find("#d_cmtpgn_paginate_wrapper").off(C_EVENT_TYPE_PHOTO_NAVI).on(C_EVENT_TYPE_PHOTO_NAVI,"a.d_cmtpgn_navigator_on_photo",function(e){__util.log("worker.bind.page() C_EVENT_TYPE_PHOTO_NAVI executed.");e.preventDefault();var $this=$(this);_navigateHandler($this.text(),G_PAGE_INFO.sortType,G_PAGE_INFO.srchType,G_PAGE_INFO.srchWord);});$G_CONTAINER.find("#d_cmtpgn_paginate_wrapper").off(C_EVENT_TYPE_PHOTO_NAVI_FIRST).on(C_EVENT_TYPE_PHOTO_NAVI_FIRST,"a.d_cmtpgn_navigator_on_photo_first",function(e){__util.log("worker.bind.page() C_EVENT_TYPE_PHOTO_NAVI_FIRST executed.");e.preventDefault();_navigateHandler(G_PAGING_INFO.firstPageNo,G_PAGE_INFO.sortType,G_PAGE_INFO.srchType,G_PAGE_INFO.srchWord);});$G_CONTAINER.find("#d_cmtpgn_paginate_wrapper").off(C_EVENT_TYPE_PHOTO_NAVI_BEFORE).on(C_EVENT_TYPE_PHOTO_NAVI_BEFORE,"a.d_cmtpgn_navigator_on_photo_before",function(e){__util.log("worker.bind.page() C_EVENT_TYPE_PHOTO_NAVI_BEFORE executed.");e.preventDefault();_navigateHandler(G_PAGING_INFO.prevGroupPageNo,G_PAGE_INFO.sortType,G_PAGE_INFO.srchType,G_PAGE_INFO.srchWord);});$G_CONTAINER.find("#d_cmtpgn_paginate_wrapper").off(C_EVENT_TYPE_PHOTO_NAVI_NEXT).on(C_EVENT_TYPE_PHOTO_NAVI_NEXT,"a.d_cmtpgn_navigator_on_photo_next",function(e){__util.log("worker.bind.page() C_EVENT_TYPE_PHOTO_NAVI_NEXT executed.");e.preventDefault();_navigateHandler(G_PAGING_INFO.nextGroupPageNo,G_PAGE_INFO.sortType,G_PAGE_INFO.srchType,G_PAGE_INFO.srchWord);});$G_CONTAINER.find("#d_cmtpgn_paginate_wrapper").off(C_EVENT_TYPE_PHOTO_NAVI_END).on(C_EVENT_TYPE_PHOTO_NAVI_END,"a.d_cmtpgn_navigator_on_photo_end",function(e){__util.log("worker.bind.page() C_EVENT_TYPE_PHOTO_NAVI_END executed.");e.preventDefault();_navigateHandler(G_PAGING_INFO.lastPageNo,G_PAGE_INFO.sortType,G_PAGE_INFO.srchType,G_PAGE_INFO.srchWord);});$G_CONTAINER.find("#d_cmtpgn_cmt_count_wrapper").off(C_EVENT_TYPE_PHOTO_NAVI_RECENT).on(C_EVENT_TYPE_PHOTO_NAVI_RECENT,"a.sort_option_on_photo_recent",function(e){__util.log("worker.bind.page() C_EVENT_TYPE_PHOTO_NAVI_RECENT executed.");e.preventDefault();_navigateHandler(__global.C_CMT_DFLT_PAGE_NO,__global.C_CMT_SORT_TYPE_RECENT,G_PAGE_INFO.srchType,G_PAGE_INFO.srchWord);});$G_CONTAINER.find("#d_cmtpgn_cmt_count_wrapper").off(C_EVENT_TYPE_PHOTO_NAVI_RECM).on(C_EVENT_TYPE_PHOTO_NAVI_RECM,"a.sort_option_on_photo_recm",function(e){__util.log("worker.bind.page() C_EVENT_TYPE_PHOTO_NAVI_RECM executed.");e.preventDefault();_navigateHandler(__global.C_CMT_DFLT_PAGE_NO,__global.C_CMT_SORT_TYPE_RECM,G_PAGE_INFO.srchType,G_PAGE_INFO.srchWord);});$G_CONTAINER.find("#d_cmtpgn_cmt_count_wrapper").off(C_EVENT_TYPE_PHOTO_NAVI_ADCMT).on(C_EVENT_TYPE_PHOTO_NAVI_ADCMT,"a.sort_option_on_photo_adcmt",function(e){__util.log("worker.bind.page() C_EVENT_TYPE_PHOTO_NAVI_ADCMT executed.");e.preventDefault();_navigateHandler(__global.C_CMT_DFLT_PAGE_NO,__global.C_CMT_SORT_TYPE_ADCMT,G_PAGE_INFO.srchType,G_PAGE_INFO.srchWord);});}if(G_PAGE_TYPE===__global.C_PAGE_TYPE_PHOTO){$G_CONTAINER.find("#d_cmtpgn_cmt_count_wrapper").off(C_EVENT_TYPE_PAGE_SORT).on(C_EVENT_TYPE_PAGE_SORT,"a",function(e){__util.log("worker.bind.page() C_EVENT_TYPE_PAGE_SORT executed. href=["+$(this).attr("href")+"]");e.preventDefault();var $this=$(this);var pageNo=__util.getValueFromCmtpgnUrl($this.attr("href"),"pageNo");var sortType=__util.getValueFromCmtpgnUrl($this.attr("href"),"sortType");var srchType=__util.getValueFromCmtpgnUrl($this.attr("href"),"srchType");var srchWord=__util.getValueFromCmtpgnUrl($this.attr("href"),"srchWord");__util.log("worker.bind.page() executed sort by pageNo=["+pageNo+"], sortType=["+sortType+"], srchType=["+srchType+"], srchWord=["+srchWord+"] will execute worker.page.refresh");worker.page.refresh(pageNo,sortType,srchType,srchWord);__util.log("worker.bind.page() C_EVENT_TYPE_PAGE_SORT executed done.");});$G_CONTAINER.find("#d_cmtpgn_cmt_more_wrapper").off(C_EVENT_TYPE_PAGE_MORE).on(C_EVENT_TYPE_PAGE_MORE,"button.d_cmtpgn_cmt_more",function(e){__util.log("worker.bind.page() C_EVENT_TYPE_PAGE_MORE executed. nextPageNo=["+G_PAGE_INFO.nextPageNo+"], lastPageNo=["+G_PAGE_INFO.lastPageNo+"]");if(G_PAGE_INFO.pageNo===G_PAGING_INFO.lastPageNo){alert(__msg.CMTPGN005);return;}else{worker.page.append(G_PAGING_INFO.nextPageNo,G_PAGE_INFO.sortType,G_PAGE_INFO.srchType,G_PAGE_INFO.srchWord);}__util.log("worker.bind.page() C_EVENT_TYPE_PAGE_MORE executed done.");});$G_CONTAINER.find("#d_cmtpgn_cmt_more_wrapper").off(C_EVENT_TYPE_PAGE_TOP).on(C_EVENT_TYPE_PAGE_TOP,"button.d_cmtpgn_cmt_top",function(e){$G_CONTAINER.find("#d_cmtpgn_photo_inner_wrapper").scrollTop(0);});}else{if(G_CHNL_INFO.srchUseFlag===true){$G_CONTAINER.find("#d_cmtpgn_srch_wrapper").off(C_EVENT_TYPE_PAGE_SRCH).on(C_EVENT_TYPE_PAGE_SRCH,"button.d_cmtpgn_cmt_srch_btn",function(e){__util.log("worker.bind.page() C_EVENT_TYPE_PAGE_SRCH executed.");e.preventDefault();var $srch=$G_CONTAINER.find("#d_cmtpgn_srch_wrapper");var pageNo=__global.C_CMT_DFLT_PAGE_NO;var sortType=__global.C_CMT_DFLT_SORT_TYPE;var srchType=$srch.find("select option:selected").attr("value");var srchWord=$srch.find("input.d_cmtpgn_srch_input").val();srchWord=(__util.isEmpty($.trim(srchWord),$G_CONTAINER.find("#d_cmtpgn_srch_wrapper").find("input.d_cmtpgn_srch_input"))===true?"":$.trim(srchWord));__util.log("worker.bind.page() C_EVENT_TYPE_PAGE_SRCH by pageNo=["+pageNo+"], sortType=["+sortType+"], srchType=["+srchType+"], srchWord=["+srchWord+"]");if(__util.isEmpty(srchWord)===true){alert(__msg.CMTPGN102);setTimeout(function(){$srch.find("input.d_cmtpgn_srch_input").focus();},0);return false;}if(srchWord.length<__global.C_CMT_MIN_SRCH_WORD){alert(__util.format(__msg.CMTPGN103,__global.C_CMT_MIN_SRCH_WORD));setTimeout(function(){$srch.find("input.d_cmtpgn_srch_input").focus();},0);return false;}if($.trim(srchWord).length>__global.C_CMT_MAX_SRCH_WORD){alert(__util.format(__msg.CMTPGN104,__global.C_CMT_MAX_SRCH_WORD));setTimeout(function(){$srch.find("input.d_cmtpgn_srch_input").focus();},0);return false;}if(pageNo!==G_PAGE_INFO.pageNo||Number(srchType)!==G_PAGE_INFO.srchType||srchWord!==G_PAGE_INFO.srchWord){if(G_CHNL_SEQ==105){_navigateHandler(pageNo,sortType,srchType,srchWord);}else{worker.controller.move(__util.makeCmtpgnUrlHashString(worker.controller.value(),false,pageNo,sortType,srchType,srchWord));}}else{_navigateHandler(pageNo,sortType,srchType,srchWord);}__util.log("worker.bind.page() C_EVENT_TYPE_PAGE_SRCH executed done.");});$G_CONTAINER.find("#d_cmtpgn_srch_wrapper").off(C_EVENT_TYPE_PAGE_SRCH_TYPE_CHANGE).on(C_EVENT_TYPE_PAGE_SRCH_TYPE_CHANGE,"select",function(e){__util.log("worker.bind.page() C_EVENT_TYPE_PAGE_SRCH_TYPE_CHANGE executed.");var $srch=$G_CONTAINER.find("#d_cmtpgn_srch_wrapper");setTimeout(function(){$srch.find("input.d_cmtpgn_srch_input").focus();},0);__util.log("worker.bind.page() C_EVENT_TYPE_PAGE_SRCH_TYPE_CHANGE executed done.");});$G_CONTAINER.find("#d_cmtpgn_srch_wrapper").off(C_EVENT_TYPE_PAGE_SRCH_EXECUTE).on(C_EVENT_TYPE_PAGE_SRCH_EXECUTE,"input.d_cmtpgn_srch_input",function(e){if(((e.which)?e.which:e.keyCode)===13){e.stopPropagation();e.preventDefault();$(this).closest("#d_cmtpgn_srch_wrapper").find("button.d_cmtpgn_cmt_srch_btn").trigger("click");}});$G_CONTAINER.find("#d_cmtpgn_srch_cancel_wrapper").off(C_EVENT_TYPE_PAGE_SRCH_CANCEL).on(C_EVENT_TYPE_PAGE_SRCH_CANCEL,"a",function(e){__util.log("worker.bind.page() C_EVENT_TYPE_PAGE_SRCH_CANCEL executed.");e.preventDefault();var pageNo=__global.C_CMT_DFLT_PAGE_NO;var sortType=__global.C_CMT_DFLT_SORT_TYPE;var srchType=__global.C_CMT_DFLT_SRCH_TYPE;var srchWord=__global.C_CMT_DFLT_SRCH_WORD;worker.controller.move(__util.makeCmtpgnUrlHashString(worker.controller.value(),false,pageNo,sortType,srchType,srchWord));__util.log("worker.bind.page() C_EVENT_TYPE_PAGE_SRCH_CANCEL executed done.");});}}};worker.bind.cmt={};worker.bind.cmt.view=function(){$G_CONTAINER.find("#d_cmtpgn_cmt_list_wrapper").off(C_EVENT_TYPE_CMT_EXPAND).on(C_EVENT_TYPE_CMT_EXPAND,"button.d_cmtpgn_cmt_expand_btn",function(e){__util.log("worker.bind.cmt.view() C_EVENT_TYPE_CMT_EXPAND executed.");$(this).parent().parent().hide();var $target=$(this).parent().parent().next();$target.show();__util.adjustCmtAtachText($target);__util.log("worker.bind.cmt.view() C_EVENT_TYPE_CMT_EXPAND executed done.");});$G_CONTAINER.find("#d_cmtpgn_cmt_list_wrapper").off(C_EVENT_TYPE_CMT_COLLAPSE).on(C_EVENT_TYPE_CMT_COLLAPSE,"button.d_cmtpgn_cmt_collapse_btn",function(e){__util.log("worker.bind.cmt.view() C_EVENT_TYPE_CMT_COLLAPSE executed.");$(this).parent().hide().prev().show();__util.log("worker.bind.cmt.view() C_EVENT_TYPE_CMT_COLLAPSE executed DONE.");});};worker.bind.cmt.profile=function(){var host=__util.parseUrl().host;$G_CONTAINER.find("#d_cmtpgn_cmt_list_wrapper").off(C_EVENT_TYPE_CMT_PROFILE).on(C_EVENT_TYPE_CMT_PROFILE,"a.d_cmtpgn_user",function(e){__util.log("worker.bind.cmt.profile() C_EVENT_TYPE_CMT_PROFILE executed.");var member=$(this).attr("data-member-key");var member_str=member.replace(/[0-9]/g,"");var member_key=member.replace(/[^-\.0-9]/g,"");var ownerChk=$(this).closest("li").attr("data-cmt-owner");if(member_str=="ancm_-"){return;}else{if(member_key<0){return;}else{if(member_str=="artist_"){window.open("//"+host+"/artist/timeline.htm?artistId="+member_key);}else{if(ownerChk=="on"){window.open("//"+host+"/mymusic/main/mymusicmain_list.htm?memberKey="+member_key);}else{window.open("//"+host+"/mymusic/main/mymusicmainother_list.htm?memberKey="+member_key);}}}}__util.log("worker.bind.cmt.profile() C_EVENT_TYPE_CMT_PROFILE executed done.");});$G_CONTAINER.find("#commentWriteBoxImage").off("click").on("click",function(){if(worker.constraint.login()!==true){return;}var member=$(this).attr("data-member-key");var member_str=member.replace(/[0-9]/g,"");var member_key=member.replace(/[^-\.0-9]/g,"");if(member_str=="ancm_-"){return;}else{if(member_key<0){return;}else{if(member_str=="artist_"){window.open("//"+host+"/artist/timeline.htm?artistId="+member_key);}else{window.open("//"+host+"/mymusic/main/mymusicmain_list.htm?memberKey="+member_key);}}}});};worker.bind.cmt.write=function(){if(G_CHNL_INFO.cmtWriteUseFlag===true){$G_CONTAINER.find("#d_cmtpgn_cmt_write_box").off(C_EVENT_TYPE_CMT_FOCUSIN).on(C_EVENT_TYPE_CMT_FOCUSIN,".d_cmtpgn_cmt_guide",function(e){__util.log("worker.bind.cmt.write() CMT_WRITE C_EVENT_TYPE_CMT_FOCUSIN executed.");if(G_CMT_REG_REQUEST_FLAG===true){alert(__msg.CMTPGN114);return;}if(worker.constraint.readonly.post()!==true){return;}if(worker.constraint.login()!==true){return;}if(worker.constraint.member()!==true){return;}var $cmtInputLayout=$G_CONTAINER.find("#d_cmtpgn_cmt_write_box");var $atachInputLayout=$cmtInputLayout.find(".d_cmtpgn_cmt_edit_area");if($atachInputLayout.find("textarea").length<1){worker.handler.atach.text(__global.C_EMPTY_KEY,__global.C_EMPTY_KEY);}$(this).hide();$atachInputLayout.show();setTimeout(function(){$G_CONTAINER.find("#d_cmtpgn_cmt_write_box").find("textarea:first").focus();},0);__util.log("worker.bind.cmt.write() CMT_WRITE C_EVENT_TYPE_CMT_FOCUSIN executed done.");});$G_CONTAINER.find("#d_cmtpgn_cmt_write_box").off(C_EVENT_TYPE_SYNCPOST).on(C_EVENT_TYPE_SYNCPOST,"button.d_cmtpgn_syncpost_btn",function(e){__util.log("worker.bind.cmt.write() C_EVENT_TYPE_SYNCPOST executed.");if(worker.constraint.login()!==true){$(this).blur();return;}if(worker.constraint.member()!==true){$(this).blur();return;}var $this=$(this);if($this.hasClass("facebook")===true){if(worker.constraint.syncpost.facebook()!==true){$(this).blur();return;}else{$this.toggleClass("on");$this.parent().find("button.twitter").removeClass("on");}}if($this.hasClass("twitter")===true){if(worker.constraint.syncpost.twitter()!==true){$(this).blur();return;}else{$this.toggleClass("on");$this.parent().find("button.facebook").removeClass("on");}}__util.log("worker.bind.cmt.write() C_EVENT_TYPE_SYNCPOST executed done.");});$G_CONTAINER.find("#d_cmtpgn_cmt_write_box").off(C_EVENT_TYPE_CMT_REG).on(C_EVENT_TYPE_CMT_REG,"button.d_cmtpgn_cmt_reg_btn",function(e){__util.log("worker.bind.cmt.write() C_EVENT_TYPE_CMT_REG executed.");if(G_CMT_REG_REQUEST_FLAG===true){alert(__msg.CMTPGN114);return;}if(worker.constraint.readonly.post()!==true){return;}if(worker.constraint.login()!==true){return;}if(worker.constraint.member()!==true){return;}if(worker.handler.cmt.post(__global.C_EMPTY_KEY)===true){G_CMT_REG_REQUEST_FLAG=true;}__util.log("worker.bind.cmt.write() C_EVENT_TYPE_CMT_REG executed done.");});}};worker.bind.cmt.modify=function(){if(G_CHNL_INFO.cmtModifyUseFlag===true){$G_CONTAINER.find("#d_cmtpgn_cmt_list_wrapper").off(C_EVENT_TYPE_CMT_MODIFY).on(C_EVENT_TYPE_CMT_MODIFY,"button.d_cmtpgn_cmt_modify_btn",function(e){__util.log("worker.bind.cmt.modify() C_EVENT_TYPE_CMT_MODIFY executed.");if(G_CMT_MODIFY_REQUEST_FLAG===true){alert(__msg.CMTPGN115);return;}if(G_CMT_UPDT_REQUEST_FLAG===true){alert(__msg.CMTPGN114);return;}var $this=$(this);__util.log("worker.bind.cmt.modify() C_EVENT_TYPE_CMT_MODIFY data-cmt-id=["+$this.closest("li").attr("data-cmt-id")+"]");__util.log("worker.bind.cmt.modify() C_EVENT_TYPE_CMT_MODIFY data-cmt-break=["+$this.closest("li").attr("data-cmt-break")+"]");__util.log("worker.bind.cmt.modify() C_EVENT_TYPE_CMT_MODIFY data-cmt-del=["+$this.closest("li").attr("data-cmt-del")+"]");__util.log("worker.bind.cmt.modify() C_EVENT_TYPE_CMT_MODIFY data-cmt-owner=["+$this.closest("li").attr("data-cmt-owner")+"]");if(worker.constraint.readonly.post()!==true){return;}if(worker.constraint.login()!==true){return;}if(worker.constraint.cmt.modify($this.closest("li").attr("data-cmt-break"),$this.closest("li").attr("data-cmt-del"),$this.closest("li").attr("data-cmt-owner"))!==true){return;}var data={},callback=worker.callback.cmt.modify;data.cmtPocType=G_CMT_POC_TYPE;data.pocId=G_POC_ID;data.chnlSeq=Number(G_CHNL_SEQ);data.contsRefValue=G_CONTS_REF_VALUE;data.cmtSeq=$this.closest("li").attr("data-cmt-id");data.adcmtListFlag=false;__api.cmt.inform(data,callback);__util.log("worker.bind.cmt.modify() C_EVENT_TYPE_CMT_MODIFY executed done.");});$G_CONTAINER.find("#d_cmtpgn_cmt_list_wrapper").off(C_EVENT_TYPE_CMT_UPDT).on(C_EVENT_TYPE_CMT_UPDT,"button.d_cmtpgn_cmt_updt_btn",function(e){__util.log("worker.bind.cmt.modify() C_EVENT_TYPE_CMT_UPDT executed.");if(G_CMT_UPDT_REQUEST_FLAG===true){alert(__msg.CMTPGN114);return;}var $this=$(this);__util.log("worker.bind.cmt.modify() C_EVENT_TYPE_CMT_UPDT data-cmt-id=["+$this.closest("li").attr("data-cmt-id")+"]");__util.log("worker.bind.cmt.modify() C_EVENT_TYPE_CMT_UPDT data-cmt-break=["+$this.closest("li").attr("data-cmt-break")+"]");__util.log("worker.bind.cmt.modify() C_EVENT_TYPE_CMT_UPDT data-cmt-del=["+$this.closest("li").attr("data-cmt-del")+"]");__util.log("worker.bind.cmt.modify() C_EVENT_TYPE_CMT_UPDT data-cmt-owner=["+$this.closest("li").attr("data-cmt-owner")+"]");if(worker.constraint.readonly.post()!==true){return;}if(worker.constraint.login()!==true){return;}if(worker.handler.cmt.post($this.closest("li").attr("data-cmt-id"))===true){G_CMT_UPDT_REQUEST_FLAG=true;}__util.log("worker.bind.cmt.modify() C_EVENT_TYPE_CMT_UPDT executed done.");});$G_CONTAINER.find("#d_cmtpgn_cmt_list_wrapper").off(C_EVENT_TYPE_CMT_CANCEL).on(C_EVENT_TYPE_CMT_CANCEL,"button.d_cmtpgn_cmt_cancel_btn",function(e){__util.log("worker.bind.cmt.modify() C_EVENT_TYPE_CMT_CANCEL executed.");if(G_CMT_UPDT_REQUEST_FLAG===true){alert(__msg.CMTPGN114);return;}var $this=$(this);__util.log("worker.bind.cmt.modify() C_EVENT_TYPE_CMT_CANCEL data-cmt-id=["+$this.closest("li").attr("data-cmt-id")+"]");__util.log("worker.bind.cmt.modify() C_EVENT_TYPE_CMT_CANCEL data-cmt-break=["+$this.closest("li").attr("data-cmt-break")+"]");__util.log("worker.bind.cmt.modify() C_EVENT_TYPE_CMT_CANCEL data-cmt-del=["+$this.closest("li").attr("data-cmt-del")+"]");__util.log("worker.bind.cmt.modify() C_EVENT_TYPE_CMT_CANCEL data-cmt-owner=["+$this.closest("li").attr("data-cmt-owner")+"]");if(worker.constraint.cmt.cancel()!==true){return;}worker.callback.cmt.cancel($this.closest("li").attr("data-cmt-id"));__util.log("worker.bind.cmt.modify() C_EVENT_TYPE_CMT_CANCEL executed done.");});}};worker.bind.cmt.del=function(){if(G_CHNL_INFO.cmtDelUseFlag===true){$G_CONTAINER.find("#d_cmtpgn_cmt_list_wrapper").off(C_EVENT_TYPE_CMT_DEL).on(C_EVENT_TYPE_CMT_DEL,"button.d_cmtpgn_cmt_del_btn",function(e){__util.log("worker.bind.cmt.de() C_EVENT_TYPE_CMT_DEL executed.");var $this=$(this);__util.log("worker.bind.cmt.de() C_EVENT_TYPE_CMT_DEL data-cmt-id=["+$this.closest("li").attr("data-cmt-id")+"]");__util.log("worker.bind.cmt.de() C_EVENT_TYPE_CMT_DEL data-cmt-break=["+$this.closest("li").attr("data-cmt-break")+"]");__util.log("worker.bind.cmt.de() C_EVENT_TYPE_CMT_DEL data-cmt-del=["+$this.closest("li").attr("data-cmt-del")+"]");__util.log("worker.bind.cmt.de() C_EVENT_TYPE_CMT_DEL data-cmt-owner=["+$this.closest("li").attr("data-cmt-owner")+"]");if(worker.constraint.login()!==true){return;}if(worker.constraint.cmt.del($this.closest("li").attr("data-cmt-break"),$this.closest("li").attr("data-cmt-del"),$this.closest("li").attr("data-cmt-owner"))!==true){return;}var data={},callback=worker.callback.cmt.del;data.cmtPocType=G_CMT_POC_TYPE;data.pocId=G_POC_ID;data.chnlSeq=Number(G_CHNL_SEQ);data.contsRefValue=G_CONTS_REF_VALUE;data.cmtSeq=Number($this.closest("li").attr("data-cmt-id"));__api.cmt.del(data,callback);__util.log("worker.bind.cmt.del() C_EVENT_TYPE_CMT_DEL executed done.");});}};worker.bind.cmt.atach=function(editingCmtSeq){__util.log("@worker.bind.cmt.atach executed. editingCmtSeq=["+editingCmtSeq+"]");if(G_CHNL_INFO.atachUseFlag===true){__util.log("worker.bind.cmt.atach binding atach all executed.");worker.bind.cmt.atach.music(editingCmtSeq);worker.bind.cmt.atach.video(editingCmtSeq);worker.bind.cmt.atach.image(editingCmtSeq);worker.bind.cmt.atach.link(editingCmtSeq);__util.log("worker.bind.cmt.atach binding atach all executed done.");}__util.log("@worker.bind.cmt.atach executed done.");};worker.bind.cmt.atach.music=function(editingCmtSeq){if(G_CHNL_INFO.musicAtachUseFlag===true){var $atachMusicLayer=(__util.isDefined(editingCmtSeq)!==true?$G_CONTAINER.find("#d_cmtpgn_cmt_write_box").find(".d_cmtpgn_atach_music_layer"):$G_CONTAINER.find("#d_cmtpgn_cmt_list_wrapper").find("ul>li").filter('[data-cmt-id="'+Number(editingCmtSeq)+'"]').find(".d_cmtpgn_cmt_edit_box").find(".d_cmtpgn_atach_music_layer"));$atachMusicLayer.off(C_EVENT_TYPE_ATACH_MUSIC).on(C_EVENT_TYPE_ATACH_MUSIC,"button.d_cmtpgn_atach_music_btn:not(.disabled)",function(e){__util.log("worker.bind.cmt.atach.music() C_EVENT_TYPE_ATACH_MUSIC executed.");var $this=$(this),cmtSeq=$this.closest(".d_cmtpgn_cmt_edit_box").attr("data-cmt-id");__util.log("worker.bind.cmt.atach.music() C_EVENT_TYPE_ATACH_MUSIC cmtSeq=["+cmtSeq+"]");if(Number(cmtSeq)===__global.C_EMPTY_KEY){if(worker.constraint.login()!==true){return;}if(worker.constraint.member()!==true){return;}}var musicType=$this.closest(".d_cmtpgn_atach_music_layer").find("input[name=d_cmtpgn_atach_music_srch_type]:checked").val();switch(musicType){case __global.C_ATACH_MELON_SRCH_TYPE_SONG:worker.handler.atach.music.song(cmtSeq,__global.C_EMPTY_KEY,$this.attr("data-artist-id"),$this.attr("data-artist-name"),$this.attr("data-album-id"),$this.attr("data-album-name"),$this.attr("data-album-image-path"),$this.attr("data-song-id"),$this.attr("data-song-name"),$this.attr("data-song-adult-flag"),$this.attr("data-song-avail-flag"),$this.attr("data-song-holdback-flag"),$this.attr("data-song-freezone-flag"),$this.attr("data-song-hotsong-flag"));break;case __global.C_ATACH_MELON_SRCH_TYPE_ALBUM:worker.handler.atach.music.album(cmtSeq,__global.C_EMPTY_KEY,$this.attr("data-artist-id"),$this.attr("data-artist-name"),$this.attr("data-album-id"),$this.attr("data-album-name"),$this.attr("data-album-image-path"),$this.attr("data-album-issue-date"),$this.attr("data-album-avail-flag"));break;case __global.C_ATACH_MELON_SRCH_TYPE_ARTIST:worker.handler.atach.music.artist(cmtSeq,__global.C_EMPTY_KEY,$this.attr("data-artist-id"),$this.attr("data-artist-name"),$this.attr("data-artist-image-path"),$this.attr("data-artist-nationality-name"),$this.attr("data-artist-sex-type-name"),$this.attr("data-artist-act-type-name"),$this.attr("data-artist-genre-type-name"),$this.attr("data-artist-fan-cnt"));break;}__util.log("worker.bind.cmt.atach.music() C_EVENT_TYPE_ATACH_MUSIC executed done.");}).off(C_EVENT_TYPE_ATACH_MUSIC_SRCH).on(C_EVENT_TYPE_ATACH_MUSIC_SRCH,"button.d_cmtpgn_atach_music_srch_btn",function(e){__util.log("worker.bind.cmt.atach.music() C_EVENT_TYPE_ATACH_MUSIC_SRCH executed.");g_suggest_layer_open=false;var $this=$(this),cmtSeq=$this.closest(".d_cmtpgn_cmt_edit_box").attr("data-cmt-id");var musicType=__global.C_ATACH_MELON_SRCH_TYPE_SONG;var sortType=__global.C_ATACH_MELON_SRCH_TYPE_SONG_INITIAL_SORT_TYPE;var srchWord=$this.closest(".d_cmtpgn_atach_music_layer").find("input.d_cmtpgn_atach_music_srch_input").val();srchWord=(__util.isEmpty($.trim(srchWord),$this.closest(".d_cmtpgn_atach_music_layer").find("input.d_cmtpgn_atach_music_srch_input"))===true?"":$.trim(srchWord));$this.closest(".d_cmtpgn_atach_music_layer").find(".d_cmtpgn_atach_suggest_keyword").hide();__util.log("worker.bind.cmt.atach.music() C_EVENT_TYPE_ATACH_MUSIC_SRCH cmtSeq=["+cmtSeq+"], musicType=["+musicType+"], sortType=["+sortType+"], srchWord=["+srchWord+"]");if(worker.constraint.atach.music.srch(cmtSeq,srchWord)!==true){setTimeout(function(){$this.closest(".d_cmtpgn_atach_music_layer").find("input.d_cmtpgn_atach_music_srch_input").focus();},0);return;}worker.handler.atach.music.srch(cmtSeq,__global.C_EMPTY_KEY,musicType,srchWord,sortType,__global.C_ATACH_MELON_DFLT_PAGE_NO);__util.log("worker.bind.cmt.atach.music() C_EVENT_TYPE_ATACH_MUSIC_SRCH executed done.");}).off(C_EVENT_TYPE_ATACH_MUSIC_SORT).on(C_EVENT_TYPE_ATACH_MUSIC_SORT,"button.d_cmtpgn_atach_music_sort_btn",function(e){__util.log("worker.bind.cmt.atach.music() C_EVENT_TYPE_ATACH_MUSIC_SORT executed.");var $this=$(this),cmtSeq=$this.closest(".d_cmtpgn_cmt_edit_box").attr("data-cmt-id");var musicType=(__util.isDefined($this.closest(".d_cmtpgn_atach_music_layer").find("input[name=d_cmtpgn_atach_music_srch_type]:checked").val())===true?$this.closest(".d_cmtpgn_atach_music_layer").find("input[name=d_cmtpgn_atach_music_srch_type]:checked").val():__global.C_ATACH_MELON_SRCH_TYPE_SONG);var sortType=(__util.isDefined($this.closest(".d_cmtpgn_atach_music_layer").find("select.d_cmtpgn_atach_music_sort_option option:selected").attr("value"))===true?$this.closest(".d_cmtpgn_atach_music_layer").find("select.d_cmtpgn_atach_music_sort_option option:selected").attr("value"):__global.C_ATACH_MELON_SRCH_TYPE_SONG_INITIAL_SORT_TYPE);var srchWord=$this.closest(".d_cmtpgn_atach_music_layer").find("input.d_cmtpgn_atach_music_srch_hidden").val();$this.closest(".d_cmtpgn_atach_music_layer").find(".d_cmtpgn_atach_suggest_keyword").hide();__util.log("worker.bind.cmt.atach.music() C_EVENT_TYPE_ATACH_MUSIC_SORT cmtSeq=["+cmtSeq+"], musicType=["+musicType+"], sortType=["+sortType+"], srchWord=["+srchWord+"]");if(worker.constraint.atach.music.srch(cmtSeq,srchWord)!==true){setTimeout(function(){$this.closest(".d_cmtpgn_atach_music_layer").find("input.d_cmtpgn_atach_music_srch_input").focus();},0);return;}worker.handler.atach.music.srch(cmtSeq,__global.C_EMPTY_KEY,musicType,srchWord,sortType,__global.C_ATACH_MELON_DFLT_PAGE_NO);__util.log("worker.bind.cmt.atach.music() C_EVENT_TYPE_ATACH_MUSIC_SORT executed done.");}).off(C_EVENT_TYPE_ATACH_MUSIC_NAVIGATE).on(C_EVENT_TYPE_ATACH_MUSIC_NAVIGATE,"a.d_cmtpgn_navigator",function(e){__util.log("worker.bind.cmt.atach.music() C_EVENT_TYPE_ATACH_MUSIC_NAVIGATE executed. href=["+$(this).attr("href")+"]");e.preventDefault();if(__util.isDefined($(this).attr("href"))===true){var $this=$(this),cmtSeq=$this.closest(".d_cmtpgn_cmt_edit_box").attr("data-cmt-id");var pageNo=__util.getValueFromCmtpgnUrl($this.attr("href"),"pageNo");var musicType=__util.getValueFromCmtpgnUrl($this.attr("href"),"musicType");var sortType=__util.getValueFromCmtpgnUrl($this.attr("href"),"sortType");var srchWord=__util.getValueFromCmtpgnUrl($this.attr("href"),"srchWord");__util.log("worker.bind.cmt.atach.music() C_EVENT_TYPE_ATACH_MUSIC_NAVIGATE cmtSeq=["+cmtSeq+"], musicType=["+musicType+"], sortType=["+sortType+"], srchWord=["+srchWord+"]");$this.closest(".d_cmtpgn_atach_music_layer").find(".d_cmtpgn_atach_suggest_keyword").hide();worker.handler.atach.music.srch(cmtSeq,__global.C_EMPTY_KEY,musicType,srchWord,sortType,pageNo);}__util.log("worker.bind.cmt.atach.music() C_EVENT_TYPE_ATACH_MUSIC_NAVIGATE executed done.");}).off(C_EVENT_TYPE_ATACH_MUSIC_SUGGEST).on(C_EVENT_TYPE_ATACH_MUSIC_SUGGEST,"a.d_cmtpgn_suggest_keyword",function(e){__util.log("worker.bind.cmt.atach.music() C_EVENT_TYPE_ATACH_MUSIC_SUGGEST executed. href=["+$(this).attr("href")+"]");e.stopPropagation();e.preventDefault();var $this=$(this);var cmtSeq=$this.closest(".d_cmtpgn_cmt_edit_box").attr("data-cmt-id");var contsType=$this.attr("data-conts-type");__util.log("worker.bind.cmt.atach.music() C_EVENT_TYPE_ATACH_MUSIC_SUGGEST contsType=["+contsType+"]");if("SO"==contsType){worker.handler.atach.music.song(cmtSeq,__global.C_EMPTY_KEY,$this.attr("data-artist-id"),$this.attr("data-artist-name"),$this.attr("data-album-id"),$this.attr("data-album-name"),$this.attr("data-album-image-path"),$this.attr("data-song-id"),$this.attr("data-song-name"),"","","","","");}else{if("AR"==contsType){worker.handler.atach.music.artist(cmtSeq,__global.C_EMPTY_KEY,$this.attr("data-artist-id"),$this.attr("data-artist-name"),$this.attr("data-artist-image-path"),$this.attr("data-artist-nationality-name"),$this.attr("data-artist-sex-type-name"),$this.attr("data-artist-act-type-name"),"","");}else{if("AL"==contsType){worker.handler.atach.music.album(cmtSeq,__global.C_EMPTY_KEY,$this.attr("data-artist-id"),$this.attr("data-artist-name"),$this.attr("data-album-id"),$this.attr("data-album-name"),$this.attr("data-album-image-path"),"","");}}}__util.log("worker.bind.cmt.atach.music() C_EVENT_TYPE_ATACH_MUSIC_SUGGEST executed done.");}).off(C_EVENT_TYPE_ATACH_MUSIC_SUGGEST_NAVIGATE).on(C_EVENT_TYPE_ATACH_MUSIC_SUGGEST_NAVIGATE,"a.d_cmtpgn_suggest_keyword",function(e){__util.log("worker.bind.cmt.atach.music() C_EVENT_TYPE_ATACH_MUSIC_SUGGEST_NAVIGATE executed. html=["+$(this).html()+"]");e.preventDefault();var $this=$(this),index,$items,count;var keyIn=(e.which)?e.which:e.keyCode;switch(keyIn){case 13:e.stopPropagation();e.preventDefault();__util.log("worker.bind.cmt.atach.music() C_EVENT_TYPE_ATACH_MUSIC_SUGGEST_NAVIGATE go ENTER.");var cmtSeq=$this.closest(".d_cmtpgn_cmt_edit_box").attr("data-cmt-id");var contsType=$this.attr("data-conts-type");__util.log("worker.bind.cmt.atach.music() C_EVENT_TYPE_ATACH_MUSIC_SUGGEST contsType=["+contsType+"]");if("SO"==contsType){worker.handler.atach.music.song(cmtSeq,__global.C_EMPTY_KEY,$this.attr("data-artist-id"),$this.attr("data-artist-name"),$this.attr("data-album-id"),$this.attr("data-album-name"),$this.attr("data-album-image-path"),$this.attr("data-song-id"),$this.attr("data-song-name"),"","","","","");}else{if("AR"==contsType){worker.handler.atach.music.artist(cmtSeq,__global.C_EMPTY_KEY,$this.attr("data-artist-id"),$this.attr("data-artist-name"),$this.attr("data-artist-image-path"),$this.attr("data-artist-nationality-name"),$this.attr("data-artist-sex-type-name"),$this.attr("data-artist-act-type-name"),"","");}else{if("AL"==contsType){worker.handler.atach.music.album(cmtSeq,__global.C_EMPTY_KEY,$this.attr("data-artist-id"),$this.attr("data-artist-name"),$this.attr("data-album-id"),$this.attr("data-album-name"),$this.attr("data-album-image-path"),"","");}}}$this.closest(".d_cmtpgn_atach_music_layer").find(".d_cmtpgn_atach_suggest_keyword").hide();break;case 27:e.stopPropagation();e.preventDefault();__util.log("worker.bind.cmt.atach.music() C_EVENT_TYPE_ATACH_MUSIC_SUGGEST_NAVIGATE go ESC.");$this.closest(".d_cmtpgn_atach_suggest_keyword").parent().find("input").focus();$this.closest(".d_cmtpgn_atach_suggest_keyword").hide();break;case 38:e.stopPropagation();e.preventDefault();index=$this.parent().index(),$items=$this.closest(".d_cmtpgn_atach_suggest_keyword").find("li"),count=$items.length;__util.log("worker.bind.cmt.atach.music() C_EVENT_TYPE_ATACH_MUSIC_SUGGEST_NAVIGATE go UP. CNT=["+count+"],IDX=["+(index)+"], TO=["+(Math.max(0,index-1))+"]");if($items.eq(Math.max(0,index-1)).attr("class")=="cate"){if(index==1){$this.closest(".d_cmtpgn_atach_suggest_keyword").parent().find("input").focus();}else{$items.eq(Math.max(0,index-1)-1).children().focus();}break;}if(index===0&&Math.max(0,index-1)===0){$this.closest(".d_cmtpgn_atach_suggest_keyword").parent().find("input").focus();}else{$items.eq(Math.max(0,index-1)).children().focus();}break;case 40:e.stopPropagation();e.preventDefault();index=$this.parent().index(),$items=$this.closest(".d_cmtpgn_atach_suggest_keyword").find("li"),count=$items.length;__util.log("worker.bind.cmt.atach.music() C_EVENT_TYPE_ATACH_MUSIC_SUGGEST_NAVIGATE go DOWN. CNT=["+count+"], IDX=["+(index)+"], TO=["+(Math.min(count-1,index+1))+"]");if($items.eq(Math.min(count-1,index+1)).attr("class")=="cate"){$items.eq(Math.min(count-1,index+1)+1).children().focus();}else{$items.eq(Math.min(count-1,index+1)).children().focus();}break;default:break;}__util.log("worker.bind.cmt.atach.music() C_EVENT_TYPE_ATACH_MUSIC_SUGGEST_NAVIGATE executed done.");}).off(C_EVENT_TYPE_ATACH_MUSIC_SUGGEST_HOVER).on(C_EVENT_TYPE_ATACH_MUSIC_SUGGEST_HOVER,"li",function(e){$(this).find("a.d_cmtpgn_suggest_keyword").blur();$(this).parent().find("li").css("background-color","");}).off(C_EVENT_TYPE_ATACH_MUSIC_SUGGEST_FOCUSIN).on(C_EVENT_TYPE_ATACH_MUSIC_SUGGEST_FOCUSIN,"li",function(e){$(this).css("background-color","#f5f5f5");}).off(C_EVENT_TYPE_ATACH_MUSIC_SUGGEST_FOCUSOUT).on(C_EVENT_TYPE_ATACH_MUSIC_SUGGEST_FOCUSOUT,"li",function(e){$(this).css("background-color","");}).off(C_EVENT_TYPE_ATACH_MUSIC_SRCH_DTL).on(C_EVENT_TYPE_ATACH_MUSIC_SRCH_DTL,"input[name=d_cmtpgn_atach_music_srch_type]",function(e){__util.log("worker.bind.cmt.atach.music() C_EVENT_TYPE_ATACH_MUSIC_SRCH_DTL executed.");var $this=$(this),cmtSeq=$this.closest(".d_cmtpgn_cmt_edit_box").attr("data-cmt-id");var musicType=$this.closest(".d_cmtpgn_atach_music_layer").find("input[name=d_cmtpgn_atach_music_srch_type]:checked").val();var sortType="";switch(musicType){case __global.C_ATACH_MELON_SRCH_TYPE_SONG:sortType=__global.C_ATACH_MELON_SRCH_TYPE_SONG_INITIAL_SORT_TYPE;break;case __global.C_ATACH_MELON_SRCH_TYPE_ALBUM:sortType=__global.C_ATACH_MELON_SRCH_TYPE_ALBUM_INITIAL_SORT_TYPE;break;case __global.C_ATACH_MELON_SRCH_TYPE_ARTIST:sortType=__global.C_ATACH_MELON_SRCH_TYPE_ARTIST_INITIAL_SORT_TYPE;break;default:break;}var srchWord=$this.closest(".d_cmtpgn_atach_music_layer").find("input.d_cmtpgn_atach_music_srch_hidden").val();__util.log("worker.bind.cmt.atach.music() C_EVENT_TYPE_ATACH_MUSIC_SRCH_DTL cmtSeq=["+cmtSeq+"], musicType=["+musicType+"], sortType=["+sortType+"], srchWord=["+srchWord+"]");if(worker.constraint.atach.music.srch(cmtSeq,srchWord)!==true){setTimeout(function(){$this.closest(".d_cmtpgn_atach_music_layer").find("input.d_cmtpgn_atach_music_srch_input").focus();},0);return;}worker.handler.atach.music.srch(cmtSeq,__global.C_EMPTY_KEY,musicType,srchWord,sortType,__global.C_ATACH_MELON_DFLT_PAGE_NO);__util.log("worker.bind.cmt.atach.music() C_EVENT_TYPE_ATACH_MUSIC_SRCH_DTL executed done.");}).off("beforeshow").on("beforeshow",function(e){__util.log("worker.bind.cmt.atach.music() C_EVENT_TYPE_ATACH_MUSIC on beforeshow executed.]");var $this=$(this),cmtSeq=$this.closest(".d_cmtpgn_cmt_edit_box").attr("data-cmt-id");__util.log("worker.bind.cmt.atach.music() C_EVENT_TYPE_ATACH_MUSIC cmtSeq=["+cmtSeq+"]");if(Number(cmtSeq)===__global.C_EMPTY_KEY){if(worker.constraint.login()!==true){e.preventDefault();return;}if(worker.constraint.member()!==true){e.preventDefault();return;}}worker.render.atach.music.loading.finish(cmtSeq);worker.reset.atach.music(cmtSeq);}).off("show").on("show",function(e){__util.log("worker.bind.cmt.atach.music() C_EVENT_TYPE_ATACH_MUSIC on show executed.]");var $this=$(this),cmtSeq=$this.closest(".d_cmtpgn_cmt_edit_box").attr("data-cmt-id");__util.log("worker.bind.cmt.atach.music() C_EVENT_TYPE_ATACH_MUSIC cmtSeq=["+cmtSeq+"]");$this.closest(".d_cmtpgn_atach_music_layer").find("input.d_cmtpgn_atach_music_srch_input").cmtMelonKeywordSuggest({execution:"button.d_cmtpgn_atach_music_srch_btn",callback:_musicAtachSuggestHandler,backdata:{editingCmtSeq:cmtSeq,editingAtachSeq:__global.C_EMPTY_KEY}});$this.closest(".d_cmtpgn_atach_music_layer").find("select").selectbox();setTimeout(function(){$this.closest(".d_cmtpgn_atach_music_layer").find("input.d_cmtpgn_atach_music_srch_input").focus();},0);});$atachMusicLayer.find(".d_cmtpgn_atach_music_srch_input").keydown(function(){g_suggest_layer_open=true;});}};worker.bind.cmt.atach.video=function(editingCmtSeq){if(G_CHNL_INFO.vdoAtachUseFlag===true){var $atachVideoLayer=(__util.isDefined(editingCmtSeq)!==true?$G_CONTAINER.find("#d_cmtpgn_cmt_write_box").find(".d_cmtpgn_atach_video_layer"):$G_CONTAINER.find("#d_cmtpgn_cmt_list_wrapper").find("ul>li").filter('[data-cmt-id="'+Number(editingCmtSeq)+'"]').find(".d_cmtpgn_cmt_edit_box").find(".d_cmtpgn_atach_video_layer"));$atachVideoLayer.off(C_EVENT_TYPE_ATACH_VIDEO).on(C_EVENT_TYPE_ATACH_VIDEO,"button.d_cmtpgn_atach_video_btn:not(.disabled)",function(e){__util.log("worker.bind.cmt.atach.video() C_EVENT_TYPE_ATACH_VIDEO executed.");var $this=$(this),cmtSeq=$this.closest(".d_cmtpgn_cmt_edit_box").attr("data-cmt-id");__util.log("worker.bind.cmt.atach.video() C_EVENT_TYPE_ATACH_VIDEO cmtSeq=["+cmtSeq+"]");if(Number(cmtSeq)===__global.C_EMPTY_KEY){if(worker.constraint.login()!==true){return;}if(worker.constraint.member()!==true){return;}}worker.handler.atach.video(cmtSeq,__global.C_EMPTY_KEY,$this.attr("data-artist-id"),$this.attr("data-artist-name"),$this.attr("data-video-id"),$this.attr("data-video-title"),$this.attr("data-video-image-path"),$this.attr("data-video-adult-flag"),$this.attr("data-video-age-level"),$this.attr("data-video-play-time"),$this.attr("data-video-view-cnt"),$this.attr("data-video-issue-date"),$this.attr("data-video-avail-flag"),$this.attr("data-song-id"));__util.log("worker.bind.cmt.atach.video() C_EVENT_TYPE_ATACH_VIDEO executed done.");}).off(C_EVENT_TYPE_ATACH_VIDEO_SRCH).on(C_EVENT_TYPE_ATACH_VIDEO_SRCH,"button.d_cmtpgn_atach_video_srch_btn",function(e){__util.log("worker.bind.cmt.atach.video() C_EVENT_TYPE_ATACH_VIDEO_SRCH executed.");g_suggest_layer_open=false;var $this=$(this),cmtSeq=$this.closest(".d_cmtpgn_cmt_edit_box").attr("data-cmt-id");var sortType=__global.C_ATACH_MELON_SRCH_TYPE_VIDEO_INITIAL_SORT_TYPE;var srchWord=$this.closest(".d_cmtpgn_atach_video_layer").find("input.d_cmtpgn_atach_video_srch_input").val();srchWord=(__util.isEmpty($.trim(srchWord),$this.closest(".d_cmtpgn_atach_video_layer").find("input.d_cmtpgn_atach_video_srch_input"))===true?"":$.trim(srchWord));$this.closest(".d_cmtpgn_atach_video_layer").find(".d_cmtpgn_atach_suggest_keyword").hide();__util.log("worker.bind.cmt.atach.video() C_EVENT_TYPE_ATACH_VIDEO_SRCH cmtSeq=["+cmtSeq+"], sortType=["+sortType+"], srchWord=["+srchWord+"]");if(worker.constraint.atach.video.srch(cmtSeq,srchWord)!==true){setTimeout(function(){$this.closest(".d_cmtpgn_atach_video_layer").find("input.d_cmtpgn_atach_video_srch_input").focus();},0);return;}worker.handler.atach.video.srch(cmtSeq,__global.C_EMPTY_KEY,srchWord,sortType,__global.C_ATACH_MELON_DFLT_PAGE_NO);__util.log("worker.bind.cmt.atach.video() C_EVENT_TYPE_ATACH_VIDEO_SRCH executed done.");}).off(C_EVENT_TYPE_ATACH_VIDEO_SORT).on(C_EVENT_TYPE_ATACH_VIDEO_SORT,"button.d_cmtpgn_atach_video_sort_btn",function(e){__util.log("worker.bind.cmt.atach.video() C_EVENT_TYPE_ATACH_VIDEO_SORT executed.");var $this=$(this),cmtSeq=$this.closest(".d_cmtpgn_cmt_edit_box").attr("data-cmt-id");var sortType=(__util.isDefined($this.closest(".d_cmtpgn_atach_video_layer").find("select.d_cmtpgn_atach_video_sort_option option:selected").attr("value"))===true?$this.closest(".d_cmtpgn_atach_video_layer").find("select.d_cmtpgn_atach_video_sort_option option:selected").attr("value"):__global.C_ATACH_MELON_SRCH_TYPE_VIDEO_INITIAL_SORT_TYPE);var srchWord=$this.closest(".d_cmtpgn_atach_video_layer").find("input.d_cmtpgn_atach_video_srch_hidden").val();$this.closest(".d_cmtpgn_atach_video_layer").find(".d_cmtpgn_atach_suggest_keyword").hide();__util.log("worker.bind.cmt.atach.video() C_EVENT_TYPE_ATACH_VIDEO_SRCH cmtSeq=["+cmtSeq+"], sortType=["+sortType+"], srchWord=["+srchWord+"]");if(worker.constraint.atach.video.srch(cmtSeq,srchWord)!==true){setTimeout(function(){$this.closest(".d_cmtpgn_atach_video_layer").find("input.d_cmtpgn_atach_video_srch_input").focus();},0);return;}worker.handler.atach.video.srch(cmtSeq,__global.C_EMPTY_KEY,srchWord,sortType,__global.C_ATACH_MELON_DFLT_PAGE_NO);__util.log("worker.bind.cmt.atach.video() C_EVENT_TYPE_ATACH_VIDEO_SORT executed done.");}).off(C_EVENT_TYPE_ATACH_VIDEO_NAVIGATE).on(C_EVENT_TYPE_ATACH_VIDEO_NAVIGATE,"a.d_cmtpgn_navigator",function(e){__util.log("worker.bind.cmt.atach.video() C_EVENT_TYPE_ATACH_VIDEO_NAVIGATE executed. href=["+$(this).attr("href")+"]");e.preventDefault();if(__util.isDefined($(this).attr("href"))===true){var $this=$(this),cmtSeq=$this.closest(".d_cmtpgn_cmt_edit_box").attr("data-cmt-id");var pageNo=__util.getValueFromCmtpgnUrl($this.attr("href"),"pageNo");var sortType=__util.getValueFromCmtpgnUrl($this.attr("href"),"sortType");var srchWord=__util.getValueFromCmtpgnUrl($this.attr("href"),"srchWord");__util.log("worker.bind.cmt.atach.video() C_EVENT_TYPE_ATACH_VIDEO_NAVIGATE cmtSeq=["+cmtSeq+"], sortType=["+sortType+"], srchWord=["+srchWord+"]");$this.closest(".d_cmtpgn_atach_video_layer").find(".d_cmtpgn_atach_suggest_keyword").hide();worker.handler.atach.video.srch(cmtSeq,__global.C_EMPTY_KEY,srchWord,sortType,pageNo);}__util.log("worker.bind.cmt.atach.video() C_EVENT_TYPE_ATACH_VIDEO_NAVIGATE executed done.");}).off(C_EVENT_TYPE_ATACH_VIDEO_SUGGEST).on(C_EVENT_TYPE_ATACH_VIDEO_SUGGEST,"a.d_cmtpgn_suggest_keyword",function(e){__util.log("worker.bind.cmt.atach.video() C_EVENT_TYPE_ATACH_VIDEO_SUGGEST executed. href=["+$(this).attr("href")+"]");e.stopPropagation();e.preventDefault();var $this=$(this),keyword=$this.attr("data-suggest-keyword");__util.log("worker.callback.atach.video.suggest() C_EVENT_TYPE_ATACH_VIDEO_SUGGEST keyword=["+keyword+"]");$this.closest(".d_cmtpgn_atach_video_layer").find("input.d_cmtpgn_atach_video_srch_input").val(keyword);$this.closest(".d_cmtpgn_atach_video_layer").find("button.d_cmtpgn_atach_video_srch_btn").trigger("click");$this.closest(".d_cmtpgn_atach_video_layer").find(".d_cmtpgn_atach_suggest_keyword").hide();__util.log("worker.bind.cmt.atach.video() C_EVENT_TYPE_ATACH_VIDEO_SUGGEST executed done.");}).off(C_EVENT_TYPE_ATACH_VIDEO_SUGGEST_NAVIGATE).on(C_EVENT_TYPE_ATACH_VIDEO_SUGGEST_NAVIGATE,"a.d_cmtpgn_suggest_keyword",function(e){__util.log("worker.bind.cmt.atach.video() C_EVENT_TYPE_ATACH_VIDEO_SUGGEST_NAVIGATE executed. html=["+$(this).html()+"]");e.preventDefault();var $this=$(this),index,$items,count;var keyIn=(e.which)?e.which:e.keyCode;switch(keyIn){case 13:e.stopPropagation();e.preventDefault();__util.log("worker.bind.cmt.atach.video() C_EVENT_TYPE_ATACH_VIDEO_SUGGEST_NAVIGATE go ENTER.");$this.closest(".d_cmtpgn_atach_video_layer").find("input.d_cmtpgn_atach_video_srch_input").val($this.attr("data-suggest-keyword"));$this.closest(".d_cmtpgn_atach_video_layer").find("button.d_cmtpgn_atach_video_srch_btn").trigger("click");$this.closest(".d_cmtpgn_atach_video_layer").find(".d_cmtpgn_atach_suggest_keyword").hide();break;case 27:e.stopPropagation();e.preventDefault();__util.log("worker.bind.cmt.atach.video() C_EVENT_TYPE_ATACH_VIDEO_SUGGEST_NAVIGATE go ESC.");$this.closest(".d_cmtpgn_atach_suggest_keyword").parent().find("input").focus();$this.closest(".d_cmtpgn_atach_suggest_keyword").hide();break;case 38:e.stopPropagation();e.preventDefault();index=$this.parent().index(),$items=$this.closest(".d_cmtpgn_atach_suggest_keyword").find("li"),count=$items.length;__util.log("worker.bind.cmt.atach.video() C_EVENT_TYPE_ATACH_VIDEO_SUGGEST_NAVIGATE go UP. CNT=["+count+"],IDX=["+(index)+"], TO=["+(Math.max(0,index-1))+"]");if(index===0&&Math.max(0,index-1)===0){$this.closest(".d_cmtpgn_atach_suggest_keyword").parent().find("input").focus();}else{$items.eq(Math.max(0,index-1)).children().focus();}break;case 40:e.stopPropagation();e.preventDefault();index=$this.parent().index(),$items=$this.closest(".d_cmtpgn_atach_suggest_keyword").find("li"),count=$items.length;__util.log("worker.bind.cmt.atach.video() C_EVENT_TYPE_ATACH_VIDEO_SUGGEST_NAVIGATE go DOWN. CNT=["+count+"], IDX=["+(index)+"], TO=["+(Math.min(count-1,index+1))+"]");$items.eq(Math.min(count-1,index+1)).children().focus();break;default:break;}__util.log("worker.bind.cmt.atach.video() C_EVENT_TYPE_ATACH_VIDEO_SUGGEST_NAVIGATE executed done.");}).off(C_EVENT_TYPE_ATACH_VIDEO_SUGGEST_HOVER).on(C_EVENT_TYPE_ATACH_VIDEO_SUGGEST_HOVER,"li",function(e){$(this).find("a.d_cmtpgn_suggest_keyword").blur();$(this).parent().find("li").css("background-color","");}).off(C_EVENT_TYPE_ATACH_VIDEO_SUGGEST_FOCUSIN).on(C_EVENT_TYPE_ATACH_VIDEO_SUGGEST_FOCUSIN,"li",function(e){$(this).css("background-color","#f5f5f5");}).off(C_EVENT_TYPE_ATACH_VIDEO_SUGGEST_FOCUSOUT).on(C_EVENT_TYPE_ATACH_VIDEO_SUGGEST_FOCUSOUT,"li",function(e){$(this).css("background-color","");}).off("beforeshow").on("beforeshow",function(e){__util.log("worker.bind.cmt.atach.video() C_EVENT_TYPE_ATACH_VIDEO on beforeshow executed.]");var $this=$(this),cmtSeq=$this.closest(".d_cmtpgn_cmt_edit_box").attr("data-cmt-id");__util.log("worker.bind.cmt.atach.video() C_EVENT_TYPE_ATACH_VIDEO cmtSeq=["+cmtSeq+"]");if(Number(cmtSeq)===__global.C_EMPTY_KEY){if(worker.constraint.login()!==true){e.preventDefault();return;}if(worker.constraint.member()!==true){e.preventDefault();return;}}worker.render.atach.video.loading.finish(cmtSeq);worker.reset.atach.video(cmtSeq);}).off("show").on("show",function(e){__util.log("worker.bind.cmt.atach.video() C_EVENT_TYPE_ATACH_VIDEO on show executed.]");var $this=$(this),cmtSeq=$this.closest(".d_cmtpgn_cmt_edit_box").attr("data-cmt-id");__util.log("worker.bind.cmt.atach.video() C_EVENT_TYPE_ATACH_VIDEO cmtSeq=["+cmtSeq+"]");$this.closest(".d_cmtpgn_atach_video_layer").find("input.d_cmtpgn_atach_video_srch_input").cmtMelonKeywordSuggest({execution:"button.d_cmtpgn_atach_video_srch_btn",callback:_videoAtachSuggestHandler,backdata:{editingCmtSeq:cmtSeq,editingAtachSeq:__global.C_EMPTY_KEY}});$this.closest(".d_cmtpgn_atach_video_layer").find("select").selectbox();setTimeout(function(){$this.closest(".d_cmtpgn_atach_video_layer").find("input.d_cmtpgn_atach_video_srch_input").focus();},0);});$atachVideoLayer.find(".d_cmtpgn_atach_video_srch_input").keydown(function(){g_suggest_layer_open=true;});}};worker.bind.cmt.atach.image=function(editingCmtSeq){if(G_CHNL_INFO.imageAtachUseFlag===true){var $atachImageLayer=(__util.isDefined(editingCmtSeq)!==true?$G_CONTAINER.find("#d_cmtpgn_cmt_write_box").find(".d_cmtpgn_atach_image_layer"):$G_CONTAINER.find("#d_cmtpgn_cmt_list_wrapper").find("ul>li").filter('[data-cmt-id="'+Number(editingCmtSeq)+'"]').find(".d_cmtpgn_cmt_edit_box").find(".d_cmtpgn_atach_image_layer"));$atachImageLayer.off(C_EVENT_TYPE_ATACH_IMAGE).on(C_EVENT_TYPE_ATACH_IMAGE,"button.d_cmtpgn_atach_image_btn",function(e){__util.log("worker.bind.cmt.atach.image() C_EVENT_TYPE_ATACH_IMAGE executed.");var $this=$(this),cmtSeq=$this.closest(".d_cmtpgn_cmt_edit_box").attr("data-cmt-id");__util.log("worker.bind.cmt.atach.image() C_EVENT_TYPE_ATACH_IMAGE cmtSeq=["+cmtSeq+"]");if(Number(cmtSeq)===__global.C_EMPTY_KEY){if(worker.constraint.login()!==true){return;}if(worker.constraint.member()!==true){return;}}var $file=$this.closest(".d_cmtpgn_atach_image_layer").find("input.d_cmtpgn_atach_image_input");__util.log("worker.bind.cmt.atach.image() C_EVENT_TYPE_ATACH_IMAGE $file=["+$file.val()+"]");if(worker.constraint.atach.image(cmtSeq,$file.val())!==true){$file.closest("form").get(0).reset();return;}worker.handler.atach.image(cmtSeq,__global.C_EMPTY_KEY,$file.val());__util.log("worker.bind.cmt.atach.image() C_EVENT_TYPE_ATACH_IMAGE executed done.");}).off("change").on("change","input.d_cmtpgn_atach_image_input",function(e){__util.log("worker.bind.cmt.atach.image() C_EVENT_TYPE_ATACH_IMAGE on change executed.");var $this=$(this),cmtSeq=$this.closest(".d_cmtpgn_cmt_edit_box").attr("data-cmt-id");__util.log("worker.bind.cmt.atach.image() C_EVENT_TYPE_ATACH_IMAGE cmtSeq=["+cmtSeq+"]");var $file=$this.closest(".d_cmtpgn_atach_image_layer").find("input.d_cmtpgn_atach_image_input");__util.log("worker.bind.cmt.atach.image() C_EVENT_TYPE_ATACH_IMAGE $file=["+$file.val()+"]");if(worker.constraint.atach.image(cmtSeq,$file.val())!==true){$file.closest("form").get(0).reset();return;}}).off("beforeshow").on("beforeshow",function(e){__util.log("worker.bind.cmt.atach.image() C_EVENT_TYPE_ATACH_IMAGE on beforeshow executed.");var $this=$(this),cmtSeq=$this.closest(".d_cmtpgn_cmt_edit_box").attr("data-cmt-id");__util.log("worker.bind.cmt.atach.image() C_EVENT_TYPE_ATACH_IMAGE cmtSeq=["+cmtSeq+"]");if(Number(cmtSeq)===__global.C_EMPTY_KEY){if(worker.constraint.login()!==true){e.preventDefault();return;}if(worker.constraint.member()!==true){e.preventDefault();return;}}worker.reset.atach.image(cmtSeq);}).off("show").on("show",function(e){__util.log("worker.bind.cmt.atach.image() C_EVENT_TYPE_ATACH_IMAGE on show executed. cdnPath will be=["+__util.getImageUploadPath(__websvc.Auth.getMemberKey())+"]");var $this=$(this),cmtSeq=$this.closest(".d_cmtpgn_cmt_edit_box").attr("data-cmt-id");__util.log("worker.bind.cmt.atach.image() C_EVENT_TYPE_ATACH_IMAGE cmtSeq=["+cmtSeq+"]");});}};worker.bind.cmt.atach.link=function(editingCmtSeq){if(G_CHNL_INFO.linkAtachUseFlag===true&&(G_CHNL_INFO.vdoLinkAtachUseFlag===true||G_CHNL_INFO.genrlLinkAtachUseFlag===true)){var $atachLinkLayer=(__util.isDefined(editingCmtSeq)!==true?$G_CONTAINER.find("#d_cmtpgn_cmt_write_box").find(".d_cmtpgn_atach_link_layer"):$G_CONTAINER.find("#d_cmtpgn_cmt_list_wrapper").find("ul>li").filter('[data-cmt-id="'+Number(editingCmtSeq)+'"]').find(".d_cmtpgn_cmt_edit_box").find(".d_cmtpgn_atach_link_layer"));$atachLinkLayer.off(C_EVENT_TYPE_ATACH_LINK).on(C_EVENT_TYPE_ATACH_LINK,"button.d_cmtpgn_atach_link_btn",function(e){__util.log("worker.bind.cmt.atach.link() C_EVENT_TYPE_ATACH_LINK executed.");var $this=$(this),cmtSeq=$this.closest(".d_cmtpgn_cmt_edit_box").attr("data-cmt-id");var linkType=$this.closest(".d_cmtpgn_atach_link_layer").find("select option:selected").attr("value"),linkUrl=$this.closest(".d_cmtpgn_atach_link_layer").find("input.d_cmtpgn_atach_link_input").val();linkUrl=(__util.isEmpty($.trim(linkUrl),$this.closest(".d_cmtpgn_atach_link_layer").find("input.d_cmtpgn_atach_link_input"))===true?"":$.trim(linkUrl));__util.log("worker.bind.cmt.atach.link() C_EVENT_TYPE_ATACH_LINK cmtSeq=["+cmtSeq+"], linkType=["+linkType+"], linkUrl=["+linkUrl+"]");if(Number(cmtSeq)===__global.C_EMPTY_KEY){if(worker.constraint.login()!==true){return;}if(worker.constraint.member()!==true){return;}}if(worker.constraint.atach.link(cmtSeq,linkType,linkUrl)!==true){setTimeout(function(){$this.closest(".d_cmtpgn_atach_link_layer").find("input.d_cmtpgn_atach_link_input").focus();},0);return;}worker.handler.atach.link(cmtSeq,__global.C_EMPTY_KEY,linkType,linkUrl);__util.log("worker.bind.cmt.atach.link() C_EVENT_TYPE_ATACH_LINK executed done.");}).off(C_EVENT_TYPE_ATACH_LINK_TYPE_CHANGE).on(C_EVENT_TYPE_ATACH_LINK_TYPE_CHANGE,"select",function(e){__util.log("worker.bind.cmt.atach.link() C_EVENT_TYPE_ATACH_LINK_TYPE_CHANGE executed.");var $this=$(this),cmtSeq=$this.closest(".d_cmtpgn_cmt_edit_box").attr("data-cmt-id");setTimeout(function(){$this.closest(".d_cmtpgn_atach_link_layer").find("input.d_cmtpgn_atach_link_input").focus();},0);__util.log("worker.bind.cmt.atach.link() C_EVENT_TYPE_ATACH_LINK_TYPE_CHANGE executed done.");}).off(C_EVENT_TYPE_ATACH_LINK_EXECUTE).on(C_EVENT_TYPE_ATACH_LINK_EXECUTE,"input.d_cmtpgn_atach_link_input",function(e){var $this=$(this),cmtSeq=$this.closest(".d_cmtpgn_cmt_edit_box").attr("data-cmt-id");if(((e.which)?e.which:e.keyCode)===13){$this.closest(".d_cmtpgn_atach_link_layer").find("button.d_cmtpgn_atach_link_btn").trigger("click");}}).off("beforeshow").on("beforeshow",function(e){__util.log("worker.bind.cmt.atach.link() C_EVENT_TYPE_ATACH_LINK on beforeshow executed.");var $this=$(this),cmtSeq=$this.closest(".d_cmtpgn_cmt_edit_box").attr("data-cmt-id");__util.log("worker.bind.cmt.atach.link() C_EVENT_TYPE_ATACH_LINK cmtSeq=["+cmtSeq+"]");if(Number(cmtSeq)===__global.C_EMPTY_KEY){if(worker.constraint.login()!==true){e.preventDefault();return;}if(worker.constraint.member()!==true){e.preventDefault();return;}}worker.reset.atach.link(cmtSeq);}).off("show").on("show",function(e){__util.log("worker.bind.cmt.atach.link() C_EVENT_TYPE_ATACH_LINK on show executed.");var $this=$(this),cmtSeq=$this.closest(".d_cmtpgn_cmt_edit_box").attr("data-cmt-id");setTimeout(function(){$this.closest(".d_cmtpgn_atach_link_layer").find("input.d_cmtpgn_atach_link_input").focus();},0);__util.log("worker.bind.cmt.atach.link() C_EVENT_TYPE_ATACH_LINK cmtSeq=["+cmtSeq+"]");});}};worker.bind.adcmt={};worker.bind.adcmt.view=function(){$G_CONTAINER.find("#d_cmtpgn_cmt_list_wrapper").off(C_EVENT_TYPE_ADCMT_EXPAND).on(C_EVENT_TYPE_ADCMT_EXPAND,"button[data-control=expand]",function(e){__util.log("worker.bind.adcmt.view() C_EVENT_TYPE_ADCMT_EXPAND executed.");e.preventDefault();var $this=$(this),cmtSeq=$this.closest("li").attr("data-cmt-id"),$target=$($this.attr("data-expand-target"));__util.log("worker.bind.adcmt.view() G_CHNL_INFO.adcmtUseFlag === true, EXPAND, cmtSeq=["+cmtSeq+"], target=["+$this.attr("data-expand-target")+"]");if($target.size()===0){return;}if($target.find("li").length>0){}if($target.find("li").length<1){var data={};data.cmtPocType=G_CMT_POC_TYPE;data.pocId=G_POC_ID;data.chnlSeq=Number(G_CHNL_SEQ);data.contsRefValue=G_CONTS_REF_VALUE;if(G_PAGE_TYPE===__global.C_PAGE_TYPE_GUESTBOOK){data.mypageMemberKey=Number(G_MYMUSIC_KEY);}data.cmtSeq=cmtSeq;__api.adcmt.list(data,function(data){if(data.STATUS!==__global.C_STATUS_SUCCESS){worker.fallback.alert(data);return;}worker.render.adcmt.list($this,$target,data.result.adcmtList);$this.addClass("on").toggleClass("arrow_d02").toggleClass("arrow_u02");});}else{$target.show();$this.addClass("on").toggleClass("arrow_d02").toggleClass("arrow_u02");if(G_CHNL_INFO.adcmtWriteUseFlag===true){if($target.next().hasClass("d_cmtpgn_adcmt_write_box")===true){$target.next().find("input.d_cmtpgn_adcmt_input").val("").placeholder("update");$target.next().show();}}}__util.log("worker.bind.adcmt.view() C_EVENT_TYPE_ADCMT_EXPAND executed done.");});$G_CONTAINER.find("#d_cmtpgn_cmt_list_wrapper").off(C_EVENT_TYPE_ADCMT_COLLAPSE).on(C_EVENT_TYPE_ADCMT_COLLAPSE,"button[data-control=expand]",function(e){__util.log("worker.bind.adcmt.view() C_EVENT_TYPE_ADCMT_COLLAPSE executed.");e.preventDefault();var $this=$(this),cmtSeq=$this.closest("li").attr("data-cmt-id"),$target=$($this.attr("data-expand-target"));__util.log("worker.bind.adcmt.view() G_CHNL_INFO.adcmtUseFlag === true, COLLSPSE, cmtSeq=["+cmtSeq+"], target=["+$this.attr("data-expand-target")+"]");$target.hide();$target.next().hide().find("input.d_cmtpgn_adcmt_input").parent().find(".d_cmtpgn_char_cnt").html("0");$target.next().hide().find("input.d_cmtpgn_adcmt_input").val("").placeholder("update");$this.removeClass("on").toggleClass("arrow_d02").toggleClass("arrow_u02");__util.log("worker.bind.adcmt.view() C_EVENT_TYPE_ADCMT_COLLAPSE executed done.");});};worker.bind.adcmt.write=function(){if(G_CHNL_INFO.adcmtWriteUseFlag===true){$G_CONTAINER.find("#d_cmtpgn_cmt_list_wrapper").off(C_EVENT_TYPE_ADCMT_FOCUSIN).on(C_EVENT_TYPE_ADCMT_FOCUSIN,"input.d_cmtpgn_adcmt_input",function(e){__util.log("worker.bind.adcmt.write() C_EVENT_TYPE_ADCMT_FOCUSIN executed.");var $this=$(this);if(worker.constraint.readonly.post()!==true){$(this).blur();return;}if(worker.constraint.login()!==true){$(this).blur();return;}if(worker.constraint.member()!==true){$(this).blur();return;}if(worker.constraint.adcmt.write($this.closest("li").attr("data-cmt-break"),$this.closest("li").attr("data-cmt-del"))!==true){$(this).blur();return;}__util.log("worker.bind.adcmt.write() $this.html=["+$this.parent().find(">.no_staus>.no").html()+"]");if($this.data("cmtTextControl")){return;}$this.cmtTextControl({limit:G_CHNL_INFO.adcmtRegMaxLength,limitTarget:$this.parent().find(".d_cmtpgn_char_cnt"),allowPaste:G_CHNL_INFO.pastePermFlag});$this.removeAttr("readonly");__util.log("worker.bind.adcmt.write() C_EVENT_TYPE_ADCMT_FOCUSIN executed done.");});$G_CONTAINER.find("#d_cmtpgn_cmt_list_wrapper").off(C_EVENT_TYPE_ADCMT_REG).on(C_EVENT_TYPE_ADCMT_REG,"button.d_cmtpgn_adcmt_reg_btn",function(e){__util.log("worker.bind.adcmt.write() C_EVENT_TYPE_ADCMT_REG executed.");if(G_ADCMT_REG_REQUEST_FLAG===true){alert(__msg.CMTPGN114);return;}var $this=$(this);__util.log("worker.bind.adcmt.write() C_EVENT_TYPE_ADCMT_REG data-cmt-id=["+$this.closest("li").attr("data-cmt-id")+"]");__util.log("worker.bind.adcmt.write() C_EVENT_TYPE_ADCMT_REG data-cmt-break=["+$this.closest("li").attr("data-cmt-break")+"]");__util.log("worker.bind.adcmt.write() C_EVENT_TYPE_ADCMT_REG data-cmt-del=["+$this.closest("li").attr("data-cmt-del")+"]");var text=$this.closest(".d_cmtpgn_adcmt_write_box").find("input.d_cmtpgn_adcmt_input").val();text=(__util.isEmpty($.trim(text),$this.closest(".d_cmtpgn_adcmt_write_box").find("input.d_cmtpgn_adcmt_input"))===true?"":$.trim(text));if(worker.constraint.readonly.post()!==true){return;}if(worker.constraint.login()!==true){return;}if(worker.constraint.member()!==true){return;}if(worker.constraint.adcmt.write($this.closest("li").attr("data-cmt-break"),$this.closest("li").attr("data-cmt-del"))!==true){return;}if(worker.constraint.adcmt.reg($this.closest("li").attr("data-cmt-break"),$this.closest("li").attr("data-cmt-del"),text)!==true){setTimeout(function(){$this.closest(".d_cmtpgn_adcmt_write_box").find("input.d_cmtpgn_adcmt_input").focus();},0);return;}var secrtFlag=false;if(G_CHNL_INFO.secrtUseFlag===true){secrtFlag=$this.next().find(".d_cmtpgn_secrt_flag").is(":checked");__util.log("worker.bind.adcmt.write() C_EVENT_TYPE_ADCMT_REG secrtFlag=["+secrtFlag+"]");}var data={},callback=worker.callback.adcmt.reg;data.cmtPocType=G_CMT_POC_TYPE;data.pocId=G_POC_ID;data.chnlSeq=Number(G_CHNL_SEQ);data.contsRefValue=G_CONTS_REF_VALUE;data.contsRefUrl=G_CONTS_REF_URL;data.parntCmtSeq=Number($this.closest("li").attr("data-cmt-id"));data.secrtFlag=secrtFlag;data.cmtCont=text;__api.adcmt.reg(data,callback);G_ADCMT_REG_REQUEST_FLAG=true;__util.log("worker.bind.adcmt.write() C_EVENT_TYPE_ADCMT_REG executed done.");});$G_CONTAINER.find("#d_cmtpgn_cmt_list_wrapper").off(C_EVENT_TYPE_ADCMT_REG_EXECUTE).on(C_EVENT_TYPE_ADCMT_REG_EXECUTE,"input.d_cmtpgn_adcmt_input",function(e){if(((e.which)?e.which:e.keyCode)===13){$(this).closest(".d_cmtpgn_adcmt_write_box").find("button.d_cmtpgn_adcmt_reg_btn").trigger("click");}});}};worker.bind.adcmt.del=function(){$G_CONTAINER.find("#d_cmtpgn_cmt_list_wrapper").off(C_EVENT_TYPE_ADCMT_DEL).on(C_EVENT_TYPE_ADCMT_DEL,"button.d_cmtpgn_adcmt_del_btn",function(e){__util.log("worker.bind.adcmt.del() C_EVENT_TYPE_ADCMT_DEL executed.");var $this=$(this);__util.log("worker.bind.adcmt.del() C_EVENT_TYPE_ADCMT_DEL SELF data-cmt-id=["+$this.closest("li").attr("data-cmt-id")+"]");__util.log("worker.bind.adcmt.del() C_EVENT_TYPE_ADCMT_DEL PARENT data-cmt-id=["+$this.closest("li").parent("ul").parent("li").attr("data-cmt-id")+"]");__util.log("worker.bind.adcmt.del() C_EVENT_TYPE_ADCMT_DEL data-cmt-break=["+$this.closest("li").attr("data-cmt-break")+"]");__util.log("worker.bind.adcmt.del() C_EVENT_TYPE_ADCMT_DEL data-cmt-del=["+$this.closest("li").attr("data-cmt-del")+"]");__util.log("worker.bind.adcmt.del() C_EVENT_TYPE_ADCMT_DEL data-cmt-owner=["+$this.closest("li").attr("data-cmt-owner")+"]");if(worker.constraint.login()!==true){return;}if(worker.constraint.adcmt.del($this.closest("li").attr("data-cmt-break"),$this.closest("li").attr("data-cmt-del"),$this.closest("li").attr("data-cmt-owner"))!==true){return;}var data={},callback=worker.callback.adcmt.del;data.cmtPocType=G_CMT_POC_TYPE;data.pocId=G_POC_ID;data.chnlSeq=Number(G_CHNL_SEQ);data.contsRefValue=G_CONTS_REF_VALUE;data.parntCmtSeq=Number($this.closest("li").parent("ul").parent("li").attr("data-cmt-id"));data.cmtSeq=Number($this.closest("li").attr("data-cmt-id"));__api.adcmt.del(data,callback);__util.log("worker.bind.adcmt.del() C_EVENT_TYPE_ADCMT_DEL executed done.");});};worker.bind.atach=function(){$G_CONTAINER.find("#d_cmtpgn_cmt_list_wrapper").off(C_EVENT_TYPE_ATACH_EXECUTE).on(C_EVENT_TYPE_ATACH_EXECUTE,".d_cmtpgn_atach_content",function(e){__util.log("worker.bind.atach() C_EVENT_TYPE_ATACH_EXECUTE executed.");e.preventDefault();var $this=$(this),$atachBox=$this.closest(".d_cmtpgn_atach_box"),atachType=$atachBox.attr("data-atach-type"),atachId=$atachBox.attr("data-atach-id");__util.log("worker.bind.atach() C_EVENT_TYPE_ATACH_EXECUTE atachType=["+atachType+"], atachId=["+atachId+"]");var artistId,albumId,songId,videoId,videoLinkUrl,videoLinkTarget,videoLinkInfo,genrlLinkUrl,genrlLinkTarget;switch(atachType){case __global.C_ATACH_TYPE_MUSIC_SONG:__util.log("worker.bind.atach() C_EVENT_TYPE_ATACH_EXECUTE C_ATACH_TYPE_MUSIC_SONG, href=["+$this.attr("href")+"]");if($this.is(".d_cmtpgn_atach_content_melon_artist")===true){artistId=__util.getValueFromUrl($this.attr("href"),"artistId");__util.log("worker.bind.atach() C_EVENT_TYPE_ATACH_EXECUTE C_ATACH_TYPE_MUSIC_SONG to ARTIST, id=["+artistId+"]");commentObj.goArtistDtl(artistId);}else{if($this.is(".d_cmtpgn_atach_content_melon_album")===true){if($this.is(".d_cmtpgn_atach_content_melon_download")===true){albumId=$atachBox.attr("data-song-album-id");__util.log("worker.bind.atach() C_EVENT_TYPE_ATACH_EXECUTE C_ATACH_TYPE_MUSIC_SONG to ALBUM DOWN, id=["+albumId+"]");}else{albumId=__util.getValueFromUrl($this.attr("href"),"albumId");__util.log("worker.bind.atach() C_EVENT_TYPE_ATACH_EXECUTE C_ATACH_TYPE_MUSIC_SONG to ALBUM, id=["+albumId+"]");}var albumOnlyFlag=$atachBox.attr("data-album-only-flag");if(__util.isEmpty(albumOnlyFlag)!==true&&albumOnlyFlag==="1"){if(confirm(__msg.CMTPGN602)===true){commentObj.goAlbumDtl(albumId);}else{$(this).blur();}}else{commentObj.goAlbumDtl(albumId);}}else{if($this.is(".d_cmtpgn_atach_content_melon_song")===true){songId=__util.getValueFromUrl($this.attr("href"),"songId");__util.log("worker.bind.atach() C_EVENT_TYPE_ATACH_EXECUTE C_ATACH_TYPE_MUSIC_SONG to SONG, id=["+songId+"]");commentObj.goSongDtl(songId);$(this).blur();}else{if($this.is(".d_cmtpgn_atach_content_melon_play")===true){__util.log("worker.bind.atach() C_EVENT_TYPE_ATACH_EXECUTE C_ATACH_TYPE_MUSIC_SONG PLAY, id=["+atachId+"], G_MENU_ID=["+G_MENU_ID+"]");var songAdultFlag=$atachBox.attr("data-song-adult-flag");commentObj.playSong(G_MENU_ID,atachId,(__util.isEmpty(songAdultFlag)!==true?songAdultFlag:"0"));$(this).blur();}else{if($this.is(".d_cmtpgn_atach_content_melon_download")===true){if(navigator.appVersion.indexOf("Win")!=-1){__util.log("worker.bind.atach() C_EVENT_TYPE_ATACH_EXECUTE C_ATACH_TYPE_MUSIC_SONG DOWN, id=["+atachId+"], G_MENU_ID=["+G_MENU_ID+"]");commentObj.goBuyProduct(__config.C_CMT_DUMMY_FORM_NAME,atachId,__config.C_POC_CONTS_TYPE_SONG_CODE,"",__config.C_POC_BUY_TYPE_ME_CODE,G_MENU_ID);}$(this).blur();}else{alert(__msg.CMTPGN004);}}}}}break;case __global.C_ATACH_TYPE_MUSIC_ALBUM:__util.log("worker.bind.atach() C_EVENT_TYPE_ATACH_EXECUTE C_ATACH_TYPE_MUSIC_ALBUM, href=["+$this.attr("href")+"]");if($this.is(".d_cmtpgn_atach_content_melon_artist")===true){artistId=__util.getValueFromUrl($this.attr("href"),"artistId");__util.log("worker.bind.atach() C_EVENT_TYPE_ATACH_EXECUTE C_ATACH_TYPE_MUSIC_ALBUM to ARTIST, id=["+artistId+"]");commentObj.goArtistDtl(artistId);}else{if($this.is(".d_cmtpgn_atach_content_melon_album")===true){__util.log("worker.bind.atach() C_EVENT_TYPE_ATACH_EXECUTE C_ATACH_TYPE_MUSIC_ALBUM to ALBUM");if($this.is(".d_cmtpgn_atach_content_melon_download")===true){albumId=atachId;__util.log("worker.bind.atach() C_EVENT_TYPE_ATACH_EXECUTE C_ATACH_TYPE_MUSIC_ALBUM to ALBUM DOWN, id=["+albumId+"]");}else{albumId=__util.getValueFromUrl($this.attr("href"),"albumId");__util.log("worker.bind.atach() C_EVENT_TYPE_ATACH_EXECUTE C_ATACH_TYPE_MUSIC_ALBUM to ALBUM, id=["+albumId+"]");}var albumOnlyFlag=$atachBox.attr("data-album-only-flag");var albumDiscountFlag=$atachBox.attr("data-album-discount-flag");var totalSongCnt=$atachBox.attr("data-total-song-count");if((__util.isEmpty(albumOnlyFlag)!==true&&albumOnlyFlag==="1")||(__util.isEmpty(albumDiscountFlag)!==true&&albumDiscountFlag==="1")||(__util.isEmpty(totalSongCnt)!==true&&Number(totalSongCnt)>__config.C_POC_CONTS_DOWNLOAD_AVAIL_COUNT)){var confirmMsg=__msg.CMTPGN601;if(__util.isEmpty(albumOnlyFlag)!==true&&albumOnlyFlag==="1"){confirmMsg=__msg.CMTPGN603;}if(__util.isEmpty(albumDiscountFlag)!==true&&albumDiscountFlag==="1"){confirmMsg=__msg.CMTPGN604;}if(__util.isEmpty(totalSongCnt)!==true&&Number(totalSongCnt)>__config.C_POC_CONTS_DOWNLOAD_AVAIL_COUNT){confirmMsg=__msg.CMTPGN605;}if(confirm(confirmMsg)===true){commentObj.goAlbumDtl(albumId);}else{$(this).blur();}}else{commentObj.goAlbumDtl(albumId);}}else{if($this.is(".d_cmtpgn_atach_content_melon_play")===true){__util.log("worker.bind.atach() C_EVENT_TYPE_ATACH_EXECUTE C_ATACH_TYPE_MUSIC_ALBUM PLAY, id=["+atachId+"], G_MENU_ID=["+G_MENU_ID+"]");commentObj.playAlbum(G_MENU_ID,atachId);$(this).blur();}else{if($this.is(".d_cmtpgn_atach_content_melon_download")===true){__util.log("worker.bind.atach() C_EVENT_TYPE_ATACH_EXECUTE C_ATACH_TYPE_MUSIC_ALBUM DOWN, id=["+atachId+"], G_MENU_ID=["+G_MENU_ID+"]");var albumOnlyFlag=$atachBox.attr("data-album-only-flag");if(navigator.appVersion.indexOf("Win")!=-1){if(albumOnlyFlag==="1"){commentObj.goBuyProduct(__config.C_CMT_DUMMY_FORM_NAME,atachId,__config.C_POC_CONTS_TYPE_ALBUM_CODE,"",__config.C_POC_BUY_TYPE_ME_CODE,G_MENU_ID);}else{commentObj.goBuyProduct(__config.C_CMT_DUMMY_FORM_NAME,atachId,__config.C_POC_CONTS_TYPE_ALBUM_CODE,"",__config.C_POC_BUY_TYPE_ME_CODE,G_MENU_ID,__config.C_POC_BUY_TYPE_ALBUM_SONG_CODE);}}$(this).blur();}else{alert(__msg.CMTPGN004);}}}}break;case __global.C_ATACH_TYPE_MUSIC_ARTIST:__util.log("worker.bind.atach() C_EVENT_TYPE_ATACH_EXECUTE C_ATACH_TYPE_MUSIC_ARTIST, href=["+$this.attr("href")+"]");if($this.is(".d_cmtpgn_atach_content_melon_artist")===true){artistId=__util.getValueFromUrl($this.attr("href"),"artistId");__util.log("worker.bind.atach() C_EVENT_TYPE_ATACH_EXECUTE C_ATACH_TYPE_MUSIC_ARTIST, id=["+artistId+"]");commentObj.goArtistDtl(artistId);}else{alert(__msg.CMTPGN004);}break;case __global.C_ATACH_TYPE_IMAGE:__util.log("worker.bind.atach() C_EVENT_TYPE_ATACH_EXECUTE C_ATACH_TYPE_IMAGE, href=["+$this.attr("href")+"]");var imageAddress=$this.attr("href");imageAddress=worker.bind.atach.image.setDimsOpt(imageAddress);var cmtId=$this.closest("li").attr("data-cmt-id");var originalImageViewModal="originalImageViewModal_"+cmtId;var originalImageView="originalImageView_"+cmtId;$("#"+originalImageViewModal).remove();if($this.is(".d_cmtpgn_atach_content_image")===true){if($this.next().is(".d_cmtpgn_atach_content_box")===true){__util.log("worker.bind.atach() C_EVENT_TYPE_ATACH_EXECUTE C_ATACH_TYPE_IMAGE already has d_cmtpgn_atach_content_box");}else{$this.after(_widget.renderWithTemplate("d_cmtpgn_atach_image_original_dsply_template",{imageOriginalUrl:imageAddress,originalImageViewModal:originalImageViewModal,originalImageView:originalImageView}));}var img=$("#"+originalImageView);var interval=setInterval(function(){if(img.length===1){if(img[0].complete===false){img.load(function(){$("#"+originalImageViewModal).width(Number(img.prop("naturalWidth"))+34);__util.log("> img.load - originalImageViewModal width:"+$("#"+originalImageViewModal).width()+", img width:"+img.width()+", img naturalWidth:"+img.prop("naturalWidth"));});}else{$("#"+originalImageViewModal).width(Number(img.prop("naturalWidth"))+34);__util.log("> img.modal - originalImageViewModal width:"+$("#"+originalImageViewModal).width()+", img width:"+img.width()+", img naturalWidth:"+img.prop("naturalWidth"));$this.next().modal();clearInterval(interval);}}},100);}else{alert(__msg.CMTPGN004);}break;case __global.C_ATACH_TYPE_VIDEO:__util.log("worker.bind.atach() C_EVENT_TYPE_ATACH_EXECUTE C_ATACH_TYPE_VIDEO, href=["+$this.attr("href")+"]");if($this.is(".d_cmtpgn_atach_content_melon_artist")===true){artistId=__util.getValueFromUrl($this.attr("href"),"artistId");__util.log("worker.bind.atach() C_EVENT_TYPE_ATACH_EXECUTE C_ATACH_TYPE_VIDEO to ARTIST, id=["+artistId+"]");commentObj.goArtistDtl(artistId);}else{if($this.is(".d_cmtpgn_atach_content_melon_song")===true){songId=__util.getValueFromUrl($this.attr("href"),"songId");__util.log("worker.bind.atach() C_EVENT_TYPE_ATACH_EXECUTE C_ATACH_TYPE_VIDEO to SONG, id=["+songId+"]");commentObj.goSongDtl(songId);}else{if($this.is(".d_cmtpgn_atach_content_melon_video")===true){var videoId=__util.getValueFromUrl($this.attr("href"),"mvId");__util.log("worker.bind.atach() C_EVENT_TYPE_ATACH_EXECUTE C_ATACH_TYPE_VIDEO to VIDEO, id=["+videoId+"]");commentObj.goVideoDtl(G_MENU_ID,videoId);}else{alert(__msg.CMTPGN004);}}}break;case __global.C_ATACH_TYPE_LINK_VIDEO:__util.log("worker.bind.atach() C_EVENT_TYPE_ATACH_EXECUTE C_ATACH_TYPE_LINK_VIDEO, href=["+$this.attr("href")+"]");if($this.is(".d_cmtpgn_atach_content_extern_video")===true){videoLinkUrl=$this.attr("href"),videoLinkTarget=$this.attr("target");videoLinkInfo=__util.parseQuery(videoLinkUrl);__util.openPopup(videoLinkUrl,videoLinkTarget,Number(videoLinkInfo.videoWidth)+60,Number(videoLinkInfo.videoHeight)+140,"scrollbars=no");}else{if($this.is(".d_cmtpgn_atach_content_extern_link")===true){genrlLinkUrl=$this.attr("href"),genrlLinkTarget=$this.attr("target");window.open(genrlLinkUrl,genrlLinkTarget);}else{alert(__msg.CMTPGN004);}}break;case __global.C_ATACH_TYPE_LINK_GENRL:__util.log("worker.bind.atach() C_EVENT_TYPE_ATACH_EXECUTE C_ATACH_TYPE_LINK_GENRL, href=["+$this.attr("href")+"]");if($this.is(".d_cmtpgn_atach_content_extern_link")===true){genrlLinkUrl=$this.attr("href"),genrlLinkTarget=$this.attr("target");window.open(genrlLinkUrl,genrlLinkTarget);}else{alert(__msg.CMTPGN004);}break;}__util.log("worker.bind.atach() C_EVENT_TYPE_ATACH_EXECUTE executed done.");});};worker.bind.atach.image=function(img){var cacheImage=document.createElement("img");cacheImage.src=worker.bind.atach.image.setDimsOpt(img);cache.push(cacheImage);};worker.bind.atach.image.setDimsOpt=function(img){var imageAddress=img;if(imageAddress!=null){var matchs=imageAddress.match(/resize\/[0-9]*x[0-9]*\//);if(matchs!=null&&matchs.length==1){var org=matchs[0];imageAddress=imageAddress.replace(org,org.slice(0,-1)+">/");}}return imageAddress;};worker.bind.recm=function(){if(G_CHNL_INFO.recmUseFlag===true){$G_CONTAINER.find("#d_cmtpgn_cmt_list_wrapper").off(C_EVENT_TYPE_RECM).on(C_EVENT_TYPE_RECM,"button.d_cmtpgn_cmt_recm_btn,button.d_cmtpgn_cmt_non_recm_btn,button.d_cmtpgn_adcmt_recm_btn,button.d_cmtpgn_adcmt_non_recm_btn",function(e){__util.log("worker.bind.recm() C_EVENT_TYPE_RECM executed.");var $this=$(this);__util.log("worker.bind.recm() C_EVENT_TYPE_RECM data-cmt-id=["+$this.closest("li").attr("data-cmt-id")+"]");__util.log("worker.bind.recm() C_EVENT_TYPE_RECM data-cmt-break=["+$this.closest("li").attr("data-cmt-break")+"]");__util.log("worker.bind.recm() C_EVENT_TYPE_RECM data-cmt-del=["+$this.closest("li").attr("data-cmt-del")+"]");__util.log("worker.bind.recm() C_EVENT_TYPE_RECM data-cmt-owner=["+$this.closest("li").attr("data-cmt-owner")+"]");__util.log("worker.bind.recm() recm.positive=["+$this.is(".positive")+"], recm.negative=["+$this.is(".negative")+"]");if(worker.constraint.readonly.recm()!==true){return;}if(worker.constraint.login()!==true){return;}if(worker.constraint.owner.recm($this.closest("li").attr("data-cmt-owner"))!==true){return;}var recmChk=false;var nonRecmChk=false;if($this.is(".d_cmtpgn_adcmt_recm_btn")===true||$this.is(".d_cmtpgn_adcmt_non_recm_btn")===true){var $adcmt=$G_CONTAINER.find("#d_cmtpgn_cmt_list_wrapper").find("ul>li>ul.d_cmtpgn_adcmt_list>li").filter('[data-cmt-id="'+$this.closest("li").attr("data-cmt-id")+'"]');if(worker.constraint.recm($this.closest("li").attr("data-cmt-break"),$this.closest("li").attr("data-cmt-del"),$this.closest("li").attr("data-cmt-owner"),$adcmt.find(".d_cmtpgn_adcmt_recm_btn").is(".on"),$adcmt.find(".d_cmtpgn_adcmt_non_recm_btn").is(".on"))!==true){return;}if($adcmt.find(".d_cmtpgn_adcmt_recm_btn").is(".on")){recmChk=true;}if($adcmt.find(".d_cmtpgn_adcmt_non_recm_btn").is(".on")){nonRecmChk=true;}}else{var $cmt=$G_CONTAINER.find("#d_cmtpgn_cmt_list_wrapper").find("ul>li").filter('[data-cmt-id="'+$this.closest("li").attr("data-cmt-id")+'"]');if(worker.constraint.recm($this.closest("li").attr("data-cmt-break"),$this.closest("li").attr("data-cmt-del"),$this.closest("li").attr("data-cmt-owner"),$cmt.find(".d_cmtpgn_cmt_recm_btn").is(".on"),$cmt.find(".d_cmtpgn_cmt_non_recm_btn").is(".on"))!==true){return;}if($cmt.find(".d_cmtpgn_cmt_recm_btn").is(".on")){recmChk=true;}if($cmt.find(".d_cmtpgn_cmt_non_recm_btn").is(".on")){nonRecmChk=true;}}var data={},callback=($this.closest("li").parent().is(".d_cmtpgn_adcmt_list")===true?worker.callback.adcmt.recm:worker.callback.cmt.recm);data.cmtPocType=G_CMT_POC_TYPE;data.pocId=G_POC_ID;data.chnlSeq=Number(G_CHNL_SEQ);data.contsRefValue=G_CONTS_REF_VALUE;data.cmtSeq=Number($this.closest("li").attr("data-cmt-id"));data.nonRecmFlag=($this.is(".negative")===true?true:false);if(recmChk==true&&data.nonRecmFlag==true){alert(__msg.MW114);return;}else{if(nonRecmChk==true&&data.nonRecmFlag==false){alert(__msg.MW115);return;}}var backdata={};backdata.mode=$this.hasClass("on")?"cancel":"insert";backdata.recommendStateKey=(data.cmtSeq+"-"+backdata.mode);G_RECOMMEND_STATE[backdata.recommendStateKey]=G_RECOMMEND_STATE[backdata.recommendStateKey]||{state:false};if(G_RECOMMEND_STATE[backdata.recommendStateKey].state==false){G_RECOMMEND_STATE[backdata.recommendStateKey]={state:true};if(backdata.mode=="cancel"){__api.recm.cancel(data,callback,backdata);}else{__api.recm.reg(data,callback,backdata);}}__util.log("worker.bind.recm() C_EVENT_TYPE_RECM executed done.");});}};worker.bind.reprt=function(){if(G_CHNL_INFO.reprtUseFlag===true){$G_CONTAINER.find("#d_cmtpgn_cmt_list_wrapper").off(C_EVENT_TYPE_REPRT).on(C_EVENT_TYPE_REPRT,"button.d_cmtpgn_cmt_reprt_btn,button.d_cmtpgn_adcmt_reprt_btn",function(e){__util.log("worker.bind.reprt() C_EVENT_TYPE_REPRT executed.");var $this=$(this);__util.log("worker.bind.reprt() C_EVENT_TYPE_REPRT data-cmt-id=["+$this.closest("li").attr("data-cmt-id")+"]");__util.log("worker.bind.reprt() C_EVENT_TYPE_REPRT data-cmt-break=["+$this.closest("li").attr("data-cmt-break")+"]");__util.log("worker.bind.reprt() C_EVENT_TYPE_REPRT data-cmt-del=["+$this.closest("li").attr("data-cmt-del")+"]");__util.log("worker.bind.reprt() C_EVENT_TYPE_REPRT data-cmt-owner=["+$this.closest("li").attr("data-cmt-owner")+"]");__util.log("worker.bind.reprt() C_EVENT_TYPE_REPRT data-member-nickname=["+($this.closest("li").find(".d_cmtpgn_member_nickname").text())+"]");if(worker.constraint.readonly.reprt()!==true){return;}if(worker.constraint.login()!==true){return;}if(worker.constraint.reprt($this.closest("li").attr("data-cmt-break"),$this.closest("li").attr("data-cmt-del"),$this.closest("li").attr("data-cmt-owner"))!==true){return;}var cmtNickname=$this.closest("li").find(".d_cmtpgn_member_nickname:eq(0)").text();var cmtLevel=($this.closest("li").parent().is(".d_cmtpgn_adcmt_list")===true?1:0);var cmtSeq=$this.closest("li").attr("data-cmt-id");$("#d_cmtpgn_reprt_reson").cmtTextControl({counting:true,limit:80,limitTarget:"#reprt_popup > div > div > ul > li.item.etc.d_input_check > div > span > em",allowPaste:true,autoResize:false});var $cmtReprtPopup=$G_CONTAINER.find("#reprt_popup");$cmtReprtPopup.on("click.reprt.reson.type","input:radio",function(){$("#reprt_popup > div > div > ul > li.item.etc.d_input_check > div > span > em").text("0");$("#reprt_popup > div > div > ul").find("label").each(function(index){var s=$(this).find(">strong");if(s.length>0){$(this).html(s.text());}});var $checked=$("#reprt_popup input:checked");$('#reprt_popup input:radio[name="reprt_radio"]').closest("li").removeClass("on");$checked.closest("li").addClass("on");if($checked.val()==="etc"){$("#d_cmtpgn_reprt_reson").show().removeAttr("readonly").attr("placeholder","").prop("disabled",false).val("").focus();}else{$("#d_cmtpgn_reprt_reson").attr("readonly","readonly").attr("placeholder","기타 항목 선택 후 입력해 주세요.").prop("disabled",true).val("");}});$("#reprt_popup").modal("open").focus();$(":focus").blur();worker.constraint.checkBreakMember.reprt();REPRT_CMT_OBJ.cmtSeq=$this.closest("li").attr("data-cmt-id");__util.log("worker.bind.reprt() C_EVENT_TYPE_REPRT executed done.");});}};worker.handler={};worker.handler.cmt={};worker.handler.cmt.post=function(editingCmtSeq){__util.log("@worker.handler.cmt.post() executed. editingCmtSeq=["+editingCmtSeq+"]");var $cmtInputLayout=(Number(editingCmtSeq)===__global.C_EMPTY_KEY?$G_CONTAINER.find("#d_cmtpgn_cmt_write_box"):$G_CONTAINER.find("#d_cmtpgn_cmt_list_wrapper").find("ul>li").filter('[data-cmt-id="'+Number(editingCmtSeq)+'"]').find(".d_cmtpgn_cmt_edit_box"));var $atachInputLayout=$cmtInputLayout.find(".d_cmtpgn_cmt_edit_area");var $atachEntryList=$atachInputLayout.find(".d_cmtpgn_atach_box");__util.log("worker.handler.cmt.post() $atachEntryList is",$atachEntryList);var atachEntryIndex=0,atachEntryList=[],syncpstEntryIndex=0,syncpstEntryList=[],atachTextList=[];$atachEntryList.each(function(index){var $this=$(this);__util.log("worker.handler.cmt.post() $atachEntryList["+(index)+"] is",$this);if($this.css("display")!=="none"){var _composite=function(atachOrder,$atachEntry){var atachInfo={};atachInfo.atachSeq=$atachEntry.attr("data-atach-seq");atachInfo.atachType=$atachEntry.attr("data-atach-type");atachInfo.atachValue=$atachEntry.attr("data-atach-value");atachInfo.atachDsplyOrder=atachOrder;switch($atachEntry.attr("data-atach-type")){case __global.C_ATACH_TYPE_TEXT:atachInfo.atachValue=__util.getCmtTextEditFormat($atachEntry.val());atachTextList.push(__util.getCmtTextEditFormat($atachEntry.val()));break;case __global.C_ATACH_TYPE_MUSIC_SONG:break;case __global.C_ATACH_TYPE_MUSIC_ALBUM:break;case __global.C_ATACH_TYPE_MUSIC_ARTIST:break;case __global.C_ATACH_TYPE_IMAGE:atachInfo.atachFileName=$atachEntry.attr("data-atach-name");break;case __global.C_ATACH_TYPE_VIDEO:break;case __global.C_ATACH_TYPE_LINK_VIDEO:atachInfo.atachVideoTitle=$atachEntry.attr("data-atach-title");atachInfo.atachVideoWidth=$atachEntry.attr("data-atach-width");atachInfo.atachVideoHeight=$atachEntry.attr("data-atach-height");atachInfo.atachThumbUrl=$atachEntry.find(".d_cmtpgn_atach_link_video_thumb_url").attr("src");break;case __global.C_ATACH_TYPE_LINK_GENRL:break;}return atachInfo;};atachEntryList[atachEntryIndex]=_composite((atachEntryIndex+1),$this);atachEntryIndex++;}});var $syncpstEntryList=$cmtInputLayout.find(".d_cmtpgn_syncpost_btn");__util.log("worker.handler.cmt.post() $syncpstEntryList is",$syncpstEntryList);$syncpstEntryList.each(function(index){if($(this).hasClass("facebook")===true&&$(this).hasClass("on")===true){syncpstEntryList[syncpstEntryIndex++]="facebook";}if($(this).hasClass("twitter")===true&&$(this).hasClass("on")===true){syncpstEntryList[syncpstEntryIndex++]="twitter";}});if(Number(editingCmtSeq)===__global.C_EMPTY_KEY){if(worker.constraint.cmt.reg(atachEntryList)!==true){setTimeout(function(){$atachEntryList.filter(":first").focus();},0);return false;}}else{if(worker.constraint.cmt.updt(atachEntryList)!==true){setTimeout(function(){$atachEntryList.filter(":first").focus();},0);return false;}}var secrtFlag=false;if(G_CHNL_INFO.secrtUseFlag===true){secrtFlag=$cmtInputLayout.find(".d_cmtpgn_secrt_flag").is(":checked");__util.log("worker.handler.cmt.post() secrtFlag=["+secrtFlag+"]");}var data={},callback=(Number(editingCmtSeq)===__global.C_EMPTY_KEY?worker.callback.cmt.reg:worker.callback.cmt.updt);var backdata={};backdata.syncpstEntryList=syncpstEntryList;backdata.syncpstMessage=atachTextList.join("");data.cmtPocType=G_CMT_POC_TYPE;data.pocId=G_POC_ID;data.chnlSeq=Number(G_CHNL_SEQ);data.contsRefValue=G_CONTS_REF_VALUE;data.contsRefUrl=G_CONTS_REF_URL;data.cmtSeq=Number(editingCmtSeq);data.secrtFlag=secrtFlag;data.atachList=atachEntryList;data.syncpstList=syncpstEntryList;if(Number(editingCmtSeq)===__global.C_EMPTY_KEY){__api.cmt.reg(data,callback,backdata);}else{__api.cmt.updt(data,callback,backdata);}if(Number(editingCmtSeq)===__global.C_EMPTY_KEY){G_ATACH_CONSTRAINT_REG_COUNT=0;__util.log("worker.handler.cmt.post() GLOBAL G_ATACH_CONSTRAINT_REG_COUNT resettled");}else{G_ATACH_CONSTRAINT_UPDT_COUNT=0;__util.log("worker.handler.cmt.post() GLOBAL G_ATACH_CONSTRAINT_UPDT_COUNT resettled");}__util.log("@worker.handler.cmt.post() executed done.");return true;};worker.handler.atach={};worker.handler.atach.text=function(editingCmtSeq,editingAtachSeq){__util.log("@worker.handler.atach.text() executed. editingCmtSeq=["+editingCmtSeq+"], editingAtachSeq=["+editingAtachSeq+"]");var $cmtInputLayout=(Number(editingCmtSeq)===__global.C_EMPTY_KEY?$G_CONTAINER.find("#d_cmtpgn_cmt_write_box"):$G_CONTAINER.find("#d_cmtpgn_cmt_list_wrapper").find("ul>li").filter('[data-cmt-id="'+Number(editingCmtSeq)+'"]').find(".d_cmtpgn_cmt_edit_box"));var $atachInputLayout=$cmtInputLayout.find(".d_cmtpgn_cmt_edit_area");$atachInputLayout.append(worker.render.atach.entry.edit(editingCmtSeq,{atachSeq:editingAtachSeq,atachType:__global.C_ATACH_TYPE_TEXT}));var $last=$atachInputLayout.find("textarea:last");$last.cmtTextControl({limit:G_CHNL_INFO.cmtRegMaxLength,limitTarget:$cmtInputLayout.find(".d_cmtpgn_char_cnt"),limitClassName:"textarea.d_cmtpgn_atach_box",allowPaste:G_CHNL_INFO.pastePermFlag});$last.autosize();__util.log("@worker.handler.atach.text() executed done.");};worker.handler.atach.music={};worker.handler.atach.music.srch=function(editingCmtSeq,editingAtachSeq,musicType,srchWord,sortType,pageNo){__util.log("@worker.handler.atach.music.srch() executed. editingCmtSeq=["+editingCmtSeq+"], editingAtachSeq=["+editingAtachSeq+"], musicType=["+musicType+"], srchWord=["+srchWord+"], sortType=["+sortType+"], pageNo=["+pageNo+"]");var backdata={editingCmtSeq:editingCmtSeq,editingAtachSeq:editingAtachSeq,loader:worker.render.atach.music.loading.start};var data={},callback=worker.callback.atach.music.srch;data.cmtPocType=G_CMT_POC_TYPE;data.pocId=G_POC_ID;data.musicType=musicType;data.srchWord=srchWord;data.sortType=Number(sortType);data.pageNo=Number(pageNo);data.pageSize=__global.C_ATACH_MELON_DSPLY_PAGE_SIZE;data.pageGroupSize=__global.C_ATACH_MELON_DSPLY_GROUP_SIZE;__api.atach.melon.srch(data,callback,backdata);__util.log("@worker.handler.atach.music.srch() executed done.");};worker.handler.atach.music.song=function(editingCmtSeq,editingAtachSeq,artistId,artistName,albumId,albumName,albumImagePath,songId,songName,songAdultFlag,songAvailFlag,songHoldBackFlag,songFreezoneFlag,songHotSongFlag){__util.log("@worker.handler.music.song() executed. editingCmtSeq=["+editingCmtSeq+"], editingAtachSeq=["+editingAtachSeq+"], artistId=["+artistId+"], artistName=["+artistName+"], albumImagePath=["+albumImagePath+"], albumId=["+albumId+"], albumName=["+albumName+"], songId=["+songId+"], songName=["+songName+"], songAdultFlag=["+songAdultFlag+"], songAvailFlag=["+songAvailFlag+"], songHoldBackFlag=["+songHoldBackFlag+"], songFreezoneFlag=["+songFreezoneFlag+"], songHotSongFlag=["+songHotSongFlag+"]");worker.callback.atach.music.song(editingCmtSeq,editingAtachSeq,artistId,artistName,albumId,albumName,albumImagePath,songId,songName,songAdultFlag,songAvailFlag,songHoldBackFlag,songFreezoneFlag,songHotSongFlag);__util.log("@worker.handler.music.song() executed.");};worker.handler.atach.music.album=function(editingCmtSeq,editingAtachSeq,artistId,artistName,albumId,albumName,albumImagePath,albumIssueDate,albumAvailFlag){__util.log("@worker.handler.music.album() executed. editingCmtSeq=["+editingCmtSeq+"], editingAtachSeq=["+editingAtachSeq+"], artistId=["+artistId+"], artistName=["+artistName+"], albumId=["+albumId+"], albumName=["+albumName+"], albumImagePath=["+albumImagePath+"], albumIssueDate=["+albumIssueDate+"], albumAvailFlag=["+albumAvailFlag+"]");worker.callback.atach.music.album(editingCmtSeq,editingAtachSeq,artistId,artistName,albumId,albumName,albumImagePath,albumIssueDate,albumAvailFlag);__util.log("@worker.handler.music.album() executed.");};worker.handler.atach.music.artist=function(editingCmtSeq,editingAtachSeq,artistId,artistName,artistImagePath,artistNationalityName,artistSexTypeName,artistActTypeName,artistGnrTypeName,artistFanCnt){__util.log("@worker.handler.music.artist() executed. editingCmtSeq=["+editingCmtSeq+"], editingAtachSeq=["+editingAtachSeq+"], artistId=["+artistId+"], artistName=["+artistName+"], artistImagePath=["+artistImagePath+"], artistNationalityName=["+artistNationalityName+"], artistSexTypeName=["+artistSexTypeName+"], artistActTypeName=["+artistActTypeName+"], artistGnrTypeName=["+artistGnrTypeName+"], artistFanCnt=["+artistFanCnt+"]");worker.callback.atach.music.artist(editingCmtSeq,editingAtachSeq,artistId,artistName,artistImagePath,artistNationalityName,artistSexTypeName,artistActTypeName,artistGnrTypeName,artistFanCnt);__util.log("@worker.handler.music.artist() executed.");};worker.handler.atach.video=function(editingCmtSeq,editingAtachSeq,artistId,artistName,videoId,videoTitle,videoImagePath,videoAdultFlag,videoAgeLevel,videoPlayTime,videoViewCnt,videoIssueDate,videoAvailFlag,songId){__util.log("@worker.handler.atach.video() executed. editingCmtSeq=["+editingCmtSeq+"], editingAtachSeq=["+editingAtachSeq+"], artistId=["+artistId+"], artistName=["+artistName+"], videoId=["+videoId+"], videoTitle=["+videoTitle+"], videoImagePath=["+videoImagePath+"], videoAdultFlag=["+videoAdultFlag+"], videoAgeLevel=["+videoAgeLevel+"], videoPlayTime=["+videoPlayTime+"], videoViewCnt=["+videoViewCnt+"], videoIssueDate=["+videoIssueDate+"], videoAvailFlag=["+videoAvailFlag+"], songId=["+songId+"]");worker.callback.atach.video(editingCmtSeq,editingAtachSeq,artistId,artistName,videoId,videoTitle,videoImagePath,videoAdultFlag,videoAgeLevel,videoPlayTime,videoViewCnt,videoIssueDate,videoAvailFlag,songId);__util.log("@worker.handler.atach.video() executed.");};worker.handler.atach.video.srch=function(editingCmtSeq,editingAtachSeq,srchWord,sortType,pageNo){__util.log("@worker.handler.atach.video.srch() executed. editingCmtSeq=["+editingCmtSeq+"], editingAtachSeq=["+editingAtachSeq+"], srchWord=["+srchWord+"], sortType=["+sortType+"], pageNo=["+pageNo+"]");var backdata={editingCmtSeq:editingCmtSeq,editingAtachSeq:editingAtachSeq,loader:worker.render.atach.video.loading.start};var data={},callback=worker.callback.atach.video.srch;data.cmtPocType=G_CMT_POC_TYPE;data.pocId=G_POC_ID;data.musicType=__global.C_ATACH_MELON_SRCH_TYPE_VIDEO;data.srchWord=srchWord;data.sortType=Number(sortType);data.pageNo=Number(pageNo);data.pageSize=__global.C_ATACH_MELON_DSPLY_PAGE_SIZE;data.pageGroupSize=__global.C_ATACH_MELON_DSPLY_GROUP_SIZE;__api.atach.melon.srch(data,callback,backdata);__util.log("@worker.handler.atach.video.srch() executed done.");};worker.handler.atach.image=function(editingCmtSeq,editingAtachSeq,fileName){__util.log("@worker.handler.atach.image() executed. editingCmtSeq=["+editingCmtSeq+"], editingAtachSeq=["+editingAtachSeq+"], fileName=["+fileName+"]");var targetFilePath=__util.getImageUploadPath(__websvc.Auth.getMemberKey());var targetFileName=__util.getImageUploadName(fileName);var backdata={editingCmtSeq:editingCmtSeq,editingAtachSeq:editingAtachSeq,targetFilePath:targetFilePath,targetFileName:targetFileName,fileName:fileName};var data={},callback=worker.callback.atach.image.auth;data.VOD=targetFileName;__api.atach.image.cdn.auth(data,callback,backdata);__util.log("@worker.handler.atach.image() executed done.");};worker.handler.atach.link=function(editingCmtSeq,editingAtachSeq,linkType,linkUrl){__util.log("@worker.handler.atach.link() executed. editingCmtSeq=["+editingCmtSeq+"], editingAtachSeq=["+editingAtachSeq+"], linkType=["+linkType+"], linkUrl=["+linkUrl+"]");var backdata={editingCmtSeq:editingCmtSeq,editingAtachSeq:editingAtachSeq,linkType:linkType,linkUrl:linkUrl};var data={};if(linkType===__global.C_ATACH_TYPE_LINK_VIDEO){data.youtubeUrl=linkUrl;var callback=worker.callback.atach.link;__api.atach.link.video.oembed(data,callback,backdata);}else{data.backdata=backdata;worker.callback.atach.link(data);}__util.log("@worker.handler.atach.link() executed done.");};worker.reset={};worker.reset.atach={};worker.reset.atach.music=function(editingCmtSeq,hideFlag){__util.log("@worker.reset.atach.music() executed. editingCmtSeq=["+editingCmtSeq+"], hideFlag=["+hideFlag+"]");var $cmtInputLayout=(Number(editingCmtSeq)===__global.C_EMPTY_KEY?$G_CONTAINER.find("#d_cmtpgn_cmt_write_box"):$G_CONTAINER.find("#d_cmtpgn_cmt_list_wrapper").find("ul>li").filter('[data-cmt-id="'+Number(editingCmtSeq)+'"]').find(".d_cmtpgn_cmt_edit_box"));var $atachMusicLayer=$cmtInputLayout.find(".d_cmtpgn_atach_music_layer");$atachMusicLayer.find("input.d_cmtpgn_atach_music_srch_input").val("").placeholder("update");var $srchInputLayout=$atachMusicLayer.find(".d_cmtpgn_atach_srch_box");if($srchInputLayout.find(".d_cmtpgn_atach_suggest_keyword").length>0){$srchInputLayout.removeClass("on").find(".d_cmtpgn_atach_suggest_keyword").remove();}if($srchInputLayout.parent().find(".d_cmtpgn_atach_music_srch_option").length>0){$atachMusicLayer.find(".d_cmtpgn_atach_music_srch_option, .d_cmtpgn_atach_music_srch_list, .d_cmtpgn_atach_music_srch_navigator").remove();}$atachMusicLayer.find(".d_cmtpgn_noresult").show().andSelf().find(".d_cmtpgn_fallback").hide();if(hideFlag===true){$atachMusicLayer.find(".d_cmtpgn_layer_close_btn").trigger("click");}__util.log("@worker.reset.atach.music() executed done.");};worker.reset.atach.video=function(editingCmtSeq,hideFlag){__util.log("@worker.reset.atach.video() executed. editingCmtSeq=["+editingCmtSeq+"], hideFlag=["+hideFlag+"]");var $cmtInputLayout=(Number(editingCmtSeq)===__global.C_EMPTY_KEY?$G_CONTAINER.find("#d_cmtpgn_cmt_write_box"):$G_CONTAINER.find("#d_cmtpgn_cmt_list_wrapper").find("ul>li").filter('[data-cmt-id="'+Number(editingCmtSeq)+'"]').find(".d_cmtpgn_cmt_edit_box"));var $atachVideoLayer=$cmtInputLayout.find(".d_cmtpgn_atach_video_layer");$atachVideoLayer.find("input.d_cmtpgn_atach_video_srch_input").val("").placeholder("update");var $srchInputLayout=$atachVideoLayer.find(".d_cmtpgn_atach_srch_box");if($srchInputLayout.find(".d_cmtpgn_atach_suggest_keyword").length>0){$srchInputLayout.removeClass("on").find(".d_cmtpgn_atach_suggest_keyword").remove();}if($srchInputLayout.parent().find(".d_cmtpgn_atach_video_srch_option").length>0){$atachVideoLayer.find(".d_cmtpgn_atach_video_srch_option, .d_cmtpgn_atach_video_srch_list, .d_cmtpgn_atach_video_srch_navigator").remove();}$atachVideoLayer.find(".d_cmtpgn_noresult").show().andSelf().find(".d_cmtpgn_fallback").hide();if(hideFlag===true){$atachVideoLayer.find(".d_cmtpgn_layer_close_btn").trigger("click");}__util.log("@worker.reset.atach.video() executed done.");};worker.reset.atach.image=function(editingCmtSeq,hideFlag){__util.log("@worker.reset.atach.image() executed. editingCmtSeq=["+editingCmtSeq+"], hideFlag=["+hideFlag+"]");var $cmtInputLayout=(Number(editingCmtSeq)===__global.C_EMPTY_KEY?$G_CONTAINER.find("#d_cmtpgn_cmt_write_box"):$G_CONTAINER.find("#d_cmtpgn_cmt_list_wrapper").find("ul>li").filter('[data-cmt-id="'+Number(editingCmtSeq)+'"]').find(".d_cmtpgn_cmt_edit_box"));var $atachImageLayer=$cmtInputLayout.find(".d_cmtpgn_atach_image_layer");var $file=$atachImageLayer.find("input.d_cmtpgn_atach_image_input");var $form=$file.closest("form");$form.find("iframe").remove();$form.find("input[type=hidden]").remove();$form.get(0).reset();if(hideFlag===true){$atachImageLayer.find(".d_cmtpgn_layer_close_btn").trigger("click");}if(G_UPLOAD_HANDLER!==null){G_UPLOAD_HANDLER=null;__util.log("worker.reset.atach.image() G_UPLOAD_HANDLER released");}__util.log("@worker.reset.atach.image() executed done.");};worker.reset.atach.link=function(editingCmtSeq,hideFlag){__util.log("@worker.reset.atach.link() executed. editingCmtSeq=["+editingCmtSeq+"], hideFlag=["+hideFlag+"]");var $cmtInputLayout=(Number(editingCmtSeq)===__global.C_EMPTY_KEY?$G_CONTAINER.find("#d_cmtpgn_cmt_write_box"):$G_CONTAINER.find("#d_cmtpgn_cmt_list_wrapper").find("ul>li").filter('[data-cmt-id="'+Number(editingCmtSeq)+'"]').find(".d_cmtpgn_cmt_edit_box"));var $atachLinkLayer=$cmtInputLayout.find(".d_cmtpgn_atach_link_layer");$atachLinkLayer.find("select").selectbox("selectedIndex",0);$atachLinkLayer.find("input.d_cmtpgn_atach_link_input").val("").placeholder("update");if(hideFlag===true){$atachLinkLayer.find(".d_cmtpgn_layer_close_btn").trigger("click");}__util.log("@worker.reset.atach.link() executed done.");};worker.constraint={};worker.constraint.login=function(){__util.log("@worker.constraint.login() executed.");if(__websvc.Auth.isMelonLogin()!==true){commentObj.goLogIn();return false;}__util.log("@worker.constraint.login() executed done.");return true;};worker.constraint.member=function(){__util.log("@worker.constraint.member() executed.");if(G_MEMBER_INFO.isBreakMember===true){alert(__msg.MW002);return false;}if(G_MEMBER_INFO.isBreakIp===true){alert(__msg.MW002);return false;}__util.log("@worker.constraint.member() executed done.");return true;};worker.constraint.readonly={};worker.constraint.readonly.post=function(){__util.log("@worker.constraint.readonly.post() executed.");if(G_CHNL_INFO.blindContsCmtWriteFlag===true){alert(G_CHNL_INFO.blindContsDsplyText);return false;}__util.log("@worker.constraint.readonly.post() executed done.");return true;};worker.constraint.readonly.recm=function(){__util.log("@worker.constraint.readonly.recm() executed.");if(G_CHNL_INFO.blindContsCmtWriteFlag===true){alert(G_CHNL_INFO.blindContsDsplyText);return false;}__util.log("@worker.constraint.readonly.recm() executed done.");return true;};worker.constraint.owner={};worker.constraint.owner.recm=function(owner){if(owner=="on"){alert(__msg.CMTPGN007);return false;}__util.log("@worker.constraint.owner.recm() executed done.");return true;};worker.constraint.checkBreakMember={};worker.constraint.checkBreakMember.reprt=function(){__util.log("@worker.constraint.checkBreakMember.reprt() executed.");__api.reprt.checkBreakMember({},function(res){var result=res.result;if(__util.isDefined(res.STATUS)===true&&res.STATUS===__global.C_STATUS_SUCCESS){if(result!=undefined&&result!=null&&result!=""){if(result.breakMemberFlag===true){alert(__msg.MW002);$("#reprt_popup").modal("close");}}}});};worker.constraint.readonly.reprt=function(){__util.log("@worker.constraint.readonly.reprt() executed.");if(G_CHNL_INFO.blindContsCmtWriteFlag===true){alert(G_CHNL_INFO.blindContsDsplyText);return false;}__util.log("@worker.constraint.readonly.reprt() executed done.");return true;};worker.constraint.timer={};worker.constraint.timer.set=function(){__util.log("@worker.constraint.timer.set() executed. timer=["+G_SPAM_INFO.cmtRegPosblMin+"]");__util.setSpamTimer(G_SPAM_INFO.cmtRegPosblMin);};worker.constraint.timer.check=function(){__util.log("@worker.constraint.timer.check() executed. timer=["+G_SPAM_INFO.cmtRegPosblMin+"]");return __util.checkSpamTimer(G_SPAM_INFO.cmtRegPosblMin);};worker.constraint.syncpost={};worker.constraint.syncpost.facebook=function(){__util.log("@worker.constraint.syncpost.facebook() executed.");if(__util.isEmpty(G_MEMBER_INFO.snsInfo)!==true){__util.log("@worker.constraint.syncpost.facebook() facebookConnectFlag=["+G_MEMBER_INFO.snsInfo.facebookConnectFlag+"], facebookConnectExpiredFlag=["+G_MEMBER_INFO.snsInfo.facebookConnectExpiredFlag+"]");}if(__util.isEmpty(G_MEMBER_INFO.snsInfo)===true){alert(__msg.CMTPGN501);return false;}if(G_MEMBER_INFO.snsInfo.facebookConnectInfoStatus!=="0"){alert(__msg.CMTPGN505);return false;}if(G_MEMBER_INFO.snsInfo.facebookConnectFlag!==true){alert(__msg.CMTPGN501);return false;}if(__util.isEmpty(G_MEMBER_INFO.snsInfo)!==true&&G_MEMBER_INFO.snsInfo.facebookConnectExpiredFlag===true){alert(__msg.CMTPGN502);return false;}__util.log("@worker.constraint.syncpost.facebook() executed done.");return true;};worker.constraint.syncpost.twitter=function(){__util.log("@worker.constraint.syncpost.twitter() executed.");if(__util.isEmpty(G_MEMBER_INFO.snsInfo)!==true){__util.log("@worker.constraint.syncpost.twitter() twitterConnectFlag=["+G_MEMBER_INFO.snsInfo.twitterConnectFlag+"], twitterConnectExpiredFlag=["+G_MEMBER_INFO.snsInfo.twitterConnectExpiredFlag+"]");}if(__util.isEmpty(G_MEMBER_INFO.snsInfo)===true){alert(__msg.CMTPGN501);return false;}if(G_MEMBER_INFO.snsInfo.twitterConnectInfoStatus!=="0"){alert(__msg.CMTPGN505);return false;}if(G_MEMBER_INFO.snsInfo.twitterConnectFlag!==true){alert(__msg.CMTPGN503);return false;}if(__util.isEmpty(G_MEMBER_INFO.snsInfo)!==true&&G_MEMBER_INFO.snsInfo.twitterConnectExpiredFlag===true){alert(__msg.CMTPGN504);return false;}__util.log("@worker.constraint.syncpost.twitter() executed done.");return true;};worker.constraint.atach={};worker.constraint.atach.cmt=function(editingCmtSeq){__util.log("@worker.constraint.atach.cmt() executed.");if(G_CHNL_INFO.atachUseFlag===true&&G_CHNL_INFO.atachMaxCnt>0){if(Number(editingCmtSeq)===__global.C_EMPTY_KEY){if(G_ATACH_CONSTRAINT_REG_COUNT>=G_CHNL_INFO.atachMaxCnt){__util.log("worker.constraint.atach.cmt() G_ATACH_CONSTRAINT_REG_COUNT >= G_CHNL_INFO.atachMaxCnt");if(G_CHNL_INFO.atachMaxCnt===1){__util.log("worker.constraint.atach.cmt() G_CHNL_INFO.atachMaxCnt == 1, SHOULD REMOVE LAST ONE");}else{alert(__util.format(__msg.CMTPGN107,G_CHNL_INFO.atachMaxCnt));return false;}}}else{if(G_ATACH_CONSTRAINT_UPDT_COUNT>=G_CHNL_INFO.atachMaxCnt){__util.log("worker.constraint.atach.cmt() G_ATACH_CONSTRAINT_UPDT_COUNT >= G_CHNL_INFO.atachMaxCnt");if(G_CHNL_INFO.atachMaxCnt===1){__util.log("worker.constraint.atach.cmt() G_CHNL_INFO.atachMaxCnt == 1, SHOULD REMOVE LAST ONE");}else{alert(__util.format(__msg.CMTPGN107,G_CHNL_INFO.atachMaxCnt));return false;}}}}else{__util.log("worker.constraint.atach.cmt() atachUseFlag=["+G_CHNL_INFO.atachUseFlag+"], atachMaxCnt=["+G_CHNL_INFO.atachMaxCnt+"]");alert(__msg.CMTPGN001);return false;}__util.log("@worker.constraint.atach.cmt() executed done.");return true;};worker.constraint.atach.music={};worker.constraint.atach.music.srch=function(editingCmtSeq,srchWord){__util.log("@worker.constraint.atach.music.srch() executed. editingCmtSeq=["+editingCmtSeq+"], srchWord=["+srchWord+"]");if(worker.constraint.atach.cmt(editingCmtSeq)!==true){return false;}if(__util.isEmpty(srchWord)===true){alert(__msg.CMTPGN102);return false;}if(srchWord.length<__global.C_ATACH_MELON_MIN_SRCH_WORD){alert(__util.format(__msg.CMTPGN103,__global.C_ATACH_MELON_MIN_SRCH_WORD));return false;}if(srchWord.length>__global.C_ATACH_MELON_MAX_SRCH_WORD){alert(__util.format(__msg.CMTPGN104,__global.C_ATACH_MELON_MAX_SRCH_WORD));return false;}__util.log("@worker.constraint.atach.music.srch() executed done.");return true;};worker.constraint.atach.video={};worker.constraint.atach.video.srch=function(editingCmtSeq,srchWord){__util.log("@worker.constraint.atach.video.srch() executed. editingCmtSeq=["+editingCmtSeq+"], srchWord=["+srchWord+"]");if(worker.constraint.atach.cmt(editingCmtSeq)!==true){return false;}if(__util.isEmpty(srchWord)===true){alert(__msg.CMTPGN102);return false;}if(srchWord.length<__global.C_ATACH_MELON_MIN_SRCH_WORD){alert(__util.format(__msg.CMTPGN103,__global.C_ATACH_MELON_MIN_SRCH_WORD));return false;}if(srchWord.length>__global.C_ATACH_MELON_MAX_SRCH_WORD){alert(__util.format(__msg.CMTPGN104,__global.C_ATACH_MELON_MAX_SRCH_WORD));return false;}__util.log("@worker.constraint.atach.video.srch() executed done.");return true;};worker.constraint.atach.image=function(editingCmtSeq,fileName){__util.log("@worker.constraint.atach.image() executed. editingCmtSeq=["+editingCmtSeq+"], fileName=["+fileName+"]");if(worker.constraint.atach.cmt(editingCmtSeq)!==true){return false;}if(__util.isEmpty(fileName)===true||fileName.lastIndexOf(".")<1){alert(__msg.CMTPGN108);return false;}var fileExt=fileName.substr(fileName.lastIndexOf(".")+1);__util.log("worker.constraint.atach.image() executed. fileExt=["+fileExt+"]");for(var i=0,allowExtsSize=__global.C_ATACH_ALLOW_EXT_LIST.length;i<allowExtsSize;i++){if(fileExt.toLowerCase()===__global.C_ATACH_ALLOW_EXT_LIST[i].toLowerCase()){return true;}}alert(__util.format(__msg.MW051,__global.C_ATACH_ALLOW_EXT_LIST.toString()));__util.log("@worker.constraint.atach.image() executed done.");return false;};worker.constraint.atach.link=function(editingCmtSeq,linkType,linkUrl){__util.log("@worker.constraint.atach.link() executed. editingCmtSeq=["+editingCmtSeq+"], linkType=["+linkType+"], linkUrl=["+linkUrl+"]");if(worker.constraint.atach.cmt(editingCmtSeq)!==true){return false;}if(__websvc.valid.url(linkUrl)!==true){alert(__msg.CMTPGN109);return false;}if(linkType===__global.C_ATACH_TYPE_LINK_VIDEO){__util.log("worker.constraint.atach.link() G_SPAM_INFO.vdoLinkAtachPermUrlList is",G_SPAM_INFO.vdoLinkAtachPermUrlList);var vdoLinkAtachPermUrlList=G_SPAM_INFO.vdoLinkAtachPermUrlList;if(__util.isDefined(vdoLinkAtachPermUrlList)===true&&vdoLinkAtachPermUrlList.length>0){for(var i=0,permUrlListSize=vdoLinkAtachPermUrlList.length;i<permUrlListSize;i++){__util.log("worker.constraint.atach.link() vdoLinkAtachPermUrlList[i].vdoLinkAtachPermUrl=["+vdoLinkAtachPermUrlList[i].vdoLinkAtachPermUrl+"]");if(linkUrl.toLowerCase().indexOf(vdoLinkAtachPermUrlList[i].vdoLinkAtachPermUrl.toLowerCase())>-1){return true;}}}__util.log("worker.constraint.atach.link() NOT IN WHITE=["+linkUrl+"]");alert(__msg.MW064);return false;}if(linkType===__global.C_ATACH_TYPE_LINK_GENRL){var genrlLinkAtachBreakUrlList=G_SPAM_INFO.genrlLinkAtachBreakUrlList;if(__util.isDefined(genrlLinkAtachBreakUrlList)===true&&genrlLinkAtachBreakUrlList.length>0){for(var j=0,breakUrlListSize=genrlLinkAtachBreakUrlList.length;j<breakUrlListSize;j++){if(linkUrl.toLowerCase().indexOf(genrlLinkAtachBreakUrlList[j].genrlLinkAtachBreakUrl.toLowerCase())>-1){__util.log("worker.constraint.atach.link() genrlLinkAtachBreakUrlList[j].breakUrl=["+genrlLinkAtachBreakUrlList[j].genrlLinkAtachBreakUrl+"]");alert(__msg.CMTPGN111);return false;}}}}__util.log("@worker.constraint.atach.link() executed done.");return true;};worker.constraint.cmt={};worker.constraint.cmt.reg=function(atachEntryList){__util.log("@worker.constraint.cmt.reg() executed. atachEntryList is",atachEntryList);if(worker.constraint.cmt.post(atachEntryList)!==true){return false;}__util.log("@worker.constraint.cmt.reg() executed done.");return true;};worker.constraint.cmt.modify=function(breakMark,delMark,ownerMark){__util.log("@worker.constraint.cmt.modify() executed. breakMark=["+breakMark+"], delMark=["+delMark+"], ownerMark=["+ownerMark+"]");if(breakMark==="on"){alert(__msg.CMTPGN007);return false;}if(delMark==="on"){alert(__msg.CMTPGN008);return false;}if(ownerMark!=="on"){alert(__msg.CMTPGN006);return false;}__util.log("@worker.constraint.cmt.modify() executed done.");return true;};worker.constraint.cmt.cancel=function(){__util.log("@worker.constraint.cmt.cancel() executed.");if(confirm(__msg.MW065)===false){return false;}__util.log("@worker.constraint.cmt.cancel() executed done.");return true;};worker.constraint.cmt.updt=function(atachEntryList){__util.log("@worker.constraint.cmt.updt() executed. atachEntryList is",atachEntryList);if(worker.constraint.cmt.post(atachEntryList)!==true){return false;}__util.log("@worker.constraint.cmt.updt() executed done.");return true;};worker.constraint.cmt.post=function(atachEntryList){__util.log("@worker.constraint.cmt.post() executed. atachEntryList is",atachEntryList);var atachText="",atachCount=0;for(var i=0,atachEntryListSize=atachEntryList.length;i<atachEntryListSize;i++){__util.log("worker.constraint.cmt.post() atachEntryList["+(i)+"].atachType=["+atachEntryList[i].atachType+"]");switch(atachEntryList[i].atachType){case __global.C_ATACH_TYPE_TEXT:atachText+=(__util.isEmpty(atachEntryList[i].atachValue)===true?"":atachEntryList[i].atachValue);break;case __global.C_ATACH_TYPE_MUSIC_SONG:atachCount++;break;case __global.C_ATACH_TYPE_MUSIC_ALBUM:atachCount++;break;case __global.C_ATACH_TYPE_MUSIC_ARTIST:atachCount++;break;case __global.C_ATACH_TYPE_IMAGE:atachCount++;break;case __global.C_ATACH_TYPE_VIDEO:atachCount++;break;case __global.C_ATACH_TYPE_LINK_VIDEO:atachCount++;break;case __global.C_ATACH_TYPE_LINK_GENRL:atachCount++;break;}}__util.log("worker.constraint.cmt.post() atachText.length=["+atachText.length+"], cmtRegMinLength=["+G_CHNL_INFO.cmtRegMinLength+"], cmtRegMaxLength=["+G_CHNL_INFO.cmtRegMaxLength+"]");if(atachCount>G_CHNL_INFO.atachMaxCnt){alert(__util.format(__msg.CMTPGN107,G_CHNL_INFO.atachMaxCnt));return false;}if(atachCount>0){if(__util.isEmpty(atachText)===true){alert(__msg.CMTPGN105);return false;}if(atachText.length<G_CHNL_INFO.cmtRegMinLength){alert(__util.format(__msg.MW007,G_CHNL_INFO.cmtRegMinLength));return false;}if(__util.isEmpty(atachText)!==true&&atachText.length>G_CHNL_INFO.cmtRegMaxLength){alert(__msg.MW005);return false;}}else{if(__util.isEmpty(atachText)===true){alert(__msg.CMTPGN105);return false;}if(atachText.length<G_CHNL_INFO.cmtRegMinLength){alert(__util.format(__msg.MW007,G_CHNL_INFO.cmtRegMinLength));return false;}if(atachText.length>G_CHNL_INFO.cmtRegMaxLength){alert(__msg.MW005);return false;}}__util.log("@worker.constraint.cmt.post() executed done.");return true;};worker.constraint.cmt.del=function(breakMark,delMark,ownerMark){__util.log("@worker.constraint.cmt.del() executed. breakMark=["+breakMark+"], delMark=["+delMark+"], ownerMark=["+ownerMark+"]");if(breakMark==="on"){alert(__msg.CMTPGN009);return false;}if(delMark==="on"){alert(__msg.CMTPGN010);return false;}if(ownerMark!=="on"){alert(__msg.CMTPGN006);return false;}if(confirm((G_CHNL_INFO.adcmtUseFlag===true?__msg.MW042:__msg.MW066))===false){return false;}__util.log("@worker.constraint.cmt.del() executed done.");return true;};worker.constraint.adcmt={};worker.constraint.adcmt.write=function(breakMark,delMark){__util.log("@worker.constraint.adcmt.write() executed. breakMark=["+breakMark+"], delMark=["+delMark+"]");if(breakMark==="on"){alert(__msg.CMTPGN011);return false;}if(delMark==="on"){alert(__msg.CMTPGN012);return false;}__util.log("@worker.constraint.adcmt.write() executed done.");return true;};worker.constraint.adcmt.reg=function(breakMark,delMark,contents){__util.log("@worker.constraint.adcmt.reg() executed. breakMark=["+breakMark+"], delMark=["+delMark+"], contents=["+contents+"]");if(__util.isEmpty(contents)===true){alert(__msg.CMTPGN105);return false;}__util.log("worker.constraint.adcmt.reg() contents.length=["+contents.length+"], adcmtRegMinLength=["+G_CHNL_INFO.adcmtRegMinLength+"], adcmtRegMaxLength=["+G_CHNL_INFO.adcmtRegMaxLength+"]");if(contents.length<G_CHNL_INFO.adcmtRegMinLength){alert(__util.format(__msg.MW007,G_CHNL_INFO.adcmtRegMinLength));return false;}if(contents.length>G_CHNL_INFO.adcmtRegMaxLength){alert(__msg.MW005);return false;}__util.log("@worker.constraint.adcmt.reg() executed done.");return true;};worker.constraint.adcmt.del=function(breakMark,delMark,ownerMark){__util.log("@worker.constraint.adcmt.del() executed. breakMark=["+breakMark+"], delMark=["+delMark+"], ownerMark=["+ownerMark+"]");if(breakMark==="on"){alert(__msg.CMTPGN009);return false;}if(delMark==="on"){alert(__msg.CMTPGN010);return false;}if(ownerMark!=="on"){alert(__msg.CMTPGN006);return false;}if(confirm(__msg.MW066)===false){return false;}__util.log("@worker.constraint.adcmt.del() executed done.");return true;};worker.constraint.recm=function(breakMark,delMark,ownerMark,positiveOnFlag,negativeOnFlag){__util.log("@worker.constraint.recm() executed. breakMark=["+breakMark+"], delMark=["+delMark+"], ownerMark=["+ownerMark+"], positiveOnFlag=["+positiveOnFlag+"], negativeOnFlag=["+negativeOnFlag+"]");if(breakMark==="on"){alert(__msg.CMTPGN013);return false;}if(delMark==="on"){alert(__msg.CMTPGN014);return false;}__util.log("@worker.constraint.recm() executed done.");return true;};worker.constraint.reprt=function(breakMark,delMark,ownerMark){__util.log("@worker.constraint.reprt() executed. breakMark=["+breakMark+"], delMark=["+delMark+"], ownerMark=["+ownerMark+"]");if(breakMark==="on"){alert(__msg.CMTPGN015);return false;}if(delMark==="on"){alert(__msg.CMTPGN016);return false;}if(ownerMark==="on"){alert(__msg.CMTPGN006);return false;}__util.log("@worker.constraint.reprt() executed done.");return true;};return worker;},"0.1.0",["jquery"]);}(window));
